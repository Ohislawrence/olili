import{d as f,g as y,p as B,N as H,c as L,w as b,b as o,a as t,i,q as A,y as k,j as _,t as a,e as v,x as D,s as S,f as r,h,o as l,F as P,k as T,z as E}from"./app-Dts38djv.js";import{S as M}from"./StudentLayout-sHzCMBhN.js";import{_ as R}from"./Pagination-D88E98lm.js";import{_ as F}from"./PaymentStatusBadge-1rcUuC0U.js";import{r as $}from"./PlusIcon-D0MJHMrq.js";import{r as j}from"./CreditCardIcon-BPvE4wBN.js";import{r as z}from"./CheckCircleIcon-E9ZrmwLd.js";import{r as I}from"./XCircleIcon-DQikOxzU.js";import{r as Y}from"./CurrencyDollarIcon-CpT7cEKh.js";import{r as q}from"./MagnifyingGlassIcon-B9j_9CO_.js";import{r as G}from"./ExclamationTriangleIcon-yq4dVD4V.js";import{r as J}from"./ArrowPathIcon-CWFUmAD_.js";import"./XMarkIcon-pKLD2lFc.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserIcon-CYL-NxJr.js";import"./BellIcon-DmJG2Hxw.js";const K={class:"min-h-screen bg-gradient-to-br from-slate-50 to-white py-8"},Q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},W={class:"mb-8"},X={class:"flex items-center justify-between"},Z={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},tt={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},et={class:"flex items-center"},st={class:"p-3 bg-blue-100 rounded-xl"},ot={class:"ml-4"},at={class:"text-2xl font-bold text-gray-900"},lt={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},rt={class:"flex items-center"},nt={class:"p-3 bg-green-100 rounded-xl"},it={class:"ml-4"},dt={class:"text-2xl font-bold text-gray-900"},ct={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},ut={class:"flex items-center"},pt={class:"p-3 bg-red-100 rounded-xl"},mt={class:"ml-4"},xt={class:"text-2xl font-bold text-gray-900"},yt={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},gt={class:"flex items-center"},ft={class:"p-3 bg-purple-100 rounded-xl"},bt={class:"ml-4"},_t={class:"text-2xl font-bold text-gray-900"},vt={class:"bg-white rounded-xl shadow-sm border border-gray-100 mb-8"},ht={class:"p-6"},wt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},kt={class:"relative"},St={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},Pt={key:0,class:"text-center py-12"},Tt={key:1,class:"text-center py-12"},Ft={class:"mt-6"},$t={key:2},jt={class:"block md:hidden divide-y divide-gray-100"},Nt={class:"flex justify-between items-start mb-2"},Vt={class:"font-semibold text-gray-900"},Ot={class:"text-sm text-gray-500"},Ct={class:"text-right"},Ut={class:"font-bold text-gray-900"},Bt={class:"flex justify-between items-center text-sm text-gray-500"},Ht={class:"capitalize"},Lt={key:0},At={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Dt={key:1,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Et={class:"hidden md:block overflow-x-auto"},Mt={class:"w-full min-w-full divide-y divide-gray-200"},Rt={class:"bg-white divide-y divide-gray-200"},zt={class:"px-6 py-4 whitespace-nowrap"},It={class:"text-sm font-semibold text-gray-900"},Yt={class:"text-sm text-gray-500"},qt={class:"px-6 py-4 whitespace-nowrap"},Gt={class:"text-sm font-bold text-gray-900"},Jt={class:"px-6 py-4 whitespace-nowrap"},Kt={class:"px-6 py-4 whitespace-nowrap"},Qt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Wt={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Zt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"},te={key:3,class:"text-center py-12"},ee={class:"mt-2 text-gray-500 max-w-md mx-auto"},se={class:"mt-6"},oe={key:4,class:"px-6 py-4 border-t border-gray-200"},ve={__name:"History",props:{payments:{type:Object,default:()=>({data:[],links:[]})},stats:{type:Object,default:()=>({total_payments:0,successful_payments:0,failed_payments:0,pending_payments:0,total_spent:0})},filters:{type:Object,default:()=>({})},user_role:{type:String,default:"student"}},setup(N){const d=N,u=f(()=>(console.log("Payments prop:",d.payments),d.payments||{data:[],links:[]})),x=f(()=>(console.log("Stats prop:",d.stats),d.stats||{total_payments:0,successful_payments:0,failed_payments:0,pending_payments:0,total_spent:0})),n=y({search:d.filters?.search||"",status:d.filters?.status||"all",type:d.filters?.type||"all"}),p=y(null),c=y(!1),g=y(!1),V=f(()=>n.value.search!==""||n.value.status!=="all"||n.value.type!=="all"),m=()=>{c.value=!0,g.value=!1,E.get(route("payment.history"),n.value,{preserveState:!0,replace:!0,onFinish:()=>{c.value=!1},onError:()=>{c.value=!1,g.value=!0}})},O=()=>{p.value&&clearTimeout(p.value),p.value=setTimeout(()=>{m()},500)},C=()=>{n.value={search:"",status:"all",type:"all"},m()},U=()=>{window.location.reload()};return B(()=>[n.value.status,n.value.type],()=>{m()}),H(()=>{p.value&&clearTimeout(p.value)}),(w,e)=>(l(),L(M,null,{default:b(()=>[o(i(A),{title:"Payment History"}),t("div",K,[t("div",Q,[t("div",W,[t("div",X,[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"}," Payment History "),t("p",{class:"mt-2 text-gray-600"}," View your payment transactions and billing history ")],-1)),o(i(k),{href:w.route("payment.pricing"),class:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 border border-transparent rounded-lg font-semibold text-white shadow-md hover:shadow-lg transition-all duration-200 hover:scale-[1.02]"},{default:b(()=>[o(i($),{class:"h-5 w-5 mr-2"}),e[3]||(e[3]=_(" Upgrade Plan ",-1))]),_:1},8,["href"])])]),t("div",Z,[t("div",tt,[t("div",et,[t("div",st,[o(i(j),{class:"h-6 w-6 text-blue-600"})]),t("div",ot,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Payments",-1)),t("p",at,a(x.value.total_payments),1)])])]),t("div",lt,[t("div",rt,[t("div",nt,[o(i(z),{class:"h-6 w-6 text-green-600"})]),t("div",it,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-600"},"Successful",-1)),t("p",dt,a(x.value.successful_payments),1)])])]),t("div",ct,[t("div",ut,[t("div",pt,[o(i(I),{class:"h-6 w-6 text-red-600"})]),t("div",mt,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-600"},"Failed",-1)),t("p",xt,a(x.value.failed_payments),1)])])]),t("div",yt,[t("div",gt,[t("div",ft,[o(i(Y),{class:"h-6 w-6 text-purple-600"})]),t("div",bt,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Spent",-1)),t("p",_t," NGN "+a(x.value.total_spent.toLocaleString()),1)])])])]),t("div",vt,[t("div",ht,[t("div",wt,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Search ",-1)),t("div",kt,[v(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>n.value.search=s),placeholder:"Search by reference or description...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors",onInput:O},null,544),[[D,n.value.search]]),o(i(q),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Status ",-1)),v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.value.status=s),onChange:m,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"},[...e[10]||(e[10]=[t("option",{value:"all"},"All Status",-1),t("option",{value:"success"},"Successful",-1),t("option",{value:"failed"},"Failed",-1),t("option",{value:"pending"},"Pending",-1)])],544),[[S,n.value.status]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Type ",-1)),v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.value.type=s),onChange:m,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"},[...e[12]||(e[12]=[t("option",{value:"all"},"All Types",-1),t("option",{value:"subscription"},"Subscriptions",-1),t("option",{value:"one_time"},"One-time Payments",-1)])],544),[[S,n.value.type]])]),t("div",{class:"flex items-end"},[t("button",{onClick:C,class:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"}," Reset Filters ")])])])]),t("div",St,[e[21]||(e[21]=t("div",{class:"px-6 py-4 border-b border-gray-200/70"},[t("h2",{class:"text-lg font-bold text-gray-900"}," Transaction History ")],-1)),c.value?(l(),r("div",Pt,[...e[14]||(e[14]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Loading payments...",-1)])])):g.value?(l(),r("div",Tt,[o(i(G),{class:"mx-auto h-12 w-12 text-red-500"}),e[16]||(e[16]=t("h3",{class:"mt-4 text-lg font-semibold text-gray-900"}," Unable to load payments ",-1)),e[17]||(e[17]=t("p",{class:"mt-2 text-gray-500 max-w-md mx-auto"}," There was an error loading your payment history. Please try again. ",-1)),t("div",Ft,[t("button",{onClick:U,class:"inline-flex items-center px-4 py-2 bg-emerald-600 border border-transparent rounded-lg font-semibold text-white hover:bg-emerald-700 transition-colors"},[o(i(J),{class:"h-5 w-5 mr-2"}),e[15]||(e[15]=_(" Reload Page ",-1))])])])):!c.value&&u.value.data.length>0?(l(),r("div",$t,[t("div",jt,[(l(!0),r(P,null,T(u.value.data,s=>(l(),r("div",{key:s.id,class:"p-4 hover:bg-gray-50 transition-colors"},[t("div",Nt,[t("div",null,[t("p",Vt,a(s.description||s.plan_name||"Payment"),1),t("p",Ot,a(s.reference),1)]),t("div",Ct,[t("p",Ut,a(s.formatted_amount),1),o(F,{status:s.status},null,8,["status"])])]),t("div",Bt,[t("div",null,[t("span",Ht,a(s.status),1),s.paid_at?(l(),r("span",Lt," â€¢ "+a(s.paid_at),1)):h("",!0)]),t("div",null,[s.is_subscription?(l(),r("span",At," Subscription ")):(l(),r("span",Dt," One-time "))])])]))),128))]),t("div",Et,[t("table",Mt,[e[18]||(e[18]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Transaction "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Amount "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Type "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Date "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Reference ")])],-1)),t("tbody",Rt,[(l(!0),r(P,null,T(u.value.data,s=>(l(),r("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[t("td",zt,[t("div",null,[t("p",It,a(s.description||s.plan_name||"Payment"),1),t("p",Yt,a(s.is_subscription?"Subscription Plan":"One-time Payment"),1)])]),t("td",qt,[t("p",Gt,a(s.formatted_amount),1)]),t("td",Jt,[o(F,{status:s.status},null,8,["status"])]),t("td",Kt,[s.is_subscription?(l(),r("span",Qt," Subscription ")):(l(),r("span",Wt," One-time "))]),t("td",Xt,a(s.paid_at||s.created_at),1),t("td",Zt,a(s.reference),1)]))),128))])])])])):!c.value&&u.value.data.length===0?(l(),r("div",te,[o(i(j),{class:"mx-auto h-12 w-12 text-gray-400"}),e[20]||(e[20]=t("h3",{class:"mt-4 text-lg font-semibold text-gray-900"}," No payments found ",-1)),t("p",ee,a(V.value?"Try adjusting your filters to see more results.":"You haven't made any payments yet."),1),t("div",se,[o(i(k),{href:w.route("payment.pricing"),class:"inline-flex items-center px-4 py-2 bg-emerald-600 border border-transparent rounded-lg font-semibold text-white hover:bg-emerald-700 transition-colors"},{default:b(()=>[o(i($),{class:"h-5 w-5 mr-2"}),e[19]||(e[19]=_(" Make Your First Payment ",-1))]),_:1},8,["href"])])])):h("",!0),!c.value&&u.value.data.length>0?(l(),r("div",oe,[o(R,{links:u.value.links||[]},null,8,["links"])])):h("",!0)])])])]),_:1}))}};export{ve as default};
