import{g as p,u as U,d as R,m as z,c as N,w as O,b as v,a as e,i as s,q as P,j as V,t as a,n as g,A as M,e as d,f as l,h as _,s as L,o as i,x as k,v as b,F as B,k as H,z as q}from"./app-m1nts5BB.js";import{a as W,A as $}from"./AdminLayout-BhWtedq4.js";import{r as A}from"./ArrowPathIcon-W5rHUH7p.js";import"./XMarkIcon-BCScXg1y.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserIcon-bjZ1M37r.js";import"./UsersIcon-OeyzPZjF.js";import"./ChatBubbleLeftRightIcon-DuiCuw4C.js";import"./ChartBarIcon-D641CsbY.js";import"./CurrencyDollarIcon-BB1gDPIQ.js";import"./EyeIcon-BRpY95HZ.js";const G={class:"space-y-6"},Q={class:"flex justify-between items-center"},J={class:"flex space-x-3"},K=["disabled"],X=["disabled"],Y={class:"bg-white shadow rounded-lg"},Z={class:"p-6"},ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},te={class:"mt-1 text-sm text-gray-900"},se={class:"mt-1 text-sm text-gray-900"},oe={class:"mt-1 text-sm text-gray-900"},re={class:"bg-white shadow rounded-lg"},ne={class:"p-6 space-y-6"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ae={key:0,class:"mt-1 text-sm text-red-600"},le={key:0,class:"mt-1 text-sm text-red-600"},de={key:0,class:"mt-1 text-sm text-red-600"},ue={key:0,class:"mt-1 text-sm text-red-600"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},me={class:"flex items-center"},ce={class:"flex items-center"},pe={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end"},_e=["disabled"],be={key:0},fe={key:1},xe={class:"bg-white shadow rounded-lg"},ye={class:"p-6 space-y-6"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ke={key:0,class:"mt-1 text-sm text-red-600"},we={key:0,class:"mt-1 text-sm text-red-600"},he={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Se={class:"flex items-center"},Ce={class:"flex items-center"},Ve={class:"flex items-center"},Le={class:"flex items-center"},Ae={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end"},Ue=["disabled"],Me={key:0},qe={key:1},Fe={class:"bg-white shadow rounded-lg"},Te={class:"p-6"},De={class:"flex space-x-4 mb-4"},Ee=["disabled"],Ie={class:"bg-gray-900 rounded-lg p-4 font-mono text-sm text-green-400 max-h-96 overflow-y-auto"},je={key:0,class:"text-center py-4"},Re={key:1,class:"text-center py-4 text-gray-500"},ze={key:2},Xe={__name:"Index",props:{system_info:Object,ai_settings:Object,course_settings:Object},setup(m){const u=m,f=p(!1),x=p(!1),y=p(!1),w=p([]),S=p("laravel"),C=p(100),r=U({default_provider:u.ai_settings.default_provider,max_tokens_per_request:u.ai_settings.max_tokens_per_request,default_temperature:u.ai_settings.default_temperature,cost_alert_threshold:u.ai_settings.cost_alert_threshold,enable_cost_tracking:u.ai_settings.enable_cost_tracking,auto_switch_provider:u.ai_settings.auto_switch_provider}),n=U({auto_generate_content:u.course_settings.auto_generate_content,enable_ai_grading:u.course_settings.enable_ai_grading,max_weekly_study_hours:u.course_settings.max_weekly_study_hours,default_course_duration_weeks:u.course_settings.default_course_duration_weeks,enable_progress_tracking:u.course_settings.enable_progress_tracking,enable_chat_restrictions:u.course_settings.enable_chat_restrictions}),F=R(()=>{switch(u.system_info.environment){case"production":return"bg-green-100 text-green-800";case"staging":return"bg-yellow-100 text-yellow-800";case"local":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}),T=async()=>{if(confirm("Are you sure you want to clear all system cache? This may temporarily slow down the application.")){f.value=!0;try{await q.post(route("admin.settings.clear-cache"),{},{preserveScroll:!0,onFinish:()=>{f.value=!1}})}catch(c){f.value=!1,console.error("Failed to clear cache:",c)}}},D=async()=>{if(confirm("Run system maintenance tasks? This will restart queues and run scheduled tasks.")){x.value=!0;try{await q.post(route("admin.settings.run-maintenance"),{},{preserveScroll:!0,onFinish:()=>{x.value=!1}})}catch(c){x.value=!1,console.error("Failed to run maintenance:",c)}}},E=()=>{r.post(route("admin.settings.update-ai"),{preserveScroll:!0})},I=()=>{n.post(route("admin.settings.update-course"),{preserveScroll:!0})},h=async()=>{y.value=!0;try{const c=await axios.get(route("admin.settings.get-logs"),{params:{type:S.value,lines:C.value}});w.value=c.data.logs}catch(c){console.error("Failed to load logs:",c),w.value=["Error loading log file."]}finally{y.value=!1}};return z(()=>{h()}),(c,t)=>(i(),N($,null,{default:O(()=>[v(s(P),{title:"System Settings"}),e("div",G,[e("div",Q,[t[14]||(t[14]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"System Settings"),e("p",{class:"mt-1 text-sm text-gray-600"}," Manage system configuration and application settings ")],-1)),e("div",J,[e("button",{onClick:T,disabled:f.value,class:"inline-flex items-center px-4 py-2 bg-yellow-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-700 focus:bg-yellow-700 active:bg-yellow-800 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},[v(s(A),{class:"h-4 w-4 mr-2"}),V(" "+a(f.value?"Clearing...":"Clear Cache"),1)],8,K),e("button",{onClick:D,disabled:x.value,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},[v(s(W),{class:"h-4 w-4 mr-2"}),V(" "+a(x.value?"Running...":"Run Maintenance"),1)],8,X)])]),e("div",Y,[t[21]||(t[21]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"System Information")],-1)),e("div",Z,[e("div",ee,[e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-500"},"Laravel Version",-1)),e("p",te,a(m.system_info.laravel_version),1)]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-500"},"PHP Version",-1)),e("p",se,a(m.system_info.php_version),1)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-500"},"Environment",-1)),e("span",{class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mt-1",F.value])},a(m.system_info.environment),3)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-500"},"Debug Mode",-1)),e("span",{class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mt-1",m.system_info.debug_mode?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},a(m.system_info.debug_mode?"Enabled":"Disabled"),3)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-500"},"Timezone",-1)),e("p",oe,a(m.system_info.timezone),1)]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-500"},"Maintenance Mode",-1)),e("span",{class:g(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mt-1",m.system_info.maintenance_mode?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},a(m.system_info.maintenance_mode?"Enabled":"Disabled"),3)])])])]),e("div",re,[t[30]||(t[30]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"AI Settings")],-1)),e("form",{onSubmit:M(E,["prevent"])},[e("div",ne,[e("div",ie,[e("div",null,[t[23]||(t[23]=e("label",{for:"default_provider",class:"block text-sm font-medium text-gray-700"}," Default AI Provider * ",-1)),d(e("select",{id:"default_provider","onUpdate:modelValue":t[0]||(t[0]=o=>s(r).default_provider=o),class:g(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-300":s(r).errors.default_provider}])},[...t[22]||(t[22]=[e("option",{value:"openai"},"OpenAI",-1),e("option",{value:"anthropic"},"Anthropic",-1),e("option",{value:"deepseek"},"DeepSeek",-1),e("option",{value:"azure"},"Azure OpenAI",-1)])],2),[[L,s(r).default_provider]]),s(r).errors.default_provider?(i(),l("p",ae,a(s(r).errors.default_provider),1)):_("",!0)]),e("div",null,[t[24]||(t[24]=e("label",{for:"max_tokens_per_request",class:"block text-sm font-medium text-gray-700"}," Max Tokens per Request * ",-1)),d(e("input",{type:"number",id:"max_tokens_per_request","onUpdate:modelValue":t[1]||(t[1]=o=>s(r).max_tokens_per_request=o),min:"100",max:"32000",class:g(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-300":s(r).errors.max_tokens_per_request}])},null,2),[[k,s(r).max_tokens_per_request]]),s(r).errors.max_tokens_per_request?(i(),l("p",le,a(s(r).errors.max_tokens_per_request),1)):_("",!0)]),e("div",null,[t[25]||(t[25]=e("label",{for:"default_temperature",class:"block text-sm font-medium text-gray-700"}," Default Temperature * ",-1)),d(e("input",{type:"number",id:"default_temperature","onUpdate:modelValue":t[2]||(t[2]=o=>s(r).default_temperature=o),min:"0",max:"2",step:"0.1",class:g(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-300":s(r).errors.default_temperature}])},null,2),[[k,s(r).default_temperature]]),s(r).errors.default_temperature?(i(),l("p",de,a(s(r).errors.default_temperature),1)):_("",!0),t[26]||(t[26]=e("p",{class:"mt-1 text-sm text-gray-500"}," Lower values = more focused, Higher values = more creative ",-1))]),e("div",null,[t[27]||(t[27]=e("label",{for:"cost_alert_threshold",class:"block text-sm font-medium text-gray-700"}," Cost Alert Threshold ($) * ",-1)),d(e("input",{type:"number",id:"cost_alert_threshold","onUpdate:modelValue":t[3]||(t[3]=o=>s(r).cost_alert_threshold=o),min:"0",step:"0.01",class:g(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-300":s(r).errors.cost_alert_threshold}])},null,2),[[k,s(r).cost_alert_threshold]]),s(r).errors.cost_alert_threshold?(i(),l("p",ue,a(s(r).errors.cost_alert_threshold),1)):_("",!0)])]),e("div",ge,[e("div",me,[d(e("input",{type:"checkbox",id:"enable_cost_tracking","onUpdate:modelValue":t[4]||(t[4]=o=>s(r).enable_cost_tracking=o),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[b,s(r).enable_cost_tracking]]),t[28]||(t[28]=e("label",{for:"enable_cost_tracking",class:"ml-2 block text-sm text-gray-900"}," Enable Cost Tracking ",-1))]),e("div",ce,[d(e("input",{type:"checkbox",id:"auto_switch_provider","onUpdate:modelValue":t[5]||(t[5]=o=>s(r).auto_switch_provider=o),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[b,s(r).auto_switch_provider]]),t[29]||(t[29]=e("label",{for:"auto_switch_provider",class:"ml-2 block text-sm text-gray-900"}," Auto-switch Provider on Failure ",-1))])])]),e("div",pe,[e("button",{type:"submit",disabled:s(r).processing,class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},[s(r).processing?(i(),l("span",be,"Saving...")):(i(),l("span",fe,"Save AI Settings"))],8,_e)])],32)]),e("div",xe,[t[37]||(t[37]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Course Settings")],-1)),e("form",{onSubmit:M(I,["prevent"])},[e("div",ye,[e("div",ve,[e("div",null,[t[31]||(t[31]=e("label",{for:"max_weekly_study_hours",class:"block text-sm font-medium text-gray-700"}," Max Weekly Study Hours * ",-1)),d(e("input",{type:"number",id:"max_weekly_study_hours","onUpdate:modelValue":t[6]||(t[6]=o=>s(n).max_weekly_study_hours=o),min:"1",max:"40",class:g(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-300":s(n).errors.max_weekly_study_hours}])},null,2),[[k,s(n).max_weekly_study_hours]]),s(n).errors.max_weekly_study_hours?(i(),l("p",ke,a(s(n).errors.max_weekly_study_hours),1)):_("",!0)]),e("div",null,[t[32]||(t[32]=e("label",{for:"default_course_duration_weeks",class:"block text-sm font-medium text-gray-700"}," Default Course Duration (Weeks) * ",-1)),d(e("input",{type:"number",id:"default_course_duration_weeks","onUpdate:modelValue":t[7]||(t[7]=o=>s(n).default_course_duration_weeks=o),min:"1",max:"52",class:g(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-300":s(n).errors.default_course_duration_weeks}])},null,2),[[k,s(n).default_course_duration_weeks]]),s(n).errors.default_course_duration_weeks?(i(),l("p",we,a(s(n).errors.default_course_duration_weeks),1)):_("",!0)])]),e("div",he,[e("div",Se,[d(e("input",{type:"checkbox",id:"auto_generate_content","onUpdate:modelValue":t[8]||(t[8]=o=>s(n).auto_generate_content=o),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[b,s(n).auto_generate_content]]),t[33]||(t[33]=e("label",{for:"auto_generate_content",class:"ml-2 block text-sm text-gray-900"}," Auto-generate Course Content ",-1))]),e("div",Ce,[d(e("input",{type:"checkbox",id:"enable_ai_grading","onUpdate:modelValue":t[9]||(t[9]=o=>s(n).enable_ai_grading=o),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[b,s(n).enable_ai_grading]]),t[34]||(t[34]=e("label",{for:"enable_ai_grading",class:"ml-2 block text-sm text-gray-900"}," Enable AI Grading ",-1))]),e("div",Ve,[d(e("input",{type:"checkbox",id:"enable_progress_tracking","onUpdate:modelValue":t[10]||(t[10]=o=>s(n).enable_progress_tracking=o),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[b,s(n).enable_progress_tracking]]),t[35]||(t[35]=e("label",{for:"enable_progress_tracking",class:"ml-2 block text-sm text-gray-900"}," Enable Progress Tracking ",-1))]),e("div",Le,[d(e("input",{type:"checkbox",id:"enable_chat_restrictions","onUpdate:modelValue":t[11]||(t[11]=o=>s(n).enable_chat_restrictions=o),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[b,s(n).enable_chat_restrictions]]),t[36]||(t[36]=e("label",{for:"enable_chat_restrictions",class:"ml-2 block text-sm text-gray-900"}," Enable Chat Restrictions ",-1))])])]),e("div",Ae,[e("button",{type:"submit",disabled:s(n).processing,class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-25 transition ease-in-out duration-150"},[s(n).processing?(i(),l("span",Me,"Saving...")):(i(),l("span",qe,"Save Course Settings"))],8,Ue)])],32)]),e("div",Fe,[t[42]||(t[42]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"System Logs")],-1)),e("div",Te,[e("div",De,[d(e("select",{"onUpdate:modelValue":t[12]||(t[12]=o=>S.value=o),onChange:h,class:"border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[...t[38]||(t[38]=[e("option",{value:"laravel"},"Laravel Log",-1),e("option",{value:"ai"},"AI Log",-1),e("option",{value:"jobs"},"Queue Log",-1)])],544),[[L,S.value]]),d(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>C.value=o),onChange:h,class:"border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[...t[39]||(t[39]=[e("option",{value:"50"},"Last 50 lines",-1),e("option",{value:"100"},"Last 100 lines",-1),e("option",{value:"200"},"Last 200 lines",-1),e("option",{value:"500"},"Last 500 lines",-1)])],544),[[L,C.value]]),e("button",{onClick:h,disabled:y.value,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[v(s(A),{class:g(["h-4 w-4 mr-2",{"animate-spin":y.value}])},null,8,["class"]),t[40]||(t[40]=V(" Refresh ",-1))],8,Ee)]),e("div",Ie,[y.value?(i(),l("div",je,[v(s(A),{class:"h-6 w-6 animate-spin mx-auto"}),t[41]||(t[41]=e("p",{class:"mt-2"},"Loading logs...",-1))])):w.value.length===0?(i(),l("div",Re," No log data available ")):(i(),l("div",ze,[(i(!0),l(B,null,H(w.value,(o,j)=>(i(),l("div",{key:j,class:"whitespace-pre-wrap break-words border-b border-gray-700 py-1"},a(o),1))),128))]))])])])])]),_:1}))}};export{Xe as default};
