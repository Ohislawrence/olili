import{f as n,a as e,o as l,d as h,n as k,t as r,b as a,h as c,F as y,j as p,A as z,r as A,c as D,w as v,p as T,g as b,i as g,x as f,y as N}from"./app-9iTwA3vC.js";import{S as M}from"./StudentLayout-CG3ayj3X.js";import{r as B}from"./ExclamationTriangleIcon-D09Y4htZ.js";import{a as w}from"./XMarkIcon-DR50bQrw.js";import{r as P}from"./ArrowPathIcon-DJSBMRrW.js";import{r as L}from"./CheckCircleIcon-gOQAQdUW.js";import{r as F}from"./ClockIcon-DtrScC2X.js";import{r as O}from"./AcademicCapIcon-BcrHGEuI.js";import"./DropdownLink-BJxGAADP.js";import"./NavLink-CVNpfdyq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SparklesIcon-Vg7orskU.js";import"./transition-BH8B5sua.js";import"./UserCircleIcon-yAE3agds.js";import"./BellIcon-CKLl074K.js";import"./CreditCardIcon-BSp36FxJ.js";function R(s,u){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"})])}const V={class:"relative inline-flex items-center justify-center"},W=["width","height"],I=["cx","cy","r","stroke-width"],E=["cx","cy","r","stroke-width","stroke-dasharray","stroke-dashoffset"],C={__name:"ProgressRing",props:{progress:{type:Number,default:0},size:{type:String,default:"md",validator:s=>["sm","md","lg"].includes(s)}},setup(s){const u=s,x={sm:40,md:60,lg:80},_={sm:4,md:6,lg:8},d=h(()=>x[u.size]),m=h(()=>_[u.size]),i=h(()=>d.value/2),t=h(()=>i.value-m.value/2),o=h(()=>2*Math.PI*t.value),$=h(()=>o.value-u.progress/100*o.value),j=h(()=>u.progress<30?"text-red-500":u.progress<70?"text-yellow-500":"text-green-500"),S=h(()=>u.progress<30?"text-red-600":u.progress<70?"text-yellow-600":"text-green-600");return(Nt,Mt)=>(l(),n("div",V,[(l(),n("svg",{width:d.value,height:d.value,class:"transform -rotate-90"},[e("circle",{cx:i.value,cy:i.value,r:t.value,stroke:"currentColor","stroke-width":m.value,fill:"transparent",class:"text-gray-200"},null,8,I),e("circle",{cx:i.value,cy:i.value,r:t.value,stroke:"currentColor","stroke-width":m.value,fill:"transparent","stroke-dasharray":o.value,"stroke-dashoffset":$.value,class:k(["text-blue-600 transition-all duration-500 ease-in-out",j.value])},null,10,E)],8,W)),e("span",{class:k(["absolute text-sm font-medium",S.value])},r(Math.round(s.progress))+"% ",3)]))}},Q={class:"bg-white rounded-lg shadow"},U={class:"p-6"},Z={class:"flex items-center justify-between mb-6"},q={class:"text-2xl font-bold text-gray-900"},H={class:"mb-6"},Y={class:"flex items-end space-x-1 h-20"},G={class:"text-xs text-gray-500 mt-1"},J={class:"grid grid-cols-2 gap-4"},K={class:"text-lg font-semibold text-gray-900"},X={class:"text-lg font-semibold text-gray-900"},ee={class:"text-lg font-semibold text-gray-900"},te={class:"text-lg font-semibold text-gray-900"},se={__name:"LearningStats",props:{analytics:Object},setup(s){const u=s,x=h(()=>{const _=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],d=u.analytics.weekly_progress||{};return _.map(m=>{const t=(d[m]?.study_time||0)/60,o=Math.min(t/8*100,100);return{label:m,height:o,hours:t.toFixed(1)}})});return(_,d)=>(l(),n("div",Q,[d[6]||(d[6]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-semibold text-gray-900"},"Learning Analytics")],-1)),e("div",U,[e("div",Z,[e("div",null,[d[0]||(d[0]=e("p",{class:"text-sm font-medium text-gray-600"},"Current Streak",-1)),e("p",q,r(s.analytics.streak_days)+" day(s) ",1)]),a(c(R),{class:"h-8 w-8 text-orange-500"})]),e("div",H,[d[1]||(d[1]=e("h3",{class:"text-sm font-medium text-gray-900 mb-3"}," Weekly Study Time (hours) ",-1)),e("div",Y,[(l(!0),n(y,null,p(x.value,(m,i)=>(l(),n("div",{key:i,class:"flex-1 flex flex-col items-center"},[e("div",{class:"w-full bg-blue-200 rounded-t transition-all duration-500",style:z({height:`${m.height}%`})},null,4),e("span",G,r(m.label),1)]))),128))])]),e("div",J,[e("div",null,[d[2]||(d[2]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Study Time",-1)),e("p",K,r(s.analytics.total_study_time_hours)+"h ",1)]),e("div",null,[d[3]||(d[3]=e("p",{class:"text-sm font-medium text-gray-600"},"Completed Items",-1)),e("p",X,r(s.analytics.completed_items),1)]),e("div",null,[d[4]||(d[4]=e("p",{class:"text-sm font-medium text-gray-600"},"Average Score",-1)),e("p",ee,r(s.analytics.average_score)+"% ",1)]),e("div",null,[d[5]||(d[5]=e("p",{class:"text-sm font-medium text-gray-600"},"Active Courses",-1)),e("p",te,r(s.analytics.active_courses),1)])])])]))}},re={class:"min-h-screen bg-gradient-to-br from-slate-50 to-white"},oe={class:"py-6"},ie={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},le={class:"mb-8"},ne={class:"text-3xl font-bold text-gray-900"},de={key:0,class:"mb-8"},ae={class:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl shadow-sm border border-amber-200 p-6"},ce={class:"flex items-center justify-between"},ue={class:"flex items-center"},me={class:"p-3 bg-amber-100 rounded-xl mr-4"},xe={class:"text-right"},ge={class:"text-sm text-gray-600"},he={class:"mt-4 space-y-3"},ye={class:"flex items-center"},_e={class:"w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center mr-3"},ve={class:"text-sm font-semibold text-gray-900"},be={class:"text-xs text-gray-500"},fe=["onClick","disabled"],pe={key:1,class:"text-xs text-gray-400"},we={key:1,class:"mb-8"},ke={class:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-xl shadow-lg p-6 text-white"},$e={class:"flex items-center justify-between"},Ce={class:"text-lg font-bold mb-1"},je={class:"text-emerald-100 text-sm"},Se={class:"font-semibold capitalize"},ze={class:"text-right"},Ae={class:"text-2xl font-bold"},De={class:"text-emerald-100 text-sm"},Te={class:"mt-4 flex items-center space-x-4"},Ne={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Me={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow"},Be={class:"flex items-center"},Pe={class:"p-3 bg-blue-100 rounded-xl"},Le={class:"ml-4"},Fe={class:"text-2xl font-bold text-gray-900"},Oe={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow"},Re={class:"flex items-center"},Ve={class:"p-3 bg-green-100 rounded-xl"},We={class:"ml-4"},Ie={class:"text-2xl font-bold text-gray-900"},Ee={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow"},Qe={class:"flex items-center"},Ue={class:"p-3 bg-purple-100 rounded-xl"},Ze={class:"ml-4"},qe={class:"text-2xl font-bold text-gray-900"},He={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 hover:shadow-md transition-shadow"},Ye={class:"flex items-center"},Ge={class:"p-3 bg-yellow-100 rounded-xl"},Je={class:"ml-4"},Ke={class:"text-2xl font-bold text-gray-900"},Xe={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},et={class:"lg:col-span-2 space-y-8"},tt={key:0,class:"bg-white rounded-xl shadow-sm border border-gray-100"},st={class:"p-6"},rt={class:"flex items-start justify-between"},ot={class:"text-xl font-bold text-gray-900"},it={class:"mt-1 text-gray-600"},lt={class:"mt-4 flex items-center"},nt={class:"ml-3 text-sm text-gray-600"},dt={key:0,class:"mt-6"},at={class:"flex items-center p-3 bg-gray-50 rounded-lg border border-gray-100"},ct={class:"flex-shrink-0 w-8 h-8 bg-white border border-gray-300 rounded-full flex items-center justify-center"},ut={class:"ml-3 flex-1"},mt={class:"text-sm font-medium text-gray-900"},xt={class:"text-xs text-gray-500"},gt={class:"bg-white rounded-xl shadow-sm border border-gray-100"},ht={class:"divide-y divide-gray-100"},yt={class:"flex items-center"},_t={class:"flex-shrink-0 w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center"},vt={class:"ml-4 flex-1"},bt={class:"text-sm font-semibold text-gray-900"},ft={class:"text-sm text-gray-500"},pt={class:"text-sm text-gray-500"},wt={key:0,class:"px-6 py-8 text-center"},kt={class:"space-y-8"},$t={class:"bg-white rounded-xl shadow-sm border border-gray-100"},Ct={class:"p-6"},jt={class:"space-y-4"},St={class:"text-sm font-medium text-gray-900"},zt={class:"text-xs text-gray-500"},At={class:"text-sm font-medium text-gray-900"},Dt={class:"text-xs text-gray-500"},Tt={key:0,class:"text-center py-4"},Gt={__name:"Dashboard",props:{stats:Object,active_course:Object,recent_activity:Array,upcoming_deadlines:Object,learning_analytics:Object,current_subscription:Object,recently_dropped_courses:{type:Array,default:()=>[]}},setup(s){const u=s,x=A({}),_=i=>i?i.billing_cycle_days>=365?"year":i.billing_cycle_days>=90?"quarter":i.billing_cycle_days>=30?"month":"week":"month",d=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",m=async i=>{if(!x.value[i.id]){x.value[i.id]=!0;try{await N.post(route("student.courses.enroll",i.id),{},{preserveScroll:!0,onSuccess:()=>{const t=u.recently_dropped_courses.findIndex(o=>o.id===i.id);t!==-1&&u.recently_dropped_courses.splice(t,1)},onFinish:()=>{x.value[i.id]=!1}})}catch(t){console.error("Error re-enrolling in course:",t),x.value[i.id]=!1}}};return(i,t)=>(l(),D(M,null,{default:v(()=>[e("div",re,[a(c(T),{title:"Student Dashboard"}),e("div",oe,[e("div",ie,[e("div",le,[e("h1",ne," Welcome, "+r(i.$page.props.auth.user.name)+"! ",1),t[0]||(t[0]=e("p",{class:"mt-2 text-gray-600"}," Continue your learning journey and track your progress. ",-1))]),s.recently_dropped_courses&&s.recently_dropped_courses.length>0?(l(),n("div",de,[e("div",ae,[e("div",ce,[e("div",ue,[e("div",me,[a(c(B),{class:"h-6 w-6 text-amber-600"})]),t[1]||(t[1]=e("div",null,[e("h3",{class:"text-lg font-bold text-gray-900 mb-1"}," Recently Dropped Courses "),e("p",{class:"text-amber-700 text-sm"}," You can re-enroll in these courses anytime ")],-1))]),e("div",xe,[e("p",ge,r(s.recently_dropped_courses.length)+" course"+r(s.recently_dropped_courses.length>1?"s":"")+" dropped ",1)])]),e("div",he,[(l(!0),n(y,null,p(s.recently_dropped_courses,o=>(l(),n("div",{key:o.id,class:"flex items-center justify-between p-3 bg-white rounded-lg border border-amber-100 hover:border-amber-300 transition-colors"},[e("div",ye,[e("div",_e,[a(c(w),{class:"h-5 w-5 text-amber-600"})]),e("div",null,[e("p",ve,r(o.title),1),e("p",be," Dropped "+r(o.dropped_at),1)])]),o.can_reenroll?(l(),n("button",{key:0,onClick:$=>m(o),disabled:x.value[o.id],class:"inline-flex items-center px-3 py-1.5 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white text-xs font-semibold rounded-lg transition-all duration-200 shadow-sm hover:shadow-md"},[x.value[o.id]?(l(),n(y,{key:0},[t[2]||(t[2]=e("svg",{class:"animate-spin h-3 w-3 mr-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),t[3]||(t[3]=g(" Processing... ",-1))],64)):(l(),n(y,{key:1},[a(c(P),{class:"h-3 w-3 mr-1"}),t[4]||(t[4]=g(" Re-enroll ",-1))],64))],8,fe)):(l(),n("span",pe," Not available "))]))),128))])])])):b("",!0),s.current_subscription?(l(),n("div",we,[e("div",ke,[e("div",$e,[e("div",null,[e("h3",Ce,r(s.current_subscription.plan?.name||"Current Plan"),1),e("p",je,[t[5]||(t[5]=g(" Status: ",-1)),e("span",Se,r(s.current_subscription.status),1),g(" • Renews: "+r(d(s.current_subscription.ends_at)),1)])]),e("div",ze,[e("p",Ae,r(s.current_subscription.plan?.price?`${s.current_subscription.plan.currency} ${s.current_subscription.plan.price}`:"Free"),1),e("p",De," per "+r(_(s.current_subscription.plan)),1)])]),e("div",Te,[a(c(f),{href:i.route("payment.pricing"),class:"bg-white text-emerald-600 hover:bg-emerald-50 px-4 py-2 rounded-lg font-semibold text-sm transition-colors"},{default:v(()=>[...t[6]||(t[6]=[g(" Change Plan ",-1)])]),_:1},8,["href"]),a(c(f),{href:i.route("payment.payment.history"),class:"text-white hover:text-emerald-100 font-medium text-sm transition-colors"},{default:v(()=>[...t[7]||(t[7]=[g(" View Billing ",-1)])]),_:1},8,["href"])])])])):b("",!0),e("div",Ne,[e("div",Me,[e("div",Be,[e("div",Pe,[a(c(w),{class:"h-6 w-6 text-blue-600"})]),e("div",Le,[t[8]||(t[8]=e("p",{class:"text-sm font-medium text-gray-600"},"Active Courses",-1)),e("p",Fe,r(s.stats.active_courses),1)])])]),e("div",Oe,[e("div",Re,[e("div",Ve,[a(c(L),{class:"h-6 w-6 text-green-600"})]),e("div",We,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-600"},"Completion Rate",-1)),e("p",Ie,r(s.stats.completion_rate)+"% ",1)])])]),e("div",Ee,[e("div",Qe,[e("div",Ue,[a(c(F),{class:"h-6 w-6 text-purple-600"})]),e("div",Ze,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-gray-600"},"Study Time",-1)),e("p",qe,r(s.stats.total_study_time)+"h ",1)])])]),e("div",He,[e("div",Ye,[e("div",Ge,[a(c(O),{class:"h-6 w-6 text-yellow-600"})]),e("div",Je,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Avg Quiz Score",-1)),e("p",Ke,r(s.stats.average_quiz_score)+"% ",1)])])])]),e("div",Xe,[e("div",et,[s.active_course?(l(),n("div",tt,[t[15]||(t[15]=e("div",{class:"px-6 py-4 border-b border-gray-200/70"},[e("h2",{class:"text-lg font-bold text-gray-900"}," Continue Learning ")],-1)),e("div",st,[e("div",rt,[e("div",null,[e("h3",ot,r(s.active_course.title),1),e("p",it,r(s.active_course.subject),1),e("div",lt,[a(C,{progress:s.active_course.progress?.overall_completion_percentage||0,size:"md"},null,8,["progress"]),e("span",nt,r(s.active_course.progress?.completed_modules||0)+" of "+r(s.active_course.progress?.total_modules||0)+" modules completed ",1)])]),a(c(f),{href:i.route("student.courses.learn",s.active_course.id),class:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 border border-transparent rounded-lg font-semibold text-white shadow-md hover:shadow-lg transition-all duration-200 hover:scale-[1.02]"},{default:v(()=>[...t[12]||(t[12]=[g(" Continue ",-1)])]),_:1},8,["href"])]),s.active_course.next_topic?(l(),n("div",dt,[t[14]||(t[14]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-3"}," Next Topic ",-1)),e("div",at,[e("div",ct,[a(c(w),{class:"h-4 w-4 text-gray-700"})]),e("div",ut,[e("p",mt,r(s.active_course.next_topic.title),1),e("p",xt,r(s.active_course.next_topic.module_title)+" • "+r(s.active_course.next_topic.estimated_duration_minutes)+" min ",1)]),a(c(f),{href:i.route("student.courses.learn",{course:s.active_course.id,topic:s.active_course.next_topic.id}),class:"text-xs text-emerald-600 hover:text-emerald-800 font-semibold"},{default:v(()=>[...t[13]||(t[13]=[g(" Start ",-1)])]),_:1},8,["href"])])])):b("",!0)])])):b("",!0),e("div",gt,[t[17]||(t[17]=e("div",{class:"px-6 py-4 border-b border-gray-200/70"},[e("h2",{class:"text-lg font-bold text-gray-900"}," Recent Activity ")],-1)),e("div",ht,[(l(!0),n(y,null,p(s.recent_activity,o=>(l(),n("div",{key:o.id,class:"px-6 py-4 hover:bg-gray-50 transition-colors"},[e("div",yt,[e("div",_t,[a(c(w),{class:"h-5 w-5 text-emerald-600"})]),e("div",vt,[e("p",bt,r(o.topic_title),1),e("p",ft,r(o.course_title)+" • "+r(o.module_title)+" • "+r(o.time_spent)+" minutes ",1)]),e("div",pt,r(o.created_at),1)])]))),128)),s.recent_activity.length===0?(l(),n("div",wt,[...t[16]||(t[16]=[e("p",{class:"text-gray-500"},"No recent activity",-1)])])):b("",!0)])])]),e("div",kt,[a(se,{analytics:s.learning_analytics},null,8,["analytics"]),e("div",$t,[t[20]||(t[20]=e("div",{class:"px-6 py-4 border-b border-gray-200/70"},[e("h2",{class:"text-lg font-bold text-gray-900"}," Upcoming Deadlines ")],-1)),e("div",Ct,[e("div",jt,[(l(!0),n(y,null,p(s.upcoming_deadlines.courses,o=>(l(),n("div",{key:o.id,class:k(["flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:border-emerald-300 transition-colors",{"border-red-200 bg-red-50":o.is_urgent}])},[e("div",null,[e("p",St,r(o.title),1),e("p",zt," Due "+r(o.deadline)+" • "+r(o.days_remaining)+" days left ",1)]),a(C,{progress:o.progress_percentage,size:"sm"},null,8,["progress"])],2))),128)),(l(!0),n(y,null,p(s.upcoming_deadlines.quizzes,o=>(l(),n("div",{key:o.id,class:k(["flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:border-emerald-300 transition-colors",{"border-red-200 bg-red-50":o.is_overdue}])},[e("div",null,[e("p",At,r(o.quiz_title),1),e("p",Dt,r(o.course_title)+" • Due "+r(o.due_at),1)]),a(c(f),{href:i.route("student.quizzes.start",o.id),class:"text-xs text-emerald-600 hover:text-emerald-800 font-semibold"},{default:v(()=>[...t[18]||(t[18]=[g(" Take Quiz ",-1)])]),_:1},8,["href"])],2))),128)),s.upcoming_deadlines.courses.length===0&&s.upcoming_deadlines.quizzes.length===0?(l(),n("div",Tt,[...t[19]||(t[19]=[e("p",{class:"text-sm text-gray-500"}," No upcoming deadlines ",-1)])])):b("",!0)])])])])])])])])]),_:1}))}};export{Gt as default};
