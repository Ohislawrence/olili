import{g as _,d as k,c as M,w as S,a as e,b as i,i as l,q as N,f as n,h as f,o,t as a,y as $,j as v,n as h,F as C,k as F,z as w}from"./app-DdL3oBcW.js";import{S as q}from"./StudentLayout-Cf1O1lLg.js";import{r as x}from"./CheckIcon-BJMJUPjE.js";import{r as E}from"./ArrowPathIcon-crdB8Eni.js";import"./XMarkIcon-mSRpeXsv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserIcon-DhcC205o.js";import"./PlusIcon-DZaatXLl.js";import"./BellIcon-CsQ8GXXV.js";import"./CreditCardIcon-DENJ65nM.js";const L={class:"min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 py-12"},V={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},G={key:0,class:"bg-white rounded-xl shadow-sm border border-emerald-200 p-6 mb-12 max-w-4xl mx-auto"},Y={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},O={class:"font-bold text-emerald-700 text-lg"},H={class:"font-bold text-emerald-700 text-lg capitalize"},R={class:"font-bold text-emerald-700 text-lg"},T={class:"mt-4 pt-4 border-t border-gray-200 flex flex-wrap gap-4"},J={class:"flex justify-center mb-12"},K={class:"bg-white rounded-xl p-1 shadow-sm border border-gray-200"},Q={class:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto"},W={key:0,class:"bg-gradient-to-r from-emerald-500 to-teal-600 text-white text-sm font-bold py-2.5 px-4 rounded-t-2xl text-center"},X={class:"p-8"},Z={class:"text-center mb-6"},ee={class:"text-2xl font-bold text-gray-900 mb-2"},te={class:"text-gray-600 mb-4"},re={class:"mb-4"},se={class:"text-4xl font-bold text-gray-900"},oe={class:"text-gray-600"},ne={class:"space-y-3 mb-8"},ae={class:"text-gray-700"},ie={class:"flex items-center"},le={class:"text-gray-700"},ue={class:"flex items-center"},ce={class:"text-gray-700"},de={key:0,class:"flex items-center"},me={key:1,class:"flex items-center"},pe=["onClick","disabled"],xe={key:0},ge={key:1},fe={key:0,class:"text-center mt-4"},ye={class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-emerald-100 text-emerald-800"},Ae={__name:"Pricing",props:{plans:Array,current_subscription:Object,paystack_public_key:String},setup(y){const u=y,c=_("monthly"),d=_(!1),m=_(null),b=k(()=>u.current_subscription!==null&&u.current_subscription!==void 0),P=k(()=>b.value?u.current_subscription.plan&&u.current_subscription.plan.name?u.current_subscription.plan:u.plans.find(t=>t.id===u.current_subscription.subscription_plan_id):null),A=t=>{const r=c.value==="yearly"?t.yearly_price||t.price*12*.9:t.monthly_price||t.price;return`${t.currency} ${r.toLocaleString()}`},g=t=>b.value?u.current_subscription.subscription_plan_id===t.id:!1,I=t=>g(t)?"bg-gray-400 cursor-not-allowed":(t.is_popular,"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 focus:ring-emerald-500 shadow-md hover:shadow-lg"),z=t=>{if(g(t))return"Current Plan";if(t.price===0)return"Get Started Free";const r=P.value?.price||0;return r&&t.price>r?"Upgrade Now":r&&t.price<r?"Downgrade":c.value==="yearly"?"Get Started - Yearly":"Get Started - Monthly"},B=t=>t.recommended_features&&t.recommended_features.length>0?t.recommended_features:{free:["Basic AI chat access","Limited course access","Community support"],basic:["Enhanced AI assistance","More course access","Progress tracking"],pro:["Unlimited AI learning","Full course library","Advanced explanations"],premium:["Everything in Pro","Personalized study plans","Priority support"],starter:["Create courses","Manage students","Basic analytics"],growth:["Unlimited students","AI grading","Custom portal"],enterprise:["SSO security","API access","Dedicated support"]}[t.tier]||["Feature 1","Feature 2","Feature 3"],U=async t=>{if(!g(t)){d.value=!0,m.value=t.id;try{if(console.log("Processing plan:",t.id,t.name,"Price:",t.price),t.price===0){console.log("Handling free plan");const r=await w.post(route("subscription.change"),{plan_id:t.id},{onFinish:()=>{d.value=!1,m.value=null},onError:s=>{console.error("Free plan subscription error:",s),d.value=!1,m.value=null,alert("Failed to subscribe to free plan. Please try again.")},onSuccess:()=>{console.log("Free plan subscription successful")}})}else{console.log("Initializing subscription payment for paid plan");const r={billing_cycle:c.value,plan_tier:t.tier,is_popular:t.is_popular,change_type:b.value?"change":"new"},s=await w.post(route("payment.subscription.initialize"),{plan_id:t.id,metadata:r},{onFinish:()=>{console.log("Subscription payment request finished"),d.value=!1,m.value=null},onError:p=>{console.error("Subscription payment initialization error:",p),d.value=!1,m.value=null,alert("Failed to initialize payment. Please try again.")},onSuccess:p=>{console.log("Subscription payment initialized successfully")}})}}catch(r){console.error("Subscription error:",r),d.value=!1,m.value=null,alert("An error occurred. Please try again.")}}},j=()=>{confirm("Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period.")&&w.post(route("subscription.cancel"))},D=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";return(t,r)=>(o(),M(q,null,{default:S(()=>[e("div",L,[i(l(N),{title:"Subscription Plans"}),e("div",V,[b.value?(o(),n("div",G,[r[6]||(r[6]=e("div",{class:"flex items-center justify-between mb-4"},[e("h3",{class:"text-xl font-bold text-gray-900"}," Current Subscription "),e("span",{class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-emerald-100 text-emerald-800"}," Active ")],-1)),e("div",Y,[e("div",null,[r[2]||(r[2]=e("p",{class:"text-sm font-medium text-gray-600"},"Plan",-1)),e("p",O,a(P.value?.name||"Unknown Plan"),1)]),e("div",null,[r[3]||(r[3]=e("p",{class:"text-sm font-medium text-gray-600"},"Status",-1)),e("p",H,a(y.current_subscription.status),1)]),e("div",null,[r[4]||(r[4]=e("p",{class:"text-sm font-medium text-gray-600"},"Renews On",-1)),e("p",R,a(D(y.current_subscription.ends_at)),1)])]),e("div",T,[i(l($),{href:t.route("payment.history"),class:"text-emerald-600 hover:text-emerald-700 font-semibold"},{default:S(()=>[...r[5]||(r[5]=[v(" View Payment History ",-1)])]),_:1},8,["href"]),e("button",{onClick:j,class:"text-red-600 hover:text-red-700 font-semibold"}," Cancel Subscription ")])])):f("",!0),r[11]||(r[11]=e("div",{class:"text-center mb-12"},[e("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," Choose Your Plan "),e("p",{class:"text-xl text-gray-600 max-w-2xl mx-auto"}," Select the perfect plan for your learning journey. All plans include access to our AI tutor and course materials. ")],-1)),e("div",J,[e("div",K,[e("button",{onClick:r[0]||(r[0]=s=>c.value="monthly"),class:h(["px-6 py-2.5 rounded-lg text-sm font-semibold transition-all duration-200",c.value==="monthly"?"bg-gradient-to-r from-emerald-600 to-teal-600 text-white shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"])}," Monthly ",2),e("button",{onClick:r[1]||(r[1]=s=>c.value="yearly"),class:h(["px-6 py-2.5 rounded-lg text-sm font-semibold transition-all duration-200",c.value==="yearly"?"bg-gradient-to-r from-emerald-600 to-teal-600 text-white shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"])},[...r[7]||(r[7]=[v(" Yearly ",-1),e("span",{class:"ml-1 text-xs bg-emerald-100 text-emerald-800 px-2.5 py-1 rounded-full font-medium"}," Save 10% ",-1)])],2)])]),e("div",Q,[(o(!0),n(C,null,F(y.plans,s=>(o(),n("div",{key:s.id,class:h(["bg-white rounded-2xl shadow-sm border border-gray-100 transition-all duration-300 hover:shadow-lg",{"border-emerald-500 transform scale-105 shadow-lg":s.is_popular,"border-gray-200":!s.is_popular}])},[s.is_popular?(o(),n("div",W," Most Popular ")):f("",!0),e("div",X,[e("div",Z,[e("h3",ee,a(s.name),1),e("p",te,a(s.description),1),e("div",re,[e("span",se,a(A(s)),1),e("span",oe," /"+a(c.value==="yearly"?"year":"month"),1)])]),e("ul",ne,[(o(!0),n(C,null,F(B(s),p=>(o(),n("li",{key:p,class:"flex items-center"},[i(l(x),{class:"h-5 w-5 text-emerald-500 mr-3 flex-shrink-0"}),e("span",ae,a(p),1)]))),128)),e("li",ie,[i(l(x),{class:"h-5 w-5 text-emerald-500 mr-3 flex-shrink-0"}),e("span",le,a(s.max_courses===-1?"Unlimited":s.max_courses)+" Courses ",1)]),e("li",ue,[i(l(x),{class:"h-5 w-5 text-emerald-500 mr-3 flex-shrink-0"}),e("span",ce,a(s.max_ai_requests_per_month===-1?"Unlimited":s.max_ai_requests_per_month)+" AI Requests/Month ",1)]),s.ai_grading?(o(),n("li",de,[i(l(x),{class:"h-5 w-5 text-emerald-500 mr-3 flex-shrink-0"}),r[8]||(r[8]=e("span",{class:"text-gray-700"},"AI Project Grading",-1))])):f("",!0),s.priority_support?(o(),n("li",me,[i(l(x),{class:"h-5 w-5 text-emerald-500 mr-3 flex-shrink-0"}),r[9]||(r[9]=e("span",{class:"text-gray-700"},"Priority Support",-1))])):f("",!0)]),e("button",{onClick:p=>U(s),disabled:g(s)||d.value,class:h(["w-full py-3.5 px-6 rounded-xl font-semibold text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 shadow-sm hover:shadow-md",I(s)])},[d.value&&m.value===s.id?(o(),n("span",xe,[i(l(E),{class:"h-5 w-5 animate-spin mx-auto"})])):(o(),n("span",ge,a(z(s)),1))],10,pe),g(s)?(o(),n("div",fe,[e("span",ye,[i(l(x),{class:"h-4 w-4 mr-1"}),r[10]||(r[10]=v(" Current Plan ",-1))])])):f("",!0)])],2))),128))])])])]),_:1}))}};export{Ae as default};
