import{c as g,w as u,b as o,a as t,i as m,q as f,t as r,y as _,j as h,f as l,o as n,F as v,k as w,h as b,n as k}from"./app-RWparKzM.js";import{A as S}from"./AdminLayout--edVSMXj.js";import{_ as c}from"./StatsCard-B4SWx6TF.js";import{_ as $}from"./Pagination-DkGmimez.js";import"./XMarkIcon-Bxj87fHb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserIcon-CDktt_x5.js";import"./UsersIcon-BuHtuOpY.js";import"./ChatBubbleLeftRightIcon-BHCYXGLN.js";import"./ChartBarIcon-DO2uM4cm.js";import"./CurrencyDollarIcon-M8nWOnAT.js";import"./EyeIcon-C6EZTv3J.js";import"./CheckCircleIcon-CCNNkvGD.js";import"./TrophyIcon-FgbwWbnE.js";import"./SparklesIcon-CjP9Zpjb.js";import"./CreditCardIcon-BhX1AOX7.js";import"./ExclamationTriangleIcon-CrF7EtGW.js";import"./UserGroupIcon-ClFqX15M.js";import"./AcademicCapIcon-DdsJRYF-.js";const L={class:"py-6"},D={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},H={class:"mb-8"},j={class:"flex justify-between items-center"},A={class:"text-3xl font-bold text-gray-900"},B={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},T={class:"bg-white shadow rounded-lg overflow-hidden"},U={class:"overflow-x-auto"},C={class:"min-w-full divide-y divide-gray-200"},N={class:"bg-white divide-y divide-gray-200"},V={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},F={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},O={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},z={class:"flex items-center"},M={class:"capitalize"},R={class:"px-6 py-4 whitespace-nowrap"},E={key:0,class:"text-xs text-gray-500 mt-1"},I={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},P={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},ut={__name:"LoginHistory",props:{user:Object,loginHistory:Object,loginStats:Object},setup(i){const p=s=>new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),x=s=>s.city&&s.country?`${s.city}, ${s.country}`:s.country||"Unknown",y=s=>{if(!s.session_duration_seconds)return"Active";const a=Math.floor(s.session_duration_seconds/3600),e=Math.floor(s.session_duration_seconds%3600/60),d=s.session_duration_seconds%60;return a>0?`${a}h ${e}m ${d}s`:e>0?`${e}m ${d}s`:`${d}s`};return(s,a)=>(n(),g(S,null,{default:u(()=>[o(m(f),{title:"User Login History"}),t("div",L,[t("div",D,[t("div",H,[t("div",j,[t("div",null,[t("h1",A," Login History - "+r(i.user.name),1),a[0]||(a[0]=t("p",{class:"mt-2 text-gray-600"}," Track user login activity and security events ",-1))]),o(m(_),{href:s.route("admin.users.show",i.user.id),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},{default:u(()=>[...a[1]||(a[1]=[h(" Back to User ",-1)])]),_:1},8,["href"])])]),t("div",B,[o(c,{title:"Total Logins",value:i.loginStats.total_logins_30d,icon:"users",color:"blue"},null,8,["value"]),o(c,{title:"Success Rate",value:`${i.loginStats.success_rate_30d}%`,icon:"academic-cap",color:"green"},null,8,["value"]),o(c,{title:"Unique Devices",value:i.loginStats.unique_devices,icon:"chart-bar",color:"purple"},null,8,["value"]),o(c,{title:"Consecutive Days",value:i.loginStats.consecutive_days,icon:"exclamation",color:"orange"},null,8,["value"])]),t("div",T,[a[4]||(a[4]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-semibold text-gray-900"}," Recent Login Activity ")],-1)),t("div",U,[t("table",C,[a[3]||(a[3]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date & Time "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," IP Address "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Location "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Device "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Session Duration ")])],-1)),t("tbody",N,[(n(!0),l(v,null,w(i.loginHistory.data,e=>(n(),l("tr",{key:e.id,class:"hover:bg-gray-50"},[t("td",V,r(p(e.login_at)),1),t("td",q,r(e.ip_address),1),t("td",F,r(x(e)),1),t("td",O,[t("div",z,[t("span",M,r(e.device_type),1),a[2]||(a[2]=t("span",{class:"mx-1"},"â€¢",-1)),t("span",null,r(e.browser),1)])]),t("td",R,[t("span",{class:k(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",e.was_successful?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},r(e.was_successful?"Success":"Failed"),3),e.failure_reason?(n(),l("div",E,r(e.failure_reason),1)):b("",!0)]),t("td",I,r(y(e)),1)]))),128))])])]),t("div",P,[o($,{links:i.loginHistory.links},null,8,["links"])])])])])]),_:1}))}};export{ut as default};
