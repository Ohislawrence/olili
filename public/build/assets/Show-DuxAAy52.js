import{f as i,a as e,o as a,g,O as Y,d as S,m as ee,z as p,b as n,w as m,i as d,q as te,y as x,j as h,h as f,t as l,n as F,A as V,e as P,x as j,F as k,k as T}from"./app-CX95e7zf.js";import{A as se}from"./GuestLayout-BujYQJ5c.js";import{_ as oe}from"./MetaTags-Cd5L0N4u.js";import{k as le}from"./marked.esm-BGv_dqOO.js";import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as ne}from"./ArrowLeftIcon-CH1cOS_g.js";import{r as ie}from"./PencilSquareIcon-CrmeKM9f.js";import{r as B}from"./TrashIcon-DedxLp49.js";import{r as ae}from"./AcademicCapIcon-DXMUc2LV.js";import{r as de}from"./HeartIcon-b8LL9Eaz.js";import{r as R}from"./ChatBubbleLeftRightIcon-MlHUP_Rx.js";import{r as ue}from"./EyeIcon-SaxAv3w1.js";function ce(s,c){return a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"})])}const me={class:"min-h-screen bg-gradient-to-br from-slate-50 to-emerald-50 py-12"},xe={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},pe={class:"mb-8"},fe={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},he={class:"lg:col-span-2 space-y-8"},ge={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},ve={class:"p-8 border-b border-gray-100"},ye={class:"flex items-start justify-between mb-4"},be={class:"flex items-center space-x-3"},we=["src","alt"],ke={class:"flex items-center space-x-2"},_e={class:"text-sm text-gray-500"},Ce={class:"flex items-center space-x-2"},$e={key:0,class:"text-emerald-600 text-sm"},Le={key:0},Fe={class:"text-3xl font-bold text-gray-900 mb-6"},Pe=["innerHTML"],je={class:"flex justify-end space-x-4"},Te=["disabled"],Se={key:2,class:"mb-6"},Ve={class:"flex flex-wrap gap-2"},Be=["onClick"],Ae={key:3,class:"mb-6"},Ue={class:"inline-flex items-center px-4 py-2 bg-emerald-50 border border-emerald-100 rounded-xl"},Me={class:"flex items-center justify-between pt-6 border-t border-gray-100"},Re={class:"flex items-center space-x-6"},Ie={class:"font-medium"},Ne={class:"font-medium"},qe={class:"flex items-center space-x-2 text-sm text-gray-500"},ze={id:"comments",class:"p-8"},De={class:"text-xl font-bold text-gray-900 mb-6"},Oe={class:"mb-8"},Ee={class:"flex space-x-4"},He={class:"flex-shrink-0"},Ze=["src","alt"],We={class:"flex-1"},Ge={class:"flex justify-end mt-2"},Je=["disabled"],Ke={key:0,class:"text-center py-8 text-gray-500"},Qe={key:1,class:"space-y-6"},Xe={class:"flex space-x-4"},Ye={class:"flex-shrink-0"},et=["src","alt"],tt={class:"flex-1"},st={class:"bg-gray-50 rounded-2xl p-4"},ot={class:"flex justify-between items-start mb-2"},lt={class:"text-sm text-gray-500 ml-2"},rt=["onClick"],nt={class:"text-gray-700 whitespace-pre-wrap"},it={class:"flex items-center space-x-4 mt-3"},at=["onClick"],dt=["onClick"],ut={key:0,class:"mt-4 ml-8"},ct={class:"flex space-x-4"},mt={class:"flex-shrink-0"},xt=["src","alt"],pt={class:"flex-1"},ft={class:"flex justify-end space-x-2 mt-2"},ht=["disabled"],gt={key:1,class:"mt-4 ml-8 space-y-3"},vt={class:"flex-shrink-0"},yt=["src","alt"],bt={class:"flex-1"},wt={class:"bg-gray-50 rounded-2xl p-3"},kt={class:"flex justify-between items-start mb-1"},_t={class:"text-xs text-gray-500 ml-2"},Ct=["onClick"],$t={class:"text-sm text-gray-700 whitespace-pre-wrap"},Lt={class:"lg:col-span-1 space-y-6"},Ft={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},Pt={class:"flex items-center space-x-3 mb-4"},jt=["src","alt"],Tt={class:"text-sm text-gray-500"},St={class:"grid grid-cols-3 gap-4 text-center mb-4"},Vt={class:"text-xl font-bold text-emerald-700"},Bt={class:"text-xl font-bold text-emerald-700"},At={class:"text-xl font-bold text-emerald-700"},Ut={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},Mt={class:"space-y-4"},Rt={class:"font-medium text-gray-900 group-hover:text-emerald-700 mb-1 line-clamp-2"},It={class:"flex items-center text-sm text-gray-500"},Nt={key:0,class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},qt={class:"space-y-3"},zt={class:"text-sm font-medium text-gray-900"},Dt={class:"text-xs text-gray-500"},Ot={class:"flex items-center justify-between text-sm"},Et={class:"font-medium text-emerald-700"},Ht={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},Zt={class:"flex space-x-3"},Wt={__name:"Show",props:{post:Object,relatedPosts:Array,isLiked:Boolean,isFollowing:Boolean},setup(s){const c=s,_=g(!1),C=g(!1),$=g(!1),L=g(!1),y=g(null),v=g(""),b=g(""),I={discussion:"bg-blue-100 text-blue-800",question:"bg-purple-100 text-purple-800",achievement:"bg-emerald-100 text-emerald-800",resource:"bg-amber-100 text-amber-800"},w=Y({title:c.post.title,content:c.post.content}),N=S(()=>le(c.post.content)),q=S(()=>c.post.user.id===$page.props.auth.user.id||$page.props.auth.user.is_admin),z=S(()=>c.post.user.id===$page.props.auth.user.id||$page.props.auth.user.is_admin);function A(r){return r.user.id===$page.props.auth.user.id||c.post.user.id===$page.props.auth.user.id||$page.props.auth.user.is_admin}function D(){c.isLiked?p.delete(route("community.posts.unlike",c.post.id)):p.post(route("community.posts.like",c.post.id))}function O(){c.isFollowing?p.delete(route("community.profile.unfollow",c.post.user.id)):p.post(route("community.profile.follow",c.post.user.id))}function E(){C.value=!0,p.put(route("community.posts.update",c.post.id),w,{onFinish:()=>{C.value=!1,_.value=!1}})}function H(){confirm("Are you sure you want to delete this post?")&&p.delete(route("community.posts.destroy",c.post.id))}function Z(){$.value=!0,p.post(route("community.posts.comments.store",c.post.id),{content:b.value},{onFinish:()=>{$.value=!1,b.value=""}})}function W(r){y.value=r.id,v.value=""}function G(){L.value=!0,p.post(route("community.posts.comments.store",c.post.id),{content:v.value,parent_id:y.value},{onFinish:()=>{L.value=!1,y.value=null,v.value=""}})}function U(r){confirm("Are you sure you want to delete this comment?")&&p.delete(route("community.comments.destroy",r.id))}function Gt(r){}function J(){document.getElementById("comments").scrollIntoView({behavior:"smooth"})}function K(){navigator.share&&navigator.share({title:c.post.title,text:c.post.excerpt,url:window.location.href})}function M(r){const t=window.location.href,o=encodeURIComponent(c.post.title);let u;switch(r){case"facebook":u=`https://www.facebook.com/sharer/sharer.php?u=${t}`;break;case"twitter":u=`https://twitter.com/intent/tweet?text=${o}&url=${t}`;break}window.open(u,"_blank","width=600,height=400")}function Q(){navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")}function X(r){p.get(route("community.index"),{search:r})}return ee(()=>{p.reload({only:["post"]})}),(r,t)=>(a(),i(k,null,[n(oe,{title:s.post.title+" - Olilearn Community",description:s.post.excerpt,image:"/images/community.png"},null,8,["title","description"]),n(se,null,{default:m(()=>[n(d(te),{title:s.post.title},null,8,["title"]),e("div",me,[e("div",xe,[e("div",pe,[n(d(x),{href:r.route("community.index"),class:"inline-flex items-center text-emerald-600 hover:text-emerald-700 font-medium"},{default:m(()=>[n(d(ne),{class:"h-4 w-4 mr-2"}),t[9]||(t[9]=h(" Back to Community ",-1))]),_:1},8,["href"])]),e("div",fe,[e("div",he,[e("div",ge,[e("div",ve,[e("div",ye,[e("div",be,[n(d(x),{href:r.route("community.profile.show",s.post.user.id)},{default:m(()=>[e("img",{src:s.post.user.profile_photo_url,alt:s.post.user.name,class:"w-12 h-12 rounded-full"},null,8,we)]),_:1},8,["href"]),e("div",null,[e("div",ke,[n(d(x),{href:r.route("community.profile.show",s.post.user.id),class:"font-bold text-gray-900 hover:text-emerald-700"},{default:m(()=>[h(l(s.post.user.name),1)]),_:1},8,["href"]),e("span",{class:F(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",I[s.post.type]])},l(s.post.type),3)]),e("p",_e,l(s.post.time_ago),1)])]),e("div",Ce,[s.post.is_pinned?(a(),i("span",$e," ðŸ“Œ Pinned ")):f("",!0),q.value?(a(),i("button",{key:1,onClick:t[0]||(t[0]=o=>_.value=!0),class:"text-gray-400 hover:text-emerald-600 p-2"},[n(d(ie),{class:"h-5 w-5"})])):f("",!0),z.value?(a(),i("button",{key:2,onClick:H,class:"text-gray-400 hover:text-red-600 p-2"},[n(d(B),{class:"h-5 w-5"})])):f("",!0)])]),_.value?(a(),i("form",{key:1,onSubmit:V(E,["prevent"]),class:"space-y-6"},[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-900 mb-2"}," Title ",-1)),P(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>w.title=o),type:"text",required:"",class:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[j,w.title]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-900 mb-2"}," Content ",-1)),P(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>w.content=o),rows:"8",required:"",class:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[j,w.content]])]),e("div",je,[e("button",{type:"button",onClick:t[3]||(t[3]=o=>_.value=!1),class:"px-4 py-2 text-gray-700 hover:text-gray-900"}," Cancel "),e("button",{type:"submit",disabled:C.value,class:"px-4 py-2 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 disabled:opacity-50"},l(C.value?"Saving...":"Save Changes"),9,Te)])],32)):(a(),i("div",Le,[e("h1",Fe,l(s.post.title),1),e("div",{class:"prose prose-lg max-w-none mb-6",innerHTML:N.value},null,8,Pe)])),s.post.tags&&s.post.tags.length>0?(a(),i("div",Se,[e("div",Ve,[(a(!0),i(k,null,T(s.post.tags,o=>(a(),i("span",{key:o,class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 hover:bg-gray-200 cursor-pointer",onClick:u=>X(o)},l(o),9,Be))),128))])])):f("",!0),s.post.course?(a(),i("div",Ae,[e("div",Ue,[n(d(ae),{class:"h-5 w-5 text-emerald-600 mr-2"}),t[12]||(t[12]=e("span",{class:"text-sm text-gray-700"},"Related to course:",-1)),n(d(x),{href:r.route("courses.show",s.post.course.id),class:"ml-2 text-sm font-medium text-emerald-700 hover:text-emerald-800"},{default:m(()=>[h(l(s.post.course.title),1)]),_:1},8,["href"])])])):f("",!0),e("div",Me,[e("div",Re,[e("button",{onClick:D,class:F(["flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300",s.isLiked?"bg-red-50 text-red-600 border border-red-100":"text-gray-600 hover:text-emerald-600 hover:bg-emerald-50"])},[n(d(de),{class:F(["h-5 w-5",s.isLiked?"fill-current":""])},null,8,["class"]),e("span",Ie,l(s.post.like_count),1),e("span",null,l(s.isLiked?"Liked":"Like"),1)],2),e("button",{onClick:J,class:"flex items-center space-x-2 px-4 py-2 rounded-xl text-gray-600 hover:text-emerald-600 hover:bg-emerald-50 transition-all duration-300"},[n(d(R),{class:"h-5 w-5"}),e("span",Ne,l(s.post.comment_count),1),t[13]||(t[13]=e("span",null,"Comments",-1))]),e("button",{onClick:K,class:"flex items-center space-x-2 px-4 py-2 rounded-xl text-gray-600 hover:text-emerald-600 hover:bg-emerald-50 transition-all duration-300"},[n(d(ce),{class:"h-5 w-5"}),t[14]||(t[14]=e("span",null,"Share",-1))])]),e("div",qe,[n(d(ue),{class:"h-4 w-4"}),e("span",null,l(s.post.views)+" views",1)])])]),e("div",ze,[e("h2",De,"Comments ("+l(s.post.comment_count)+")",1),e("div",Oe,[e("form",{onSubmit:V(Z,["prevent"])},[e("div",Ee,[e("div",He,[e("img",{src:r.$page.props.auth.user.profile_photo_url,alt:r.$page.props.auth.user.name,class:"w-10 h-10 rounded-full"},null,8,Ze)]),e("div",We,[P(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=o=>b.value=o),rows:"3",placeholder:"Share your thoughts...",class:"w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none"},null,512),[[j,b.value]]),e("div",Ge,[e("button",{type:"submit",disabled:!b.value.trim()||$.value,class:"px-4 py-2 bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 disabled:opacity-50"},l($.value?"Posting...":"Post Comment"),9,Je)])])])],32)]),s.post.comments.length===0?(a(),i("div",Ke,[n(d(R),{class:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t[15]||(t[15]=e("p",null,"No comments yet. Be the first to share your thoughts!",-1))])):(a(),i("div",Qe,[(a(!0),i(k,null,T(s.post.comments,o=>(a(),i("div",{key:o.id,class:"space-y-4"},[e("div",Xe,[e("div",Ye,[n(d(x),{href:r.route("community.profile.show",o.user.id)},{default:m(()=>[e("img",{src:o.user.profile_photo_url,alt:o.user.name,class:"w-10 h-10 rounded-full"},null,8,et)]),_:2},1032,["href"])]),e("div",tt,[e("div",st,[e("div",ot,[e("div",null,[n(d(x),{href:r.route("community.profile.show",o.user.id),class:"font-medium text-gray-900 hover:text-emerald-700"},{default:m(()=>[h(l(o.user.name),1)]),_:2},1032,["href"]),e("span",lt,l(o.time_ago),1)]),A(o)?(a(),i("button",{key:0,onClick:u=>U(o),class:"text-gray-400 hover:text-red-600"},[n(d(B),{class:"h-4 w-4"})],8,rt)):f("",!0)]),e("p",nt,l(o.content),1),e("div",it,[e("button",{onClick:u=>W(o),class:"text-sm text-gray-500 hover:text-emerald-600"}," Reply ",8,at),e("button",{onClick:u=>void 0,class:"text-sm text-gray-500 hover:text-emerald-600"},l(o.is_liked?"Unlike":"Like")+" ("+l(o.like_count)+") ",9,dt)])]),y.value===o.id?(a(),i("div",ut,[e("form",{onSubmit:V(G,["prevent"])},[e("div",ct,[e("div",mt,[e("img",{src:r.$page.props.auth.user.profile_photo_url,alt:r.$page.props.auth.user.name,class:"w-8 h-8 rounded-full"},null,8,xt)]),e("div",pt,[P(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=u=>v.value=u),rows:"2",placeholder:"Write a reply...",class:"w-full px-3 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 resize-none"},null,512),[[j,v.value]]),e("div",ft,[e("button",{type:"button",onClick:t[6]||(t[6]=u=>y.value=null),class:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800"}," Cancel "),e("button",{type:"submit",disabled:!v.value.trim()||L.value,class:"px-3 py-1 text-sm bg-emerald-600 text-white rounded-xl hover:bg-emerald-700 disabled:opacity-50"},l(L.value?"Posting...":"Reply"),9,ht)])])])],32)])):f("",!0),o.replies&&o.replies.length>0?(a(),i("div",gt,[(a(!0),i(k,null,T(o.replies,u=>(a(),i("div",{key:u.id,class:"flex space-x-3"},[e("div",vt,[n(d(x),{href:r.route("community.profile.show",u.user.id)},{default:m(()=>[e("img",{src:u.user.profile_photo_url,alt:u.user.name,class:"w-8 h-8 rounded-full"},null,8,yt)]),_:2},1032,["href"])]),e("div",bt,[e("div",wt,[e("div",kt,[e("div",null,[n(d(x),{href:r.route("community.profile.show",u.user.id),class:"text-sm font-medium text-gray-900 hover:text-emerald-700"},{default:m(()=>[h(l(u.user.name),1)]),_:2},1032,["href"]),e("span",_t,l(u.time_ago),1)]),A(u)?(a(),i("button",{key:0,onClick:Jt=>U(u),class:"text-gray-400 hover:text-red-600"},[n(d(B),{class:"h-3 w-3"})],8,Ct)):f("",!0)]),e("p",$t,l(u.content),1)])])]))),128))])):f("",!0)])])]))),128))]))])])]),e("div",Lt,[e("div",Ft,[t[19]||(t[19]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"About Author",-1)),e("div",Pt,[e("img",{src:s.post.user.profile_photo_url,alt:s.post.user.name,class:"w-16 h-16 rounded-full"},null,8,jt),e("div",null,[n(d(x),{href:r.route("community.profile.show",s.post.user.id),class:"font-bold text-gray-900 hover:text-emerald-700"},{default:m(()=>[h(l(s.post.user.name),1)]),_:1},8,["href"]),e("p",Tt,l(s.post.user.roles?.[0]?.name||"Learner"),1)])]),e("div",St,[e("div",null,[e("div",Vt,l(s.post.user.post_count||0),1),t[16]||(t[16]=e("div",{class:"text-xs text-gray-500"},"Posts",-1))]),e("div",null,[e("div",Bt,l(s.post.user.follower_count||0),1),t[17]||(t[17]=e("div",{class:"text-xs text-gray-500"},"Followers",-1))]),e("div",null,[e("div",At,l(s.post.user.following_count||0),1),t[18]||(t[18]=e("div",{class:"text-xs text-gray-500"},"Following",-1))])]),r.$page.props.auth.user.id!==s.post.user.id?(a(),i("button",{key:0,onClick:O,class:F(["w-full px-4 py-2 rounded-xl font-medium transition-all duration-300",s.isFollowing?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-emerald-600 text-white hover:bg-emerald-700"])},l(s.isFollowing?"Following":"Follow"),3)):f("",!0)]),e("div",Ut,[t[22]||(t[22]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Related Posts",-1)),e("div",Mt,[(a(!0),i(k,null,T(s.relatedPosts,o=>(a(),i("div",{key:o.id,class:"group cursor-pointer"},[n(d(x),{href:r.route("community.posts.show",o.id),class:"block"},{default:m(()=>[e("h4",Rt,l(o.title),1),e("div",It,[e("span",null,l(o.user.name),1),t[20]||(t[20]=e("span",{class:"mx-2"},"â€¢",-1)),e("span",null,l(o.time_ago),1)])]),_:2},1032,["href"])]))),128))]),n(d(x),{href:r.route("community.index"),class:"block text-center mt-4 text-emerald-600 hover:text-emerald-700 font-medium text-sm"},{default:m(()=>[...t[21]||(t[21]=[h(" View all posts â†’ ",-1)])]),_:1},8,["href"])]),s.post.course?(a(),i("div",Nt,[t[25]||(t[25]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Course Info",-1)),e("div",qt,[e("div",null,[e("div",zt,l(s.post.course.title),1),e("div",Dt,l(s.post.course.subject)+" â€¢ "+l(s.post.course.level),1)]),e("div",Ot,[t[23]||(t[23]=e("span",{class:"text-gray-600"},"Progress",-1)),e("span",Et,l(s.post.course.progress_percentage)+"%",1)]),n(d(x),{href:r.route("courses.show",s.post.course.id),class:"block w-full text-center px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl font-medium hover:bg-emerald-100"},{default:m(()=>[...t[24]||(t[24]=[h(" View Course ",-1)])]),_:1},8,["href"])])])):f("",!0),e("div",Ht,[t[26]||(t[26]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Share this post",-1)),e("div",Zt,[e("button",{onClick:t[7]||(t[7]=o=>M("facebook")),class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 font-medium"}," Facebook "),e("button",{onClick:t[8]||(t[8]=o=>M("twitter")),class:"flex-1 px-4 py-2 bg-blue-400 text-white rounded-xl hover:bg-blue-500 font-medium"}," Twitter "),e("button",{onClick:Q,class:"flex-1 px-4 py-2 bg-gray-600 text-white rounded-xl hover:bg-gray-700 font-medium"}," Copy Link ")])])])])])])]),_:1})],64))}},as=re(Wt,[["__scopeId","data-v-e9bb134e"]]);export{as as default};
