import{f as g,a as e,F as k,j as $,t as i,n as _,b as a,w as u,i as p,h as n,x as f,g as A,y,o as c,r as C,m as S,c as T,p as U,e as v,s as D,q as w}from"./app-9iTwA3vC.js";import{_ as M}from"./Pagination-B-vs5vzK.js";import{A as V}from"./AdminLayout-BNATRJWW.js";import{r as L}from"./PlusIcon-B5yWEhlc.js";import"./DropdownLink-BJxGAADP.js";import"./NavLink-CVNpfdyq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./XMarkIcon-DR50bQrw.js";import"./UsersIcon-Dq-ijHz8.js";import"./ChatBubbleLeftRightIcon-B5E4Bl1m.js";import"./ChartBarIcon-DGOEscCD.js";import"./CurrencyDollarIcon-BD-2biuk.js";import"./EyeIcon-DsHcOT47.js";const j={class:"min-w-full divide-y divide-gray-200"},N={class:"bg-white divide-y divide-gray-200"},B={class:"px-6 py-4 whitespace-nowrap"},I={class:"flex items-center"},z={class:"flex-shrink-0 h-10 w-10"},E=["src","alt"],F={class:"ml-4"},O={class:"text-sm font-medium text-gray-900"},R={class:"text-sm text-gray-500"},q={class:"px-6 py-4 whitespace-nowrap"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},G={class:"px-6 py-4 whitespace-nowrap"},H={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},J={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},K={class:"flex justify-end space-x-2"},P=["onClick"],Q=["onClick"],W={__name:"UserTable",props:{users:Array},setup(m){const r={admin:"bg-purple-100 text-purple-800",tutor:"bg-blue-100 text-blue-800",student:"bg-green-100 text-green-800"},x=o=>{if(!o)return"Never";const s=new Date,t=new Date(o),b=Math.abs(s-t),d=Math.ceil(b/(1e3*60*60*24));return d===1?"Today":d===2?"Yesterday":d<=7?`${d-1} days ago`:d<=30?`${Math.floor(d/7)} weeks ago`:t.toLocaleDateString()},h=o=>{y.post(route("admin.users.toggle-status",o.id))},l=o=>{confirm(`Are you sure you want to delete ${o.name}? This action cannot be undone.`)&&y.delete(route("admin.users.destroy",o.id))};return(o,s)=>(c(),g("table",j,[s[2]||(s[2]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Role "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Courses "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Last Login "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",N,[(c(!0),g(k,null,$(m.users,t=>(c(),g("tr",{key:t.id,class:"hover:bg-gray-50"},[e("td",B,[e("div",I,[e("div",z,[e("img",{class:"h-10 w-10 rounded-full",src:t.profile_photo_url,alt:t.name},null,8,E)]),e("div",F,[e("div",O,i(t.name),1),e("div",R,i(t.email),1)])])]),e("td",q,[e("span",{class:_(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize",r[t.roles[0]?.name]])},i(t.roles[0]?.name),3)]),e("td",Y,i(t.enrollments_count),1),e("td",G,[e("span",{class:_(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},i(t.is_active?"Active":"Inactive"),3)]),e("td",H,[a(n(f),{href:o.route("admin.users.login-history",t.id)},{default:u(()=>[p(i(x(t.last_login_at)),1)]),_:2},1032,["href"])]),e("td",J,[e("div",K,[a(n(f),{href:o.route("admin.users.show",t.id),class:"text-blue-600 hover:text-blue-900"},{default:u(()=>[...s[0]||(s[0]=[p(" View ",-1)])]),_:1},8,["href"]),a(n(f),{href:o.route("admin.users.edit",t.id),class:"text-indigo-600 hover:text-indigo-900"},{default:u(()=>[...s[1]||(s[1]=[p(" Edit ",-1)])]),_:1},8,["href"]),e("button",{onClick:b=>h(t),class:"text-orange-600 hover:text-orange-900"},i(t.is_active?"Deactivate":"Activate"),9,P),t.id!==o.$page.props.auth.user.id?(c(),g("button",{key:0,onClick:b=>l(t),class:"text-red-600 hover:text-red-900"}," Delete ",8,Q)):A("",!0)])])]))),128))])]))}},X={class:"py-6"},Z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ee={class:"mb-8"},te={class:"flex justify-between items-center"},se={class:"mb-6 bg-white rounded-lg shadow p-4"},oe={class:"flex flex-wrap gap-4 items-center"},re={class:"flex-1 min-w-[300px]"},ae={class:"bg-white shadow rounded-lg overflow-hidden"},ie={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},ye={__name:"Index",props:{users:Object,filters:Object},setup(m){const r=C({search:"",role:"",status:""});let x=null;const h=()=>{clearTimeout(x),x=setTimeout(()=>{l()},300)},l=()=>{y.get(route("admin.users.index"),r.value,{preserveState:!0,replace:!0})};return S(()=>[r.value.role,r.value.status],()=>{l()}),(o,s)=>(c(),T(V,null,{default:u(()=>[a(n(U),{title:"User Management"}),e("div",X,[e("div",Z,[e("div",ee,[e("div",te,[s[5]||(s[5]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"User Management"),e("p",{class:"mt-2 text-gray-600"}," Manage students, tutors, and administrators ")],-1)),a(n(f),{href:o.route("admin.users.stats"),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:u(()=>[...s[3]||(s[3]=[p(" User Stats ",-1)])]),_:1},8,["href"]),a(n(f),{href:o.route("admin.users.create"),class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:u(()=>[a(n(L),{class:"h-4 w-4 mr-2"}),s[4]||(s[4]=p(" Add User ",-1))]),_:1},8,["href"])])]),e("div",se,[e("div",oe,[e("div",re,[v(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.value.search=t),type:"text",placeholder:"Search users...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onInput:h},null,544),[[D,r.value.search]])]),v(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>r.value.role=t),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:l},[...s[6]||(s[6]=[e("option",{value:""},"All Roles",-1),e("option",{value:"admin"},"Administrator",-1),e("option",{value:"tutor"},"Tutor",-1),e("option",{value:"student"},"Student",-1)])],544),[[w,r.value.role]]),v(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>r.value.status=t),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:l},[...s[7]||(s[7]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)])],544),[[w,r.value.status]])])]),e("div",ae,[a(W,{users:m.users.data},null,8,["users"]),e("div",ie,[a(M,{links:m.users.links},null,8,["links"])])])])])]),_:1}))}};export{ye as default};
