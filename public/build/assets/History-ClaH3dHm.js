import{f as n,a as t,o,d as y,j as b,n as S,t as r,g as f,p as z,G as A,c as H,w as v,b as l,i,q as L,y as P,e as h,x as D,s as T,h as w,F as C,k as j,z as E}from"./app-DmOHqPL6.js";import{S as M}from"./StudentLayout-CVfVOMIj.js";import{_ as R}from"./Pagination-C_AabbVA.js";import{r as F}from"./PlusIcon-UcZhv7NK.js";import{r as $}from"./CreditCardIcon-CltokmQQ.js";import{r as q}from"./CheckCircleIcon-B458HlSk.js";import{r as G}from"./XCircleIcon-BsVRlddE.js";import{r as I}from"./CurrencyDollarIcon-C3OVdXS7.js";import{r as Y}from"./ExclamationTriangleIcon-C4fgoQto.js";import{r as Z}from"./ArrowPathIcon-h3_5Xh0r.js";import"./XMarkIcon-M5MZ3YHP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./HomeIcon-Xn7Itk27.js";import"./ChatBubbleLeftRightIcon-BMVI5-ub.js";import"./BellIcon-CUn22blX.js";function J(x,d){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}const V={__name:"PaymentStatusBadge",props:{status:{type:String,required:!0}},setup(x){const d=x,u=y(()=>({success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800",refunded:"bg-purple-100 text-purple-800"})[d.status]||"bg-gray-100 text-gray-800"),p=y(()=>({success:"bg-green-400",failed:"bg-red-400",pending:"bg-yellow-400",refunded:"bg-purple-400"})[d.status]||"bg-gray-400");return(a,m)=>(o(),n("span",{class:S(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize",u.value])},[t("span",{class:S(["w-2 h-2 rounded-full mr-1.5",p.value])},null,2),b(" "+r(x.status),1)],2))}},K={class:"min-h-screen bg-gradient-to-br from-slate-50 to-white py-8"},Q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},W={class:"mb-8"},X={class:"flex items-center justify-between"},tt={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},et={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},st={class:"flex items-center"},ot={class:"p-3 bg-blue-100 rounded-xl"},at={class:"ml-4"},lt={class:"text-2xl font-bold text-gray-900"},rt={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},nt={class:"flex items-center"},it={class:"p-3 bg-green-100 rounded-xl"},dt={class:"ml-4"},ut={class:"text-2xl font-bold text-gray-900"},ct={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},pt={class:"flex items-center"},mt={class:"p-3 bg-red-100 rounded-xl"},xt={class:"ml-4"},gt={class:"text-2xl font-bold text-gray-900"},yt={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},ft={class:"flex items-center"},bt={class:"p-3 bg-purple-100 rounded-xl"},_t={class:"ml-4"},vt={class:"text-2xl font-bold text-gray-900"},ht={class:"bg-white rounded-xl shadow-sm border border-gray-100 mb-8"},wt={class:"p-6"},kt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},St={class:"relative"},Pt={class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},Tt={key:0,class:"text-center py-12"},Ct={key:1,class:"text-center py-12"},jt={class:"mt-6"},Ft={key:2},$t={class:"block md:hidden divide-y divide-gray-100"},Vt={class:"flex justify-between items-start mb-2"},Nt={class:"font-semibold text-gray-900"},Ot={class:"text-sm text-gray-500"},Bt={class:"text-right"},Ut={class:"font-bold text-gray-900"},zt={class:"flex justify-between items-center text-sm text-gray-500"},At={class:"capitalize"},Ht={key:0},Lt={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Dt={key:1,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Et={class:"hidden md:block overflow-x-auto"},Mt={class:"w-full min-w-full divide-y divide-gray-200"},Rt={class:"bg-white divide-y divide-gray-200"},qt={class:"px-6 py-4 whitespace-nowrap"},Gt={class:"text-sm font-semibold text-gray-900"},It={class:"text-sm text-gray-500"},Yt={class:"px-6 py-4 whitespace-nowrap"},Zt={class:"text-sm font-bold text-gray-900"},Jt={class:"px-6 py-4 whitespace-nowrap"},Kt={class:"px-6 py-4 whitespace-nowrap"},Qt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Wt={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},Xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"},ee={key:3,class:"text-center py-12"},se={class:"mt-2 text-gray-500 max-w-md mx-auto"},oe={class:"mt-6"},ae={key:4,class:"px-6 py-4 border-t border-gray-200"},ve={__name:"History",props:{payments:{type:Object,default:()=>({data:[],links:[]})},stats:{type:Object,default:()=>({total_payments:0,successful_payments:0,failed_payments:0,pending_payments:0,total_spent:0})},filters:{type:Object,default:()=>({})},user_role:{type:String,default:"student"}},setup(x){const d=x,u=y(()=>(console.log("Payments prop:",d.payments),d.payments||{data:[],links:[]})),p=y(()=>(console.log("Stats prop:",d.stats),d.stats||{total_payments:0,successful_payments:0,failed_payments:0,pending_payments:0,total_spent:0})),a=f({search:d.filters?.search||"",status:d.filters?.status||"all",type:d.filters?.type||"all"}),m=f(null),c=f(!1),_=f(!1),N=y(()=>a.value.search!==""||a.value.status!=="all"||a.value.type!=="all"),g=()=>{c.value=!0,_.value=!1,E.get(route("payment.history"),a.value,{preserveState:!0,replace:!0,onFinish:()=>{c.value=!1},onError:()=>{c.value=!1,_.value=!0}})},O=()=>{m.value&&clearTimeout(m.value),m.value=setTimeout(()=>{g()},500)},B=()=>{a.value={search:"",status:"all",type:"all"},g()},U=()=>{window.location.reload()};return z(()=>[a.value.status,a.value.type],()=>{g()}),A(()=>{m.value&&clearTimeout(m.value)}),(k,e)=>(o(),H(M,null,{default:v(()=>[l(i(L),{title:"Payment History"}),t("div",K,[t("div",Q,[t("div",W,[t("div",X,[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"}," Payment History "),t("p",{class:"mt-2 text-gray-600"}," View your payment transactions and billing history ")],-1)),l(i(P),{href:k.route("payment.pricing"),class:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-emerald-500 to-teal-600 border border-transparent rounded-lg font-semibold text-white shadow-md hover:shadow-lg transition-all duration-200 hover:scale-[1.02]"},{default:v(()=>[l(i(F),{class:"h-5 w-5 mr-2"}),e[3]||(e[3]=b(" Upgrade Plan ",-1))]),_:1},8,["href"])])]),t("div",tt,[t("div",et,[t("div",st,[t("div",ot,[l(i($),{class:"h-6 w-6 text-blue-600"})]),t("div",at,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Payments",-1)),t("p",lt,r(p.value.total_payments),1)])])]),t("div",rt,[t("div",nt,[t("div",it,[l(i(q),{class:"h-6 w-6 text-green-600"})]),t("div",dt,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-600"},"Successful",-1)),t("p",ut,r(p.value.successful_payments),1)])])]),t("div",ct,[t("div",pt,[t("div",mt,[l(i(G),{class:"h-6 w-6 text-red-600"})]),t("div",xt,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-600"},"Failed",-1)),t("p",gt,r(p.value.failed_payments),1)])])]),t("div",yt,[t("div",ft,[t("div",bt,[l(i(I),{class:"h-6 w-6 text-purple-600"})]),t("div",_t,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Spent",-1)),t("p",vt," NGN "+r(p.value.total_spent.toLocaleString()),1)])])])]),t("div",ht,[t("div",wt,[t("div",kt,[t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Search ",-1)),t("div",St,[h(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.search=s),placeholder:"Search by reference or description...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors",onInput:O},null,544),[[D,a.value.search]]),l(i(J),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Status ",-1)),h(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.status=s),onChange:g,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"},[...e[10]||(e[10]=[t("option",{value:"all"},"All Status",-1),t("option",{value:"success"},"Successful",-1),t("option",{value:"failed"},"Failed",-1),t("option",{value:"pending"},"Pending",-1)])],544),[[T,a.value.status]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Type ",-1)),h(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.type=s),onChange:g,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-colors"},[...e[12]||(e[12]=[t("option",{value:"all"},"All Types",-1),t("option",{value:"subscription"},"Subscriptions",-1),t("option",{value:"one_time"},"One-time Payments",-1)])],544),[[T,a.value.type]])]),t("div",{class:"flex items-end"},[t("button",{onClick:B,class:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"}," Reset Filters ")])])])]),t("div",Pt,[e[21]||(e[21]=t("div",{class:"px-6 py-4 border-b border-gray-200/70"},[t("h2",{class:"text-lg font-bold text-gray-900"}," Transaction History ")],-1)),c.value?(o(),n("div",Tt,[...e[14]||(e[14]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto"},null,-1),t("p",{class:"mt-4 text-gray-600"},"Loading payments...",-1)])])):_.value?(o(),n("div",Ct,[l(i(Y),{class:"mx-auto h-12 w-12 text-red-500"}),e[16]||(e[16]=t("h3",{class:"mt-4 text-lg font-semibold text-gray-900"}," Unable to load payments ",-1)),e[17]||(e[17]=t("p",{class:"mt-2 text-gray-500 max-w-md mx-auto"}," There was an error loading your payment history. Please try again. ",-1)),t("div",jt,[t("button",{onClick:U,class:"inline-flex items-center px-4 py-2 bg-emerald-600 border border-transparent rounded-lg font-semibold text-white hover:bg-emerald-700 transition-colors"},[l(i(Z),{class:"h-5 w-5 mr-2"}),e[15]||(e[15]=b(" Reload Page ",-1))])])])):!c.value&&u.value.data.length>0?(o(),n("div",Ft,[t("div",$t,[(o(!0),n(C,null,j(u.value.data,s=>(o(),n("div",{key:s.id,class:"p-4 hover:bg-gray-50 transition-colors"},[t("div",Vt,[t("div",null,[t("p",Nt,r(s.description||s.plan_name||"Payment"),1),t("p",Ot,r(s.reference),1)]),t("div",Bt,[t("p",Ut,r(s.formatted_amount),1),l(V,{status:s.status},null,8,["status"])])]),t("div",zt,[t("div",null,[t("span",At,r(s.status),1),s.paid_at?(o(),n("span",Ht," â€¢ "+r(s.paid_at),1)):w("",!0)]),t("div",null,[s.is_subscription?(o(),n("span",Lt," Subscription ")):(o(),n("span",Dt," One-time "))])])]))),128))]),t("div",Et,[t("table",Mt,[e[18]||(e[18]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Transaction "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Amount "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Type "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Date "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"}," Reference ")])],-1)),t("tbody",Rt,[(o(!0),n(C,null,j(u.value.data,s=>(o(),n("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[t("td",qt,[t("div",null,[t("p",Gt,r(s.description||s.plan_name||"Payment"),1),t("p",It,r(s.is_subscription?"Subscription Plan":"One-time Payment"),1)])]),t("td",Yt,[t("p",Zt,r(s.formatted_amount),1)]),t("td",Jt,[l(V,{status:s.status},null,8,["status"])]),t("td",Kt,[s.is_subscription?(o(),n("span",Qt," Subscription ")):(o(),n("span",Wt," One-time "))]),t("td",Xt,r(s.paid_at||s.created_at),1),t("td",te,r(s.reference),1)]))),128))])])])])):!c.value&&u.value.data.length===0?(o(),n("div",ee,[l(i($),{class:"mx-auto h-12 w-12 text-gray-400"}),e[20]||(e[20]=t("h3",{class:"mt-4 text-lg font-semibold text-gray-900"}," No payments found ",-1)),t("p",se,r(N.value?"Try adjusting your filters to see more results.":"You haven't made any payments yet."),1),t("div",oe,[l(i(P),{href:k.route("payment.pricing"),class:"inline-flex items-center px-4 py-2 bg-emerald-600 border border-transparent rounded-lg font-semibold text-white hover:bg-emerald-700 transition-colors"},{default:v(()=>[l(i(F),{class:"h-5 w-5 mr-2"}),e[19]||(e[19]=b(" Make Your First Payment ",-1))]),_:1},8,["href"])])])):w("",!0),!c.value&&u.value.data.length>0?(o(),n("div",ae,[l(R,{links:u.value.links||[]},null,8,["links"])])):w("",!0)])])])]),_:1}))}};export{ve as default};
