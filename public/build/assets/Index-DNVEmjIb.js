import{r as _,d as U,f as a,g as m,a as e,b as i,t as n,e as w,q as T,v as B,F as M,j,n as k,i as h,h as u,c as V,w as g,x as S,o as r,y as C,m as q,p as P,s as W}from"./app-C9VuOAcA.js";import{_ as G}from"./ConfirmationModal-c8KvBVPc.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as J}from"./UserGroupIcon-ap3vNEJ2.js";import{r as K}from"./EnvelopeIcon-DOPfEwWU.js";import{r as I}from"./EyeIcon-zRJbhGzA.js";import{r as Q}from"./PaperAirplaneIcon-Beev2cXf.js";import{r as X}from"./PencilIcon-0w5t1cZi.js";import{r as Y}from"./TrashIcon-CG8YGcQZ.js";import{r as Z}from"./ChartBarIcon-CCgmLFn5.js";import{r as ee}from"./BellIcon-DZy7rD59.js";import{_ as te}from"./Pagination-CwkaBsN1.js";import{A as se}from"./AdminLayout-C_iMcgnZ.js";import{r as oe}from"./PlusIcon-8EoHlSa6.js";import"./Modal-Bhw3GMAr.js";import"./XMarkIcon-DVZDmqJm.js";import"./UserIcon-DmdITMGs.js";import"./UsersIcon-B1Go-b-i.js";import"./ChatBubbleLeftRightIcon-CWmHW5CI.js";import"./CurrencyDollarIcon-BnH3mKBo.js";const le={class:"overflow-x-auto"},re={key:0,class:"bg-blue-50 border-b border-blue-200 px-6 py-3"},ae={class:"flex items-center justify-between"},ne={class:"text-sm text-blue-700"},ie={class:"flex items-center space-x-3"},de={class:"min-w-full divide-y divide-gray-200"},ue={class:"bg-gray-50"},ce={scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},pe={class:"bg-white divide-y divide-gray-200"},me={class:"px-6 py-4 whitespace-nowrap"},xe=["value","disabled"],fe={class:"px-6 py-4 whitespace-nowrap"},ge={class:"flex flex-col"},ye={class:"font-medium text-gray-900"},ve={class:"text-sm text-gray-500 truncate max-w-xs"},be={class:"px-6 py-4 whitespace-nowrap"},he={key:0,class:"-ml-0.5 mr-1 h-2 w-2",fill:"currentColor",viewBox:"0 0 8 8"},we={key:1,class:"-ml-0.5 mr-1 h-2 w-2",fill:"currentColor",viewBox:"0 0 8 8"},_e={key:2,class:"-ml-0.5 mr-1 h-2 w-2",fill:"currentColor",viewBox:"0 0 8 8"},ke={key:3,class:"-ml-0.5 mr-1 h-2 w-2",fill:"currentColor",viewBox:"0 0 8 8"},Se={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"flex w-2 h-2 mr-1"},$e={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ne={class:"flex items-center"},Ae={class:"font-medium"},De={class:"text-xs capitalize"},Te={key:0,class:"text-xs text-gray-400 mt-1"},Ve={class:"px-6 py-4 whitespace-nowrap"},ze={class:"flex items-center space-x-2"},Be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ie={key:0},Ue={class:"font-medium text-gray-900"},Me={key:1},je={class:"font-medium text-gray-900"},Le={key:2,class:"text-gray-400 italic"},Re={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ee={class:"flex items-center space-x-2"},Fe=["onClick"],Oe=["onClick"],qe={key:0},Pe={colspan:"8",class:"px-6 py-12 text-center"},We={class:"flex flex-col items-center justify-center"},Ge={key:0,class:"mt-4 p-3 bg-gray-50 rounded-md"},He={class:"font-medium text-gray-900"},Je={class:"text-sm text-gray-600 mt-1"},Ke={__name:"NotificationTable",props:{notifications:{type:Array,required:!0,default:()=>[]}},setup(y){const p=y,l=_([]),x=_(""),v=_(!1),f=_(null),b=U({get:()=>{const o=p.notifications.filter(t=>t.status!=="sent");return o.length>0&&o.every(t=>l.value.includes(t.id))},set:o=>{o?l.value=p.notifications.filter(t=>t.status!=="sent").map(t=>t.id):l.value=[]}}),$=o=>({info:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",alert:"bg-red-100 text-red-800",system:"bg-purple-100 text-purple-800"})[o]||"bg-gray-100 text-gray-800",d=o=>({draft:"bg-gray-100 text-gray-800",scheduled:"bg-blue-100 text-blue-800",sending:"bg-yellow-100 text-yellow-800",sent:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"})[o]||"bg-gray-100 text-gray-800",c=o=>({draft:"bg-gray-400",scheduled:"bg-blue-400",sending:"bg-yellow-400",sent:"bg-green-400",failed:"bg-red-400"})[o]||"bg-gray-400",N=o=>({all:"All Users",roles:"Specific Roles",specific:"Specific Users"})[o]||o,L=o=>!o||!Array.isArray(o)?"":o.map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(", "),z=o=>o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",A=()=>{l.value=[],x.value=""},R=()=>{!x.value||l.value.length===0||(x.value==="delete"?confirm(`Are you sure you want to delete ${l.value.length} notification(s)? This action cannot be undone.`)&&C.post(route("admin.notifications.bulk-action"),{action:"delete",notifications:l.value},{preserveScroll:!0,onSuccess:()=>A()}):x.value==="send_now"&&C.post(route("admin.notifications.bulk-action"),{action:"send_now",notifications:l.value},{preserveScroll:!0,onSuccess:()=>A()}),x.value="")},E=o=>{confirm("Send this notification now?")&&C.post(route("admin.notifications.send-now",o.id),{},{preserveScroll:!0})},F=o=>{f.value=o,v.value=!0},O=()=>{f.value&&C.delete(route("admin.notifications.destroy",f.value.id),{preserveScroll:!0,onSuccess:()=>{v.value=!1,f.value=null}})};return(o,t)=>(r(),a("div",le,[l.value.length>0?(r(),a("div",re,[e("div",ae,[e("div",ne,n(l.value.length)+" notification"+n(l.value.length!==1?"s":"")+" selected ",1),e("div",ie,[w(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>x.value=s),class:"rounded-md border-gray-300 py-1 pl-3 pr-8 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",onChange:R},[...t[4]||(t[4]=[e("option",{value:""},"Bulk Actions",-1),e("option",{value:"send_now"},"Send Now",-1),e("option",{value:"delete"},"Delete",-1)])],544),[[T,x.value]]),e("button",{onClick:A,class:"text-sm text-gray-600 hover:text-gray-900"}," Clear ")])])])):m("",!0),e("table",de,[e("thead",ue,[e("tr",null,[e("th",ce,[w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>b.value=s),type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[B,b.value]])]),t[5]||(t[5]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Title ",-1)),t[6]||(t[6]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type ",-1)),t[7]||(t[7]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),t[8]||(t[8]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Recipients ",-1)),t[9]||(t[9]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Delivery ",-1)),t[10]||(t[10]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Scheduled/ Sent ",-1)),t[11]||(t[11]=e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",pe,[(r(!0),a(M,null,j(y.notifications,s=>(r(),a("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",me,[w(e("input",{"onUpdate:modelValue":t[2]||(t[2]=D=>l.value=D),value:s.id,type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:s.status==="sent"},null,8,xe),[[B,l.value]])]),e("td",fe,[e("div",ge,[e("div",ye,n(s.title),1),e("div",ve,n(s.message),1)])]),e("td",be,[e("span",{class:k([$(s.type),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},[s.type==="info"?(r(),a("svg",he,[...t[12]||(t[12]=[e("circle",{cx:"4",cy:"4",r:"3"},null,-1)])])):s.type==="success"?(r(),a("svg",we,[...t[13]||(t[13]=[e("path",{d:"M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z"},null,-1)])])):s.type==="warning"?(r(),a("svg",_e,[...t[14]||(t[14]=[e("path",{d:"M4.4 5.324h-.8v-2.46h.8zm0 1.42h-.8V5.89h.8zM3.76.63L.04 7.075c-.115.2.016.425.26.426h7.397c.242 0 .372-.226.258-.426C6.726 4.924 5.47 2.79 4.253.63c-.113-.174-.39-.174-.494 0z"},null,-1)])])):s.type==="alert"?(r(),a("svg",ke,[...t[15]||(t[15]=[e("path",{d:"M4 0C1.8 0 0 1.8 0 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm0 1c1.66 0 3 1.34 3 3S5.66 7 4 7 1 5.66 1 4s1.34-3 3-3zm-.5 1v3h1V2h-1zm0 4v1h1V6h-1z"},null,-1)])])):m("",!0),h(" "+n(s.type),1)],2)]),e("td",Se,[e("span",{class:k([d(s.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},[e("span",Ce,[e("span",{class:k([c(s.status),"animate-pulse w-2 h-2 rounded-full"])},null,2)]),h(" "+n(s.status_label),1)],2)]),e("td",$e,[e("div",Ne,[i(u(J),{class:"h-4 w-4 mr-1 text-gray-400"}),e("span",Ae,n(s.recipients_count),1),t[16]||(t[16]=e("span",{class:"mx-1 text-gray-400"},"â€¢",-1)),e("span",De,n(N(s.user_selection)),1)]),s.role_names?(r(),a("div",Te," Roles: "+n(L(s.role_names)),1)):m("",!0)]),e("td",Ve,[e("div",ze,[e("div",{class:k([s.send_email?"text-blue-600 bg-blue-100":"text-gray-600 bg-gray-100","flex items-center px-2 py-1 rounded text-xs font-medium"])},[i(u(K),{class:"h-3 w-3 mr-1"}),h(" "+n(s.send_email?"Email + In-app":"In-app only"),1)],2)])]),e("td",Be,[s.scheduled_at&&s.status!=="sent"?(r(),a("div",Ie,[e("div",Ue,n(z(s.scheduled_at)),1),t[17]||(t[17]=e("div",{class:"text-xs text-gray-400"}," Scheduled ",-1))])):s.sent_at?(r(),a("div",Me,[e("div",je,n(z(s.sent_at)),1),t[18]||(t[18]=e("div",{class:"text-xs text-gray-400"}," Sent ",-1))])):(r(),a("div",Le," Immediate "))]),e("td",Re,[e("div",Ee,[i(u(S),{href:o.route("admin.notifications.show",s.id),class:"text-blue-600 hover:text-blue-900",title:"View Details"},{default:g(()=>[i(u(I),{class:"h-4 w-4"})]),_:1},8,["href"]),s.status!=="sent"&&s.status!=="sending"?(r(),a("button",{key:0,onClick:D=>E(s),class:"text-green-600 hover:text-green-900",title:"Send Now"},[i(u(Q),{class:"h-4 w-4"})],8,Fe)):m("",!0),s.status==="draft"?(r(),V(u(S),{key:1,href:o.route("admin.notifications.edit",s.id),class:"text-yellow-600 hover:text-yellow-900",title:"Edit"},{default:g(()=>[i(u(X),{class:"h-4 w-4"})]),_:1},8,["href"])):m("",!0),i(u(S),{href:o.route("admin.notifications.preview",s.id),class:"text-purple-600 hover:text-purple-900",title:"Preview"},{default:g(()=>[i(u(I),{class:"h-4 w-4"})]),_:1},8,["href"]),s.status!=="sent"?(r(),a("button",{key:2,onClick:D=>F(s),class:"text-red-600 hover:text-red-900",title:"Delete"},[i(u(Y),{class:"h-4 w-4"})],8,Oe)):m("",!0),s.status==="sent"?(r(),V(u(S),{key:3,href:o.route("admin.notifications.show",s.id),class:"text-gray-600 hover:text-gray-900",title:"View Logs"},{default:g(()=>[i(u(Z),{class:"h-4 w-4"})]),_:1},8,["href"])):m("",!0)])])]))),128))]),y.notifications.length===0?(r(),a("tbody",qe,[e("tr",null,[e("td",Pe,[e("div",We,[i(u(ee),{class:"h-12 w-12 text-gray-400 mb-4"}),t[19]||(t[19]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No notifications found",-1)),t[20]||(t[20]=e("p",{class:"text-gray-500 max-w-sm"}," Create your first notification to send announcements, updates, or alerts to users. ",-1))])])])])):m("",!0)]),i(G,{show:v.value,onClose:t[3]||(t[3]=s=>v.value=!1),onConfirm:O},{title:g(()=>[...t[21]||(t[21]=[h(" Delete Notification ",-1)])]),content:g(()=>[t[22]||(t[22]=h(" Are you sure you want to delete this notification? This action cannot be undone. ",-1)),f.value?(r(),a("div",Ge,[e("div",He,n(f.value.title),1),e("div",Je,n(f.value.message.substring(0,100))+"...",1)])):m("",!0)]),_:1},8,["show"])]))}},Qe=H(Ke,[["__scopeId","data-v-66f7315e"]]),Xe={class:"py-6"},Ye={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Ze={class:"mb-8"},et={class:"flex justify-between items-center"},tt={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},st={class:"text-sm font-medium text-gray-500"},ot={class:"mt-1 text-2xl font-semibold text-gray-900"},lt={class:"mb-6 bg-white rounded-lg shadow p-4"},rt={class:"flex flex-wrap gap-4 items-center"},at={class:"flex-1 min-w-[300px]"},nt={class:"bg-white shadow rounded-lg overflow-hidden"},it={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},Dt={__name:"Index",props:{notifications:Object,stats:Object,filters:Object},setup(y){const p=y,l=_({search:p.filters?.search||"",status:p.filters?.status||"",type:p.filters?.type||""}),x=U(()=>p.stats?[{label:"Total Notifications",value:p.stats.total||0,icon:"BellIcon",color:"bg-blue-500"},{label:"Draft",value:p.stats.draft||0,icon:"DocumentIcon",color:"bg-gray-500"},{label:"Scheduled",value:p.stats.scheduled||0,icon:"ClockIcon",color:"bg-yellow-500"},{label:"Sent",value:p.stats.sent||0,icon:"CheckCircleIcon",color:"bg-green-500"}]:[]);let v=null;const f=()=>{clearTimeout(v),v=setTimeout(()=>{b()},300)},b=()=>{C.get(route("admin.notifications.index"),l.value,{preserveState:!0,replace:!0})};return q(()=>[l.value.status,l.value.type],()=>{b()}),($,d)=>(r(),V(se,null,{default:g(()=>[i(u(P),{title:"Notification Management"}),e("div",Xe,[e("div",Ye,[e("div",Ze,[e("div",et,[d[4]||(d[4]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Notification Management"),e("p",{class:"mt-2 text-gray-600"}," Create and manage system notifications ")],-1)),i(u(S),{href:$.route("admin.notifications.create"),class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:g(()=>[i(u(oe),{class:"h-4 w-4 mr-2"}),d[3]||(d[3]=h(" Create Notification ",-1))]),_:1},8,["href"])])]),e("div",tt,[(r(!0),a(M,null,j(x.value,(c,N)=>(r(),a("div",{key:N,class:"bg-white rounded-lg shadow p-4"},[e("div",st,n(c.label),1),e("div",ot,n(c.value),1),c.trend?(r(),a("div",{key:0,class:k(["mt-1 text-sm",c.trendClass])},n(c.trend),3)):m("",!0)]))),128))]),e("div",lt,[e("div",rt,[e("div",at,[w(e("input",{"onUpdate:modelValue":d[0]||(d[0]=c=>l.value.search=c),type:"text",placeholder:"Search notifications...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onInput:f},null,544),[[W,l.value.search]])]),w(e("select",{"onUpdate:modelValue":d[1]||(d[1]=c=>l.value.status=c),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:b},[...d[5]||(d[5]=[e("option",{value:""},"All Status",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"scheduled"},"Scheduled",-1),e("option",{value:"sending"},"Sending",-1),e("option",{value:"sent"},"Sent",-1),e("option",{value:"failed"},"Failed",-1)])],544),[[T,l.value.status]]),w(e("select",{"onUpdate:modelValue":d[2]||(d[2]=c=>l.value.type=c),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:b},[...d[6]||(d[6]=[e("option",{value:""},"All Types",-1),e("option",{value:"info"},"Information",-1),e("option",{value:"success"},"Success",-1),e("option",{value:"warning"},"Warning",-1),e("option",{value:"alert"},"Alert",-1),e("option",{value:"system"},"System",-1)])],544),[[T,l.value.type]])])]),e("div",nt,[i(Qe,{notifications:y.notifications.data},null,8,["notifications"]),e("div",it,[i(te,{links:y.notifications.links},null,8,["links"])])])])])]),_:1}))}};export{Dt as default};
