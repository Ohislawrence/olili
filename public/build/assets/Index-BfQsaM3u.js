import{g as M,c as D,w as m,b as n,a as e,i,q as V,f as l,h as u,y as _,j as x,e as w,o as r,F as k,k as C,t as d,s as j,v as F,n as B,z as v}from"./app-RlMDLPbN.js";import{S as L}from"./StudentLayout-CCnufd-5.js";import{_ as O}from"./Pagination-CS5xz99X.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as z}from"./PlusIcon-D2Joks_y.js";import{r as S}from"./ChatBubbleLeftRightIcon-CsttcNJR.js";import{r as G}from"./AcademicCapIcon-WkJzKIwA.js";import{c as U}from"./XMarkIcon-CrAZ_pzL.js";import"./CheckCircleIcon-Cl5cCiGi.js";import"./ExclamationTriangleIcon-D2VMaPqz.js";import"./UserIcon-BHi175d0.js";import"./BellIcon-BED81iOW.js";import"./CreditCardIcon-BOpYhrSa.js";const q={class:"py-6"},E={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},H={class:"mb-8"},J={class:"flex justify-between items-center"},R={class:"mb-6 bg-white rounded-xl shadow-sm border border-gray-100 p-4"},K={class:"flex flex-col sm:flex-row gap-4"},P={class:"w-full sm:w-48"},Q=["value"],W={class:"flex items-center"},X={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Y={class:"p-6"},Z={class:"flex items-start justify-between mb-4"},ee={class:"flex-1"},te={class:"flex items-center gap-2 mb-2"},se={key:0,class:"text-xs text-gray-500"},oe={class:"mb-3"},re={class:"text-sm font-bold text-gray-900 mb-1"},ae={class:"text-xs text-gray-500 line-clamp-2"},le={class:"space-y-2 text-sm text-gray-600"},ne={class:"flex items-center"},ie={key:0,class:"flex items-center"},de={class:"truncate"},ce={class:"mt-6 flex space-x-2"},ue=["onClick"],fe={key:1,class:"text-center py-12"},me={class:"bg-white rounded-xl shadow-sm border border-gray-100 p-8"},he={class:"mt-1 text-sm text-gray-500"},ge={class:"mt-6"},_e={key:2,class:"mt-8"},xe={__name:"Index",props:{chat_sessions:Object,courses:Array,filters:Object},setup(c){const y=c,a=M({course_id:y.filters.course_id||"",active_only:y.filters.active_only||!1}),h=()=>{v.get(route("student.chat.index"),a.value,{preserveState:!0,replace:!0})},p=()=>{a.value={course_id:"",active_only:!1},h()},$=o=>o.course_outline?o.course_outline.title:o.course?o.course.title:"General Chat",I=o=>o.course_outline&&o.course_outline.module?`${o.course.title} â€¢ ${o.course_outline.module.title}`:o.course?o.course.title:"General learning assistance",N=o=>{const t=new Date(o),f=Math.floor((new Date-t)/(1e3*60));if(f<1)return"Just now";if(f<60)return`${f}m ago`;const g=Math.floor(f/60);if(g<24)return`${g}h ago`;const b=Math.floor(g/24);return b<7?`${b}d ago`:t.toLocaleDateString()},A=async o=>{if(confirm("Are you sure you want to close this chat session?"))try{await v.delete(route("student.chat.close",o.id)),v.reload()}catch(t){console.error("Failed to close session:",t)}};return(o,t)=>(r(),D(L,null,{default:m(()=>[n(i(V),{title:"Chat Sessions"}),e("div",q,[e("div",E,[e("div",H,[e("div",J,[t[3]||(t[3]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Chat Sessions"),e("p",{class:"mt-1 text-sm text-gray-600"}," Manage your conversations with the AI tutor ")],-1)),n(i(_),{href:o.route("student.chat.create"),class:"inline-flex items-center px-4 py-2.5 bg-gradient-to-r from-emerald-600 to-teal-600 border border-transparent rounded-lg font-semibold text-white shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-all duration-200"},{default:m(()=>[n(i(z),{class:"h-4 w-4 mr-2"}),t[2]||(t[2]=x(" New Chat ",-1))]),_:1},8,["href"])])]),e("div",R,[e("div",K,[e("div",P,[w(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.course_id=s),class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 py-2.5 px-3",onChange:h},[t[4]||(t[4]=e("option",{value:""},"All Courses",-1)),(r(!0),l(k,null,C(c.courses,s=>(r(),l("option",{key:s.id,value:s.id},d(s.title),9,Q))),128))],544),[[j,a.value.course_id]])]),e("div",W,[w(e("input",{id:"active_only","onUpdate:modelValue":t[1]||(t[1]=s=>a.value.active_only=s),type:"checkbox",class:"h-4 w-4 text-emerald-600 focus:ring-emerald-500 border-gray-300 rounded",onChange:h},null,544),[[F,a.value.active_only]]),t[5]||(t[5]=e("label",{for:"active_only",class:"ml-2 text-sm text-gray-700"}," Active sessions only ",-1))]),a.value.course_id||a.value.active_only?(r(),l("button",{key:0,onClick:p,class:"ml-auto text-sm text-emerald-600 hover:text-emerald-500 font-medium"}," Clear filters ")):u("",!0)])]),c.chat_sessions.data.length?(r(),l("div",X,[(r(!0),l(k,null,C(c.chat_sessions.data,s=>(r(),l("div",{key:s.id,class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-300 hover:-translate-y-1"},[e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[e("span",{class:B(["inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold",s.is_active?"bg-emerald-100 text-emerald-800":"bg-gray-100 text-gray-800"])},d(s.is_active?"Active":"Closed"),3),s.last_activity_at?(r(),l("span",se,d(N(s.last_activity_at)),1)):u("",!0)]),e("div",oe,[e("h3",re,d($(s)),1),e("p",ae,d(I(s)),1)])])]),e("div",le,[e("div",ne,[n(i(S),{class:"h-4 w-4 mr-2"}),e("span",null,d(s.messages_count||0)+" messages",1)]),s.course?(r(),l("div",ie,[n(i(G),{class:"h-4 w-4 mr-2"}),e("span",de,d(s.course.title),1)])):u("",!0)]),e("div",ce,[n(i(_),{href:o.route("student.chat.show",s.id),class:"flex-1 text-center px-3 py-2.5 text-sm font-semibold text-white bg-emerald-600 border border-transparent rounded-lg hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-colors"},{default:m(()=>[...t[6]||(t[6]=[x(" Open Chat ",-1)])]),_:1},8,["href"]),s.is_active?(r(),l("button",{key:0,onClick:f=>A(s),class:"px-3 py-2.5 text-sm font-semibold text-gray-700 bg-white border border-emerald-300 rounded-lg hover:bg-emerald-50 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-colors"},[n(i(U),{class:"h-4 w-4"})],8,ue)):u("",!0)])])]))),128))])):(r(),l("div",fe,[e("div",me,[n(i(S),{class:"mx-auto h-12 w-12 text-gray-400"}),t[8]||(t[8]=e("h3",{class:"mt-2 text-sm font-semibold text-gray-900"},"No chat sessions",-1)),e("p",he,d(a.value.course_id||a.value.active_only?"No sessions match your filters.":"Start a new conversation with your AI tutor."),1),e("div",ge,[n(i(_),{href:o.route("student.chat.create"),class:"inline-flex items-center px-4 py-2.5 bg-gradient-to-r from-emerald-600 to-teal-600 border border-transparent rounded-lg font-semibold text-white shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-all duration-200"},{default:m(()=>[...t[7]||(t[7]=[x(" Start New Chat ",-1)])]),_:1},8,["href"]),a.value.course_id||a.value.active_only?(r(),l("button",{key:0,onClick:p,class:"ml-3 inline-flex items-center px-4 py-2.5 border border-emerald-300 rounded-lg font-semibold text-emerald-700 bg-white hover:bg-emerald-50 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-all duration-200"}," Clear Filters ")):u("",!0)])])])),c.chat_sessions.data.length?(r(),l("div",_e,[n(O,{links:c.chat_sessions.links},null,8,["links"])])):u("",!0)])])]),_:1}))}},De=T(xe,[["__scopeId","data-v-062912db"]]);export{De as default};
