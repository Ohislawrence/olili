import{c as A,w as g,b as l,a as t,i as u,q as D,y,j as b,e as x,f as n,o as i,F as v,k as h,t as a,s as k,x as _,h as f,n as N,z as p}from"./app-CdH_cdfI.js";import{A as $}from"./AdminLayout-Bd_PMlL4.js";import{_ as F}from"./Pagination-DCn_UHS-.js";import{r as U}from"./PlusIcon-Dgnmk2fw.js";import{r as B}from"./UserIcon-CQsa-THw.js";import{r as E}from"./CreditCardIcon-K4d90J19.js";import"./XMarkIcon-CLGoKp_j.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ChartBarIcon-DNhbmBxA.js";import"./CurrencyDollarIcon-DNr5UlC2.js";import"./EyeIcon-Bf9p73m0.js";const L={class:"space-y-6"},M={class:"flex justify-between items-center"},P={class:"bg-white rounded-lg shadow p-6"},T={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},z=["value"],R=["value"],q={class:"flex space-x-4"},I={class:"flex-1"},G={class:"flex-1"},H={class:"bg-white shadow overflow-hidden sm:rounded-lg"},J={class:"overflow-x-auto"},K={class:"min-w-full divide-y divide-gray-200"},Q={class:"bg-white divide-y divide-gray-200"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"flex items-center"},Y={class:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center"},Z={class:"ml-4"},tt={class:"text-sm font-medium text-gray-900"},et={class:"text-sm text-gray-500"},st={class:"px-6 py-4 whitespace-nowrap"},ot={class:"text-sm font-medium text-gray-900"},rt={class:"text-sm text-gray-500"},it={class:"px-6 py-4 whitespace-nowrap"},nt={key:0,class:"text-xs text-orange-600 mt-1"},at={key:1,class:"text-xs text-gray-500 mt-1"},lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},dt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2"},ut=["onClick"],ct=["onClick"],mt={key:0,class:"text-center py-12"},gt={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},Ct={__name:"Index",props:{subscriptions:Object,filters:Object,statusOptions:Object,planOptions:Object},setup(r){const w=r,c=()=>{p.get(route("admin.subscriptions.index"),w.filters,{preserveState:!0,replace:!0})},S=()=>{p.get(route("admin.subscriptions.index"),{},{preserveState:!0,replace:!0})},C=o=>({active:"bg-green-100 text-green-800",canceled:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800"})[o]||"bg-gray-100 text-gray-800",O=o=>w.statusOptions[o]||o,m=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),V=o=>{confirm(`Are you sure you want to cancel ${o.user.name}'s subscription?`)&&p.post(route("admin.subscriptions.cancel",o.id))},j=o=>{confirm(`Renew ${o.user.name}'s subscription?`)&&p.post(route("admin.subscriptions.renew",o.id))};return(o,e)=>(i(),A($,null,{default:g(()=>[l(u(D),{title:"Subscriptions Management"}),t("div",L,[t("div",M,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Subscriptions"),t("p",{class:"mt-1 text-sm text-gray-600"}," Manage user subscriptions and billing ")],-1)),l(u(y),{href:o.route("admin.subscriptions.create"),class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:g(()=>[l(u(U),{class:"h-4 w-4 mr-2"}),e[4]||(e[4]=b(" New Subscription ",-1))]),_:1},8,["href"])]),t("div",P,[t("div",T,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Status ",-1)),x(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.filters.status=s),onChange:c,class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[6]||(e[6]=t("option",{value:""},"All Status",-1)),(i(!0),n(v,null,h(r.statusOptions,(s,d)=>(i(),n("option",{key:d,value:d},a(s),9,z))),128))],544),[[k,r.filters.status]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Plan ",-1)),x(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>r.filters.plan=s),onChange:c,class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},[e[8]||(e[8]=t("option",{value:""},"All Plans",-1)),(i(!0),n(v,null,h(r.planOptions,(s,d)=>(i(),n("option",{key:d,value:d},a(s),9,R))),128))],544),[[k,r.filters.plan]])]),t("div",q,[t("div",I,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," From Date ",-1)),x(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>r.filters.date_from=s),onChange:c,class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,544),[[_,r.filters.date_from]])]),t("div",G,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," To Date ",-1)),x(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>r.filters.date_to=s),onChange:c,class:"w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,544),[[_,r.filters.date_to]])])]),t("div",{class:"flex items-end"},[t("button",{onClick:S,class:"w-full px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," Clear Filters ")])])]),t("div",H,[e[17]||(e[17]=t("div",{class:"px-4 py-5 sm:px-6 border-b border-gray-200"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," All Subscriptions ")],-1)),t("div",J,[t("table",K,[e[14]||(e[14]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Plan "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Period "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",Q,[(i(!0),n(v,null,h(r.subscriptions.data,s=>(i(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",W,[t("div",X,[t("div",Y,[l(u(B),{class:"h-6 w-6 text-gray-500"})]),t("div",Z,[t("div",tt,a(s.user.name),1),t("div",et,a(s.user.email),1)])])]),t("td",st,[t("div",ot,a(s.plan.name),1),t("div",rt,a(s.plan.formatted_price),1)]),t("td",it,[t("span",{class:N(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",C(s.status)])},a(O(s.status)),3),s.is_on_trial?(i(),n("div",nt," Trial ends "+a(m(s.trial_ends_at)),1)):s.is_active?(i(),n("div",at," Expires "+a(m(s.ends_at)),1)):f("",!0)]),t("td",lt,[t("div",null,"Start: "+a(m(s.starts_at)),1),t("div",null,"End: "+a(m(s.ends_at)),1)]),t("td",dt,[l(u(y),{href:o.route("admin.subscriptions.show",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:g(()=>[...e[12]||(e[12]=[b(" View ",-1)])]),_:1},8,["href"]),l(u(y),{href:o.route("admin.subscriptions.edit",s.id),class:"text-blue-600 hover:text-blue-900"},{default:g(()=>[...e[13]||(e[13]=[b(" Edit ",-1)])]),_:1},8,["href"]),s.is_active?(i(),n("button",{key:0,onClick:d=>V(s),class:"text-red-600 hover:text-red-900"}," Cancel ",8,ut)):f("",!0),s.is_expired?(i(),n("button",{key:1,onClick:d=>j(s),class:"text-green-600 hover:text-green-900"}," Renew ",8,ct)):f("",!0)])]))),128))])])]),r.subscriptions.data.length===0?(i(),n("div",mt,[l(u(E),{class:"mx-auto h-12 w-12 text-gray-400"}),e[15]||(e[15]=t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No subscriptions",-1)),e[16]||(e[16]=t("p",{class:"mt-1 text-sm text-gray-500"},"No subscriptions found matching your criteria.",-1))])):f("",!0),t("div",gt,[l(F,{links:r.subscriptions.links},null,8,["links"])])])])]),_:1}))}};export{Ct as default};
