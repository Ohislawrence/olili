import{u as S,d as V,c as N,w as p,b as g,a as e,h as l,p as U,x as k,i as c,z as C,e as n,f as i,g as a,s as y,o as r,t as d,F as f,j as b,q as M,v,Q as A}from"./app-0zfuhcx6.js";import{A as B}from"./AdminLayout-DPy5cRBG.js";import"./XMarkIcon-BkJ_r5qH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserIcon-CQRDe5qL.js";import"./UsersIcon-CceBFgsc.js";import"./ChatBubbleLeftRightIcon-BX7emuTk.js";import"./ChartBarIcon-C4vgY7D3.js";import"./CurrencyDollarIcon-Bb25Jyh7.js";import"./EyeIcon-ClMNxKsR.js";const $={class:"py-6"},R={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},T={class:"mb-8"},q={class:"flex items-center justify-between"},D={class:"bg-white shadow rounded-lg"},j={class:"p-6 space-y-6"},F={class:"grid grid-cols-1 gap-4"},L={key:0,class:"mt-1 text-sm text-red-600"},z={key:0,class:"mt-1 text-sm text-red-600"},I=["value"],O={class:"space-y-4"},E={class:"flex items-center"},Q=["min"],G={class:"space-y-4"},H={class:"space-y-2"},J=["value","id"],K=["for"],P={key:0,class:"border-t pt-4"},W={class:"grid grid-cols-2 md:grid-cols-4 gap-2"},X=["value","id"],Y=["for"],Z={key:0,class:"mt-1 text-sm text-red-600"},ee={key:1,class:"border-t pt-4"},te={class:"max-h-60 overflow-y-auto border rounded-md p-2"},se=["value","id"],oe=["for"],le={key:0,class:"mt-1 text-sm text-red-600"},re={class:"bg-gray-50 p-4 rounded-md"},ie={class:"text-sm text-gray-600"},de={class:"font-semibold"},ne={class:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3"},ae=["disabled"],_e={__name:"Create",props:{roles:Array,users:Array,notificationtypes:Array,userselectionoptions:Array},setup(u){const x=u,s=S({title:"",message:"",type:"info",send_email:!1,scheduled_at:"",user_selection:"all",user_ids:[],role_names:[]}),h=V(()=>s.user_selection==="all"?x.users.length:s.user_selection==="roles"&&s.role_names.length>0?Math.floor(x.users.length/x.roles.length)*s.role_names.length:s.user_selection==="specific"?s.user_ids.length:0),w=()=>{s.post(route("admin.notifications.store"))};return(_,t)=>(r(),N(B,null,{default:p(()=>[g(l(U),{title:"Create Notification"}),e("div",$,[e("div",R,[e("div",T,[e("div",q,[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Create Notification"),e("p",{class:"mt-2 text-gray-600"}," Send notifications to users with optional email ")],-1)),g(l(k),{href:_.route("admin.notifications.index"),class:"text-sm text-gray-500 hover:text-gray-700"},{default:p(()=>[...t[8]||(t[8]=[c(" â† Back to Notifications ",-1)])]),_:1},8,["href"])])]),e("div",D,[e("form",{onSubmit:C(w,["prevent"])},[e("div",j,[e("div",null,[t[13]||(t[13]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Basic Information",-1)),e("div",F,[e("div",null,[t[10]||(t[10]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700"}," Title * ",-1)),n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>l(s).title=o),type:"text",id:"title",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:""},null,512),[[y,l(s).title]]),l(s).errors.title?(r(),i("p",L,d(l(s).errors.title),1)):a("",!0)]),e("div",null,[t[11]||(t[11]=e("label",{for:"message",class:"block text-sm font-medium text-gray-700"}," Message * ",-1)),n(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=o=>l(s).message=o),id:"message",rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:""},null,512),[[y,l(s).message]]),l(s).errors.message?(r(),i("p",z,d(l(s).errors.message),1)):a("",!0)]),e("div",null,[t[12]||(t[12]=e("label",{for:"type",class:"block text-sm font-medium text-gray-700"}," Type * ",-1)),n(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>l(s).type=o),id:"type",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:""},[(r(!0),i(f,null,b(u.notificationtypes,o=>(r(),i("option",{key:o.value,value:o.value},d(o.label),9,I))),128))],512),[[M,l(s).type]])])])]),e("div",null,[t[17]||(t[17]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Delivery Options",-1)),e("div",O,[e("div",E,[n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l(s).send_email=o),id:"send_email",type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[v,l(s).send_email]]),t[14]||(t[14]=e("label",{for:"send_email",class:"ml-2 block text-sm text-gray-900"}," Send email notification ",-1))]),e("div",null,[t[15]||(t[15]=e("label",{for:"scheduled_at",class:"block text-sm font-medium text-gray-700"}," Schedule (optional) ",-1)),n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l(s).scheduled_at=o),type:"datetime-local",id:"scheduled_at",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",min:new Date().toISOString().slice(0,16)},null,8,Q),[[y,l(s).scheduled_at]]),t[16]||(t[16]=e("p",{class:"mt-1 text-sm text-gray-500"}," Leave empty to send immediately ",-1))])])]),e("div",null,[t[23]||(t[23]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Recipients",-1)),e("div",G,[e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Select Recipients ",-1)),e("div",H,[(r(!0),i(f,null,b(u.userselectionoptions,o=>(r(),i("div",{key:o.value,class:"flex items-center"},[n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=m=>l(s).user_selection=m),value:o.value,type:"radio",id:`selection_${o.value}`,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,8,J),[[A,l(s).user_selection]]),e("label",{for:`selection_${o.value}`,class:"ml-2 block text-sm text-gray-900"},d(o.label),9,K)]))),128))])]),l(s).user_selection==="roles"?(r(),i("div",P,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Select Roles ",-1)),e("div",W,[(r(!0),i(f,null,b(u.roles,o=>(r(),i("div",{key:o,class:"flex items-center"},[n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=m=>l(s).role_names=m),value:o,type:"checkbox",id:`role_${o}`,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,X),[[v,l(s).role_names]]),e("label",{for:`role_${o}`,class:"ml-2 block text-sm text-gray-900 capitalize"},d(o),9,Y)]))),128))]),l(s).errors.role_names?(r(),i("p",Z,d(l(s).errors.role_names),1)):a("",!0)])):a("",!0),l(s).user_selection==="specific"?(r(),i("div",ee,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Select Users ",-1)),e("div",te,[(r(!0),i(f,null,b(u.users,o=>(r(),i("div",{key:o.id,class:"flex items-center py-1"},[n(e("input",{"onUpdate:modelValue":t[7]||(t[7]=m=>l(s).user_ids=m),value:o.id,type:"checkbox",id:`user_${o.id}`,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,se),[[v,l(s).user_ids]]),e("label",{for:`user_${o.id}`,class:"ml-2 block text-sm text-gray-900"},d(o.name)+" ("+d(o.email)+") ",9,oe)]))),128))]),l(s).errors.user_ids?(r(),i("p",le,d(l(s).errors.user_ids),1)):a("",!0)])):a("",!0),e("div",re,[e("p",ie,[t[21]||(t[21]=c(" This notification will be sent to approximately ",-1)),e("span",de,d(h.value),1),t[22]||(t[22]=c(" users. ",-1))])])])])]),e("div",ne,[g(l(k),{href:_.route("admin.notifications.index"),class:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:p(()=>[...t[24]||(t[24]=[c(" Cancel ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",disabled:l(s).processing,class:"px-4 py-2 bg-blue-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},d(l(s).scheduled_at?"Schedule Notification":"Send Now"),9,ae)])],32)])])])]),_:1}))}};export{_e as default};
