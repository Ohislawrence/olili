import{V as Z,O as ee,g as c,d as x,N as te,m as se,c as re,w as A,b as U,a as e,i as E,q as oe,T as le,f as a,h as p,o as l,B as ae,t as n,F as _,k,n as L,j as T,A as ne,e as g,x as y,s as q,y as ie,P as de,z as ue}from"./app-RWparKzM.js";import{S as me}from"./StudentLayout-DxczqX7m.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./XMarkIcon-Bxj87fHb.js";import"./CheckCircleIcon-CCNNkvGD.js";import"./SparklesIcon-CjP9Zpjb.js";import"./QuestionMarkCircleIcon-D0-KGSxJ.js";import"./UserIcon-CDktt_x5.js";import"./PlusIcon-DwarIid2.js";import"./BellIcon-DCKagCV3.js";import"./CreditCardIcon-BhX1AOX7.js";const pe={class:"py-6"},ge={class:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8"},ve={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-white/95 backdrop-blur-sm"},be={class:"max-w-md mx-auto px-6 text-center"},fe={class:"relative mb-8"},xe={class:"h-2 w-full bg-emerald-100 rounded-full overflow-hidden"},ye={class:"mt-2 text-sm text-emerald-600 font-medium"},we={class:"mb-8"},he={class:"inline-flex items-center px-4 py-2 bg-emerald-100 rounded-full mb-4"},_e={class:"text-sm font-semibold text-emerald-800"},ke={class:"text-2xl font-bold text-gray-900 mb-3"},je={class:"text-gray-600"},Ce={class:"mb-6"},Se={class:"flex items-center justify-center space-x-2 mb-4"},ze={class:"bg-emerald-50 border border-emerald-200 rounded-xl p-4 mb-6"},Be={class:"flex items-center justify-center"},Le={class:"text-sm text-emerald-700"},Te={class:"text-sm text-gray-500 italic mb-4"},Me={class:"bg-white shadow-sm rounded-xl border border-gray-100"},Ve={class:"p-6 space-y-6"},Ie={key:0,class:"mt-1 text-sm text-red-600"},Oe=["value"],Ae={class:"mt-1 relative"},Ue={class:"relative"},De=["placeholder","disabled"],Ee={class:"absolute inset-y-0 right-0 flex items-center pr-3"},qe={key:0,class:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-lg py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm scrollbar-custom"},$e=["onClick"],Ne={class:"block truncate font-medium"},Pe={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-4 text-emerald-600"},Fe={class:"block truncate font-medium text-emerald-600"},He={key:1,class:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-lg py-3 px-3 text-sm text-gray-500 border border-gray-200"},Re={key:0,class:"mt-1 text-sm text-red-600"},We={key:1,class:"mt-1 text-sm text-gray-500"},Ge=["value"],Qe={class:"mt-1 text-sm text-gray-500"},Ye=["min"],Je={key:0,class:"mt-1 text-sm text-red-600"},Ke=["onUpdate:modelValue"],Xe=["onClick"],Ze={class:"px-6 py-4 bg-gray-50 rounded-b-xl flex justify-between items-center"},et=["disabled"],tt={key:0},st={key:1},rt={__name:"Create",props:{student_profile:Object,exam_boards:Array,subjects:Array,student_levels:Object},setup(j){const M=Z(),b=j,s=ee({title:"",subject:"",description:"",exam_board_id:"",target_level:b.student_profile?.target_level||"intermediate",weekly_study_hours:b.student_profile?.weekly_study_hours||10,target_completion_date:"",learning_objectives:[""],errors:{},processing:!1}),w=c(!1),v=c(0),h=c(0),C=c("Initializing course generation..."),i=c([{title:"Analyzing Requirements",description:"Understanding your learning goals and preferences",status:"pending",estimatedTime:15,progress:20},{title:"Designing Course Structure",description:"Creating modules and topics for optimal learning flow",status:"pending",estimatedTime:20,progress:40},{title:"Generating Learning Content",description:"Creating engaging text, examples, and explanations",status:"pending",estimatedTime:30,progress:60},{title:"Adding Assessments",description:"Creating quizzes and practice exercises",status:"pending",estimatedTime:15,progress:80},{title:"Finalizing Course",description:"Reviewing and optimizing your learning path",status:"pending",estimatedTime:10,progress:100}]),D=x(()=>i.value[h.value]||i.value[0]),$=x(()=>{const t=i.value.slice(h.value).reduce((B,X)=>B+X.estimatedTime,0);if(t<60)return`${t} seconds`;const r=Math.floor(t/60),u=t%60;return`${r}:${u.toString().padStart(2,"0")} minutes`});let S=null;const N=()=>{w.value=!0,v.value=0,h.value=0,C.value="Starting course generation...",i.value.forEach(o=>{o.status="pending"}),i.value[0]&&(i.value[0].status="current"),S=setInterval(()=>{v.value<90&&(v.value+=.5),i.value.forEach((o,t)=>{if(v.value>=o.progress&&o.status==="pending"){for(let r=0;r<t;r++)i.value[r].status==="current"&&(i.value[r].status="completed");o.status="current",h.value=t,C.value=o.description}})},100)},V=()=>{S&&(clearInterval(S),S=null)},P=async()=>{s.processing=!0,N();try{const o=await de.post(route("student.courses.store"),{title:s.title,subject:s.subject,description:s.description,exam_board_id:s.exam_board_id,target_level:s.target_level,weekly_study_hours:s.weekly_study_hours,target_completion_date:s.target_completion_date,learning_objectives:s.learning_objectives.filter(t=>t.trim()!=="")});o.data.success&&(v.value=100,C.value="Course generation complete!",i.value.forEach(t=>{t.status="completed"}),setTimeout(()=>{V(),w.value=!1,M.props.flash.success=o.data.message,ue.visit(o.data.redirect)},800))}catch(o){V(),w.value=!1,s.processing=!1,o.response?.data?.errors&&(s.errors=o.response.data.errors),o.response?.data?.message?M.props.flash.error=o.response.data.message:M.props.flash.error="An error occurred while creating the course. Please try again."}};te(()=>{V()});const m=c(""),d=c(!1),z=c(""),f=c([...b.subjects]),F=x(()=>{const o=new Date;return o.setDate(o.getDate()+1),o.toISOString().split("T")[0]}),I=x(()=>{if(!s.exam_board_id)return"";const o=b.exam_boards.find(t=>t.id==s.exam_board_id);return o?o.name:""}),H=x(()=>s.exam_board_id?`Select a subject for ${I.value}`:"Search or select a subject"),O=x(()=>{if(!z.value)return f.value;const o=z.value.toLowerCase();return f.value.filter(t=>t.toLowerCase().includes(o))}),R=()=>{if(s.subject="",m.value="",d.value=!1,s.exam_board_id){const o=b.exam_boards.find(t=>t.id==s.exam_board_id);f.value=o?.subjects||[]}else f.value=[...b.subjects]},W=o=>{z.value=o.target.value,d.value=!0},G=o=>{s.subject=o,m.value=o,d.value=!1,z.value=""},Q=()=>{s.exam_board_id||(s.subject=m.value,d.value=!1)},Y=()=>{setTimeout(()=>{d.value=!1},200)};se(()=>{document.addEventListener("click",o=>{const t=document.getElementById("subject");t&&!t.contains(o.target)&&(d.value=!1)})});const J=()=>{s.learning_objectives.push("")},K=o=>{s.learning_objectives.splice(o,1)};return(o,t)=>(l(),re(me,{"disable-global-blur":w.value},{default:A(()=>[U(E(oe),{title:"Create Course"}),e("div",pe,[e("div",ge,[t[30]||(t[30]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-gray-900"},"Create New Course"),e("p",{class:"mt-1 text-sm text-gray-600"}," Create a personalized learning path with Oli AI assistance ")],-1)),U(le,{"enter-active-class":"duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[w.value?(l(),a("div",ve,[e("div",be,[e("div",fe,[e("div",xe,[e("div",{class:"h-full bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full transition-all duration-300 ease-linear",style:ae({width:`${v.value}%`})},null,4)]),e("div",ye,n(Math.round(v.value))+"% Complete ",1)]),t[11]||(t[11]=e("div",{class:"mb-6"},[e("div",{class:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-emerald-100 to-teal-100 border-4 border-white shadow-lg"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-emerald-600 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})])])],-1)),e("div",we,[e("div",he,[e("span",_e," Step "+n(h.value+1)+" of "+n(i.value.length),1)]),e("h2",ke,n(D.value.title),1),e("p",je,n(D.value.description),1)]),e("div",Ce,[e("div",Se,[(l(!0),a(_,null,k(i.value,(r,u)=>(l(),a("div",{key:u,class:L(["transition-all duration-300",{"opacity-100":r.status==="current","opacity-40":r.status!=="current"}])},[e("div",{class:L(["w-3 h-3 rounded-full",{"bg-emerald-500":r.status==="current","bg-emerald-300":r.status==="completed","bg-gray-300":r.status==="pending"}])},null,2)],2))),128))])]),e("div",ze,[e("div",Be,[t[9]||(t[9]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-emerald-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",Le," Estimated time remaining: "+n($.value),1)])]),e("div",Te,[t[10]||(t[10]=e("span",{class:"text-emerald-600 font-medium"},"Status:",-1)),T(" "+n(C.value),1)])])])):p("",!0)]),_:1}),e("div",Me,[e("form",{onSubmit:ne(P,["prevent"])},[e("div",Ve,[e("div",null,[t[12]||(t[12]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-1"}," Course Title * ",-1)),g(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=r=>s.title=r),type:"text",required:"",class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 py-2.5 px-3",placeholder:"e.g., Advanced Calculus for Engineering"},null,512),[[y,s.title]]),s.errors.title?(l(),a("p",Ie,n(s.errors.title),1)):p("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{for:"exam_board_id",class:"block text-sm font-medium text-gray-700 mb-1"}," Exam Board (Optional) ",-1)),g(e("select",{id:"exam_board_id","onUpdate:modelValue":t[1]||(t[1]=r=>s.exam_board_id=r),onChange:R,class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 py-2.5 px-3"},[t[13]||(t[13]=e("option",{value:""},"No specific exam board",-1)),(l(!0),a(_,null,k(j.exam_boards,r=>(l(),a("option",{key:r.id,value:r.id},n(r.name),9,Oe))),128))],544),[[q,s.exam_board_id]]),t[15]||(t[15]=e("p",{class:"mt-1 text-sm text-gray-500"}," Selecting an exam board will show relevant subjects for that board ",-1))]),e("div",null,[t[18]||(t[18]=e("label",{for:"subject",class:"block text-sm font-medium text-gray-700 mb-1"}," Subject * ",-1)),e("div",Ae,[e("div",Ue,[g(e("input",{id:"subject","onUpdate:modelValue":t[2]||(t[2]=r=>m.value=r),type:"text",required:"",class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 pr-10 py-2.5 px-3",placeholder:H.value,onFocus:t[3]||(t[3]=r=>d.value=!0),onInput:W,onBlur:Y,disabled:f.value.length===0},null,40,De),[[y,m.value]]),e("div",Ee,[(l(),a("svg",{xmlns:"http://www.w3.org/2000/svg",class:L(["h-5 w-5 text-gray-400 cursor-pointer",{"transform rotate-180":d.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",onClick:t[4]||(t[4]=r=>d.value=!d.value)},[...t[16]||(t[16]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))])]),d.value&&O.value.length>0?(l(),a("div",qe,[(l(!0),a(_,null,k(O.value,r=>(l(),a("div",{key:r,class:L(["cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-emerald-50",{"bg-emerald-50 text-emerald-700":m.value===r}]),onClick:u=>G(r)},[e("span",Ne,n(r),1),m.value===r?(l(),a("span",Pe,[...t[17]||(t[17]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])])):p("",!0)],10,$e))),128)),!s.exam_board_id&&m.value&&!O.value.includes(m.value)?(l(),a("div",{key:0,class:"cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-emerald-50 border-t border-gray-100",onClick:Q},[e("span",Fe,' Use "'+n(m.value)+'" as custom subject ',1)])):p("",!0)])):p("",!0),d.value&&f.value.length===0?(l(),a("div",He," Please select an exam board first to see available subjects ")):p("",!0)]),s.errors.subject?(l(),a("p",Re,n(s.errors.subject),1)):p("",!0),I.value?(l(),a("p",We," Subjects for: "+n(I.value),1)):p("",!0)]),e("div",null,[t[20]||(t[20]=e("label",{for:"target_level",class:"block text-sm font-medium text-gray-700 mb-1"}," Target Level * ",-1)),g(e("select",{id:"target_level","onUpdate:modelValue":t[5]||(t[5]=r=>s.target_level=r),required:"",class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 py-2.5 px-3"},[t[19]||(t[19]=e("option",{value:""},"Select target level",-1)),(l(!0),a(_,null,k(j.student_levels,(r,u)=>(l(),a("option",{key:u,value:u},n(r),9,Ge))),128))],512),[[q,s.target_level]]),e("p",Qe," Current level: "+n(j.student_profile?.current_level),1)]),e("div",null,[t[21]||(t[21]=e("label",{for:"weekly_study_hours",class:"block text-sm font-medium text-gray-700 mb-1"}," Weekly Study Hours * ",-1)),g(e("input",{id:"weekly_study_hours","onUpdate:modelValue":t[6]||(t[6]=r=>s.weekly_study_hours=r),type:"number",min:"1",max:"40",required:"",class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 py-2.5 px-3",placeholder:"e.g., 10"},null,512),[[y,s.weekly_study_hours]]),t[22]||(t[22]=e("p",{class:"mt-1 text-sm text-gray-500"}," How many hours per week can you dedicate to this course? ",-1))]),e("div",null,[t[23]||(t[23]=e("label",{for:"target_completion_date",class:"block text-sm font-medium text-gray-700 mb-1"}," Target Completion Date * ",-1)),g(e("input",{id:"target_completion_date","onUpdate:modelValue":t[7]||(t[7]=r=>s.target_completion_date=r),type:"date",required:"",min:F.value,class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 py-2.5 px-3"},null,8,Ye),[[y,s.target_completion_date]]),t[24]||(t[24]=e("p",{class:"mt-1 text-sm text-gray-500"}," When do you aim to complete this course? ",-1))]),e("div",null,[t[25]||(t[25]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-1"}," Description ",-1)),g(e("textarea",{id:"description","onUpdate:modelValue":t[8]||(t[8]=r=>s.description=r),rows:"4",class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 py-2.5 px-3",placeholder:"Describe what you want to learn and your goals..."},null,512),[[y,s.description]]),s.errors.description?(l(),a("p",Je,n(s.errors.description),1)):p("",!0)]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Learning Objectives (Optional) ",-1)),(l(!0),a(_,null,k(s.learning_objectives,(r,u)=>(l(),a("div",{key:u,class:"flex gap-2 mb-2"},[g(e("input",{"onUpdate:modelValue":B=>s.learning_objectives[u]=B,type:"text",class:"block w-full rounded-lg border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 py-2.5 px-3",placeholder:"What do you want to achieve?"},null,8,Ke),[[y,s.learning_objectives[u]]]),e("button",{type:"button",onClick:B=>K(u),class:"flex-shrink-0 px-3 py-2.5 text-sm text-red-600 hover:text-red-800 border border-red-200 rounded-lg hover:bg-red-50 transition-colors"}," Remove ",8,Xe)]))),128)),e("button",{type:"button",onClick:J,class:"inline-flex items-center px-4 py-2.5 border border-emerald-300 shadow-sm text-sm font-medium rounded-lg text-emerald-700 bg-white hover:bg-emerald-50 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-all duration-200"},[...t[26]||(t[26]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),T(" Add Objective ",-1)])])])]),e("div",Ze,[U(E(ie),{href:o.route("student.courses.index"),class:"inline-flex items-center px-4 py-2.5 border border-emerald-300 shadow-sm text-sm font-medium rounded-lg text-emerald-700 bg-white hover:bg-emerald-50 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-all duration-200"},{default:A(()=>[...t[28]||(t[28]=[T(" Cancel ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",disabled:s.processing||!s.subject,class:"inline-flex items-center px-4 py-2.5 bg-gradient-to-r from-emerald-600 to-teal-600 border border-transparent rounded-lg font-semibold text-white shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50"},[s.processing?(l(),a("span",tt,[...t[29]||(t[29]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),T(" Creating... ",-1)])])):(l(),a("span",st,"Create Course"))],8,et)])],32)]),t[31]||(t[31]=e("div",{class:"mt-6 bg-emerald-50 border border-emerald-200 rounded-xl p-4"},[e("div",{class:"flex"},[e("div",{class:"flex-shrink-0"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})])]),e("div",{class:"ml-3"},[e("h3",{class:"text-sm font-semibold text-emerald-800"}," Olilearn Course Generation "),e("div",{class:"mt-2 text-sm text-emerald-700"},[e("p",null," Olilearn AI will create a personalized learning path based on: "),e("ul",{class:"list-disc list-inside mt-1 space-y-1"},[e("li",null,"Your current and target levels"),e("li",null,"Weekly study hours and completion timeline"),e("li",null,"Learning objectives and preferences"),e("li",null,"Subject-specific requirements")]),e("p",{class:"mt-2 font-semibold"}," This may take a few moments as we generate your personalized course outline. ")])])])],-1))])])]),_:1},8,["disable-global-blur"]))}},vt=ce(rt,[["__scopeId","data-v-e959c542"]]);export{vt as default};
