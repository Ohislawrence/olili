import{S as N}from"./StudentLayout-CDBlmZsU.js";import{c as g,w as c,b as f,a as t,i as m,q as Q,y,j as p,t as o,n as x,o as l,B as S,f as i,F as z,k as A,h as u}from"./app-D_aca0XA.js";import{r as j}from"./CheckCircleIcon-4O2guBx4.js";import{r as T}from"./XCircleIcon-BR2_rQb-.js";import"./XMarkIcon-xoIuta9N.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserIcon-JIXnFIax.js";import"./PlusIcon-DeUSzfS1.js";import"./BellIcon-e0znyF-f.js";import"./CreditCardIcon-BaLAM8KO.js";const B={class:"py-6"},$={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},q={class:"mb-8"},D={class:"flex justify-between items-start"},F={class:"mt-1 text-sm text-gray-600"},V={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},L={class:"lg:col-span-2 space-y-6"},O={class:"bg-white shadow-sm rounded-xl border border-gray-100"},P={class:"p-6"},R={class:"text-center"},M={class:"mt-4 text-xl font-bold text-gray-900"},U={class:"mt-2 text-sm text-gray-600"},E={class:"mt-6 grid grid-cols-3 gap-4"},J={class:"text-center"},Y={class:"text-2xl font-bold text-gray-900"},I={class:"text-center"},G={class:"text-2xl font-bold text-gray-900"},H={class:"text-center"},K={class:"text-2xl font-bold text-gray-900"},W={class:"mt-6"},X={class:"flex justify-between text-sm text-gray-600 mb-1"},Z={class:"w-full bg-gray-200 rounded-full h-3"},tt={class:"bg-white shadow-sm rounded-xl border border-gray-100"},et={class:"p-6 space-y-6"},st={class:"flex items-start justify-between mb-3"},rt={class:"text-sm font-medium text-gray-900"},at={class:"text-gray-700 mb-4"},ot={class:"space-y-2"},dt={class:"flex items-center"},lt={class:"flex-1"},it={key:0,class:"text-emerald-600 text-sm"},nt={key:1,class:"text-red-600 text-sm"},mt={key:0,class:"mt-3 p-3 bg-blue-50 rounded-lg"},ut={class:"text-sm text-blue-700"},ct={class:"space-y-6"},xt={class:"bg-white shadow-sm rounded-xl border border-gray-100"},bt={class:"p-6 space-y-3"},gt={class:"text-sm text-gray-600"},ft={class:"text-sm text-gray-600"},yt={class:"text-sm text-gray-600"},pt={class:"text-sm text-gray-600"},ht={class:"bg-white shadow-sm rounded-xl border border-gray-100"},wt={class:"p-6 space-y-3"},vt={key:0,class:"bg-white shadow-sm rounded-xl border border-gray-100"},_t={class:"p-6"},kt={key:0,class:"mb-4"},zt={class:"text-sm text-gray-600"},At={key:1},Ct={class:"text-sm text-gray-600"},Vt={__name:"Result",props:{attempt:Object,questions:Array,user_answers:Array,score_data:Object},setup(s){const w=s,b=(r,e)=>{const a=w.user_answers?.[e],d=r.correct_answer;if(r.type==="multiple_choice")return a===d;if(r.type==="multiple_answer"){if(!Array.isArray(a)||!Array.isArray(d))return!1;const n=[...a].sort(),h=[...d].sort();return JSON.stringify(n)===JSON.stringify(h)}return!1},v=(r,e)=>r.type==="multiple_choice"?e===r.correct_answer:r.type==="multiple_answer"?r.correct_answer?.includes(e):!1,_=(r,e,a)=>{const d=w.user_answers?.[e];return r.type==="multiple_choice"?a===d:r.type==="multiple_answer"?d?.includes(a):!1},k=r=>r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"Not completed",C=r=>{if(typeof r!="number"||isNaN(r))return console.warn("Invalid input for formatTimeTaken:",r),"0s";const e=Math.abs(r),a=Math.floor(e/60),d=e%60,n=d.toString().padStart(2,"0");return a===0?`${d}s`:`${a}m ${n}s`};return(r,e)=>(l(),g(N,null,{default:c(()=>[f(m(Q),{title:`Quiz Result: ${s.attempt.quiz.title}`},null,8,["title"]),t("div",B,[t("div",$,[t("div",q,[t("div",D,[t("div",null,[f(m(y),{href:r.route("student.quizzes.show",s.attempt.quiz.id),class:"text-sm font-medium text-emerald-600 hover:text-emerald-500 mb-2 inline-block"},{default:c(()=>[...e[0]||(e[0]=[p(" ← Back to Quiz ",-1)])]),_:1},8,["href"]),e[1]||(e[1]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Quiz Result",-1)),t("p",F,o(s.attempt.quiz.title)+" • "+o(s.attempt.quiz.course_outline.module.title),1)])])]),t("div",V,[t("div",L,[t("div",O,[t("div",P,[t("div",R,[t("div",{class:x(["mx-auto flex items-center justify-center h-16 w-16 rounded-full",s.attempt.is_passed?"bg-emerald-100":"bg-red-100"])},[s.attempt.is_passed?(l(),g(m(j),{key:0,class:"h-8 w-8 text-emerald-600"})):(l(),g(m(T),{key:1,class:"h-8 w-8 text-red-600"}))],2),t("h2",M,o(s.attempt.is_passed?"Quiz Passed!":"Quiz Not Passed"),1),t("p",U," Attempt #"+o(s.attempt.attempt_number)+" • Completed on "+o(k(s.attempt.completed_at)),1),t("div",E,[t("div",J,[t("p",Y,o(s.attempt.percentage)+"%",1),e[2]||(e[2]=t("p",{class:"text-sm text-gray-600"},"Score",-1))]),t("div",I,[t("p",G,o(s.attempt.score)+"/"+o(s.attempt.quiz.questions?.reduce((a,d)=>a+(d.points||1),0)),1),e[3]||(e[3]=t("p",{class:"text-sm text-gray-600"},"Points",-1))]),t("div",H,[t("p",K,o(C(s.attempt.time_taken_seconds)),1),e[4]||(e[4]=t("p",{class:"text-sm text-gray-600"},"Time Taken",-1))])]),t("div",W,[t("div",X,[t("span",null,"Passing Score: "+o(s.attempt.quiz.passing_score)+"%",1),t("span",null,"Your Score: "+o(s.attempt.percentage)+"%",1)]),t("div",Z,[t("div",{class:x(["h-3 rounded-full transition-all duration-300",s.attempt.is_passed?"bg-emerald-500":"bg-red-500"]),style:S({width:`${Math.min(s.attempt.percentage,100)}%`})},null,6)])])])])]),t("div",tt,[e[6]||(e[6]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-bold text-gray-900"},"Question Review")],-1)),t("div",et,[(l(!0),i(z,null,A(s.attempt.quiz.questions,(a,d)=>(l(),i("div",{key:d,class:x(["border border-gray-200 rounded-xl p-4",{"bg-emerald-50 border-emerald-200":b(a,d),"bg-red-50 border-red-200":!b(a,d)}])},[t("div",st,[t("h3",rt," Question "+o(d+1),1),t("span",{class:x(["inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold",b(a,d)?"bg-emerald-100 text-emerald-800":"bg-red-100 text-red-800"])},o(b(a,d)?"Correct":"Incorrect"),3)]),t("p",at,o(a.question),1),t("div",ot,[(l(!0),i(z,null,A(a.options,(n,h)=>(l(),i("div",{key:h,class:x(["p-3 rounded-lg border",v(a,n)?"bg-emerald-100 border-emerald-300 text-emerald-800":_(a,d,n)?"bg-red-100 border-red-300 text-red-800":"bg-gray-50 border-gray-200 text-gray-700"])},[t("div",dt,[t("span",lt,o(n),1),v(a,n)?(l(),i("span",it," ✓ Correct Answer ")):_(a,d,n)?(l(),i("span",nt," ✗ Your Answer ")):u("",!0)])],2))),128))]),a.explanation?(l(),i("div",mt,[e[5]||(e[5]=t("p",{class:"text-sm font-semibold text-blue-800 mb-1"},"Explanation:",-1)),t("p",ut,o(a.explanation),1)])):u("",!0)],2))),128))])])]),t("div",ct,[t("div",xt,[e[11]||(e[11]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-bold text-gray-900"},"Quiz Information")],-1)),t("div",bt,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-700"},"Quiz Title",-1)),t("p",gt,o(s.attempt.quiz.title),1)]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-700"},"Course",-1)),t("p",ft,o(s.attempt.quiz.course_outline.module.title),1)]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-700"},"Attempt Number",-1)),t("p",yt,"#"+o(s.attempt.attempt_number),1)]),t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-700"},"Completed",-1)),t("p",pt,o(k(s.attempt.completed_at)),1)])])]),t("div",ht,[e[15]||(e[15]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-bold text-gray-900"},"Actions")],-1)),t("div",wt,[f(m(y),{href:r.route("student.quizzes.show",s.attempt.quiz.id),class:"w-full flex items-center justify-center px-4 py-2.5 border border-emerald-300 text-sm font-semibold rounded-lg text-emerald-700 bg-white hover:bg-emerald-50 shadow-sm hover:shadow-md transition-all duration-200"},{default:c(()=>[...e[12]||(e[12]=[p(" View Quiz Details ",-1)])]),_:1},8,["href"]),s.attempt.quiz.can_user_attempt?(l(),g(m(y),{key:0,href:r.route("student.quizzes.start",s.attempt.quiz.id),method:"post",as:"button",class:"w-full flex items-center justify-center px-4 py-2.5 border border-transparent text-sm font-semibold rounded-lg text-white bg-emerald-600 hover:bg-emerald-700 shadow-md hover:shadow-lg transition-all duration-200"},{default:c(()=>[...e[13]||(e[13]=[p(" Try Again ",-1)])]),_:1},8,["href"])):u("",!0),f(m(y),{href:r.route("student.courses.learn",{course:s.attempt.quiz.course_outline.module.course.id,topic:s.attempt.quiz.course_outline.id}),class:"w-full flex items-center justify-center px-4 py-2.5 border border-emerald-300 text-sm font-semibold rounded-lg text-emerald-700 bg-white hover:bg-emerald-50 shadow-sm hover:shadow-md transition-all duration-200"},{default:c(()=>[...e[14]||(e[14]=[p(" Continue Learning ",-1)])]),_:1},8,["href"])])]),s.attempt.ai_feedback||s.attempt.manual_feedback?(l(),i("div",vt,[e[18]||(e[18]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-bold text-gray-900"},"Feedback")],-1)),t("div",_t,[s.attempt.ai_feedback?(l(),i("div",kt,[e[16]||(e[16]=t("p",{class:"text-sm font-semibold text-gray-700 mb-2"},"AI Feedback",-1)),t("p",zt,o(s.attempt.ai_feedback.overview),1)])):u("",!0),s.attempt.manual_feedback?(l(),i("div",At,[e[17]||(e[17]=t("p",{class:"text-sm font-semibold text-gray-700 mb-2"},"Tutor Feedback",-1)),t("p",Ct,o(s.attempt.manual_feedback),1)])):u("",!0)])])):u("",!0)])])])])]),_:1}))}};export{Vt as default};
