import{g as f,O as K,d as W,c as X,w as y,b as l,a as e,i,q as Y,f as d,h as x,y as C,j as g,t as n,e as _,x as P,s as A,o as a,F as U,k as R,n as T,z as u}from"./app-RWparKzM.js";import{A as Z}from"./AdminLayout--edVSMXj.js";import{_ as ee}from"./Pagination-DkGmimez.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as se}from"./ArrowDownTrayIcon-CW8iJwpa.js";import{r as V}from"./ChatBubbleLeftRightIcon-BHCYXGLN.js";import{r as oe,a as le}from"./NewspaperIcon-BsYQsrCP.js";import{r as D}from"./CheckCircleIcon-CCNNkvGD.js";import{r as ne}from"./ClockIcon-R12Sbv2B.js";import{r as ie}from"./CalendarIcon-DUeWifTe.js";import{r as re}from"./HeartIcon-C0DnYvoT.js";import{r as ae}from"./EyeIcon-C6EZTv3J.js";import"./XMarkIcon-Bxj87fHb.js";import"./UserIcon-CDktt_x5.js";import"./UsersIcon-BuHtuOpY.js";import"./ChartBarIcon-DO2uM4cm.js";import"./CurrencyDollarIcon-M8nWOnAT.js";const de={class:"py-6"},ce={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},ue={class:"mb-8"},pe={class:"flex justify-between items-center"},me={class:"flex space-x-3"},xe={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},ge={class:"bg-white rounded-lg shadow p-6"},ve={class:"flex items-center"},he={class:"flex-shrink-0"},fe={class:"ml-4"},ye={class:"text-2xl font-bold text-gray-900"},_e={class:"bg-white rounded-lg shadow p-6"},be={class:"flex items-center"},we={class:"flex-shrink-0"},ke={class:"ml-4"},Ce={class:"text-2xl font-bold text-gray-900"},je={class:"bg-white rounded-lg shadow p-6"},Ae={class:"flex items-center"},Se={class:"flex-shrink-0"},$e={class:"ml-4"},Pe={class:"text-2xl font-bold text-gray-900"},Ue={class:"bg-white rounded-lg shadow p-6"},Re={class:"flex items-center"},Te={class:"flex-shrink-0"},Ve={class:"ml-4"},De={class:"text-2xl font-bold text-gray-900"},Me={class:"mb-6 bg-white rounded-lg shadow p-4"},Be={class:"flex flex-wrap gap-4 items-center"},Fe={class:"flex-1 min-w-[300px]"},Oe={key:0,class:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-4"},Ne={class:"flex items-center justify-between"},qe={class:"flex items-center"},ze={class:"text-sm font-medium text-blue-900"},Ee={class:"flex space-x-2"},Ie=["disabled"],Le={class:"bg-white shadow rounded-lg overflow-hidden"},Qe={class:"overflow-x-auto"},Ge={class:"min-w-full divide-y divide-gray-200"},He={class:"bg-gray-50"},Je={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12"},Ke=["checked"],We={class:"bg-white divide-y divide-gray-200"},Xe={class:"px-6 py-4 whitespace-nowrap"},Ye=["checked","onChange"],Ze={class:"px-6 py-4"},et={class:"flex items-center"},tt={key:0,class:"flex-shrink-0 h-10 w-10"},st={class:"ml-4"},ot={class:"text-sm font-medium text-gray-900"},lt={class:"text-sm text-gray-500 line-clamp-2"},nt={class:"px-6 py-4 whitespace-nowrap"},it={class:"flex items-center"},rt={class:"flex-shrink-0 h-8 w-8"},at=["src","alt"],dt={class:"ml-3"},ct={class:"text-sm font-medium text-gray-900"},ut={class:"text-xs text-gray-500"},pt={class:"px-6 py-4 whitespace-nowrap"},mt={class:"px-6 py-4 whitespace-nowrap"},xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},gt={class:"flex space-x-3"},vt={class:"flex items-center"},ht={class:"flex items-center"},ft={class:"flex items-center"},yt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},_t={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},bt={class:"flex space-x-2"},wt=["onClick"],kt=["onClick"],Ct=["onClick"],jt=["onClick"],At={class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},St={class:"mt-8"},$t={class:"bg-white shadow rounded-lg overflow-hidden"},Pt={class:"grid grid-cols-1 md:grid-cols-5 gap-4 p-6"},Ut=["src","alt"],Rt={class:"text-sm font-medium text-gray-900"},Tt={class:"text-xs text-gray-500"},Vt={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50"},Dt={class:"bg-white rounded-lg p-6 max-w-md w-full"},Mt={class:"flex justify-end space-x-3"},Bt=["disabled"],Ft={__name:"Index",props:{posts:Object,stats:Object,recentUsers:Array,filters:Object},setup(p){const v=p,r=f([]),m=f(""),b=f(!1),h=f(""),j=f(null),c=K({search:v.filters.search||"",status:v.filters.status||"",type:v.filters.type||""}),M={discussion:"bg-blue-100 text-blue-800",question:"bg-purple-100 text-purple-800",achievement:"bg-green-100 text-green-800",resource:"bg-yellow-100 text-yellow-800"},B={approved:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",flagged:"bg-red-100 text-red-800"},S=W(()=>v.posts.data.length>0&&r.value.length===v.posts.data.length);let $=null;const F=()=>{clearTimeout($),$=setTimeout(()=>{w()},300)},w=()=>{u.get(route("admin.community.index"),c,{preserveState:!0,replace:!0})},O=()=>{c.search="",c.status="",c.type="",w()},N=o=>{const t=r.value.indexOf(o);t>-1?r.value.splice(t,1):r.value.push(o)},q=()=>{S.value?r.value=[]:r.value=v.posts.data.map(o=>o.id)},z=()=>{r.value=[],m.value=""},E=()=>{if(!(!m.value||r.value.length===0)){if(m.value==="reject"){alert("For bulk rejection, please reject posts individually or contact support.");return}u.post(route("admin.community.bulk-action"),{action:m.value,ids:r.value},{onSuccess:()=>{r.value=[],m.value=""}})}},I=o=>{u.post(route("admin.community.posts.approve",o),{},{onSuccess:()=>{u.reload()}})},L=o=>{j.value=o,b.value=!0},Q=()=>{h.value&&u.post(route("admin.community.posts.reject",j.value),{reason:h.value},{onSuccess:()=>{b.value=!1,h.value="",j.value=null,u.reload()}})},G=o=>{u.post(route("admin.community.posts.pin",o),{},{onSuccess:()=>{u.reload()}})},H=o=>{u.post(route("admin.community.posts.unpin",o),{},{onSuccess:()=>{u.reload()}})},J=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(o,t)=>(a(),X(Z,null,{default:y(()=>[l(i(Y),{title:"Community Moderation"}),e("div",de,[e("div",ce,[e("div",ue,[e("div",pe,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Community Moderation"),e("p",{class:"mt-2 text-gray-600"}," Manage and moderate community posts and comments ")],-1)),e("div",me,[l(i(C),{href:o.route("admin.community.export"),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},{default:y(()=>[l(i(se),{class:"h-4 w-4 mr-2"}),t[6]||(t[6]=g(" Export ",-1))]),_:1},8,["href"]),l(i(C),{href:o.route("admin.community.comments.index"),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"},{default:y(()=>[l(i(V),{class:"h-4 w-4 mr-2"}),t[7]||(t[7]=g(" Moderate Comments ",-1))]),_:1},8,["href"])])])]),e("div",xe,[e("div",ge,[e("div",ve,[e("div",he,[l(i(oe),{class:"h-8 w-8 text-blue-600"})]),e("div",fe,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Posts",-1)),e("p",ye,n(p.stats.total),1)])])]),e("div",_e,[e("div",be,[e("div",we,[l(i(D),{class:"h-8 w-8 text-green-600"})]),e("div",ke,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-gray-600"},"Approved",-1)),e("p",Ce,n(p.stats.approved),1)])])]),e("div",je,[e("div",Ae,[e("div",Se,[l(i(ne),{class:"h-8 w-8 text-yellow-600"})]),e("div",$e,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Pending",-1)),e("p",Pe,n(p.stats.pending),1)])])]),e("div",Ue,[e("div",Re,[e("div",Te,[l(i(ie),{class:"h-8 w-8 text-purple-600"})]),e("div",Ve,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-gray-600"},"Today",-1)),e("p",De,n(p.stats.today),1)])])])]),e("div",Me,[e("div",Be,[e("div",Fe,[_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>c.search=s),type:"text",placeholder:"Search posts, users, or content...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onInput:F},null,544),[[P,c.search]])]),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>c.status=s),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:w},[...t[13]||(t[13]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"flagged"},"Flagged",-1)])],544),[[A,c.status]]),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>c.type=s),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:w},[...t[14]||(t[14]=[e("option",{value:""},"All Types",-1),e("option",{value:"discussion"},"Discussion",-1),e("option",{value:"question"},"Question",-1),e("option",{value:"achievement"},"Achievement",-1),e("option",{value:"resource"},"Resource",-1)])],544),[[A,c.type]]),e("button",{onClick:O,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Clear ")])]),r.value.length>0?(a(),d("div",Oe,[e("div",Ne,[e("div",qe,[l(i(D),{class:"h-5 w-5 text-blue-600 mr-2"}),e("span",ze,n(r.value.length)+" posts selected ",1)]),e("div",Ee,[_(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>m.value=s),class:"px-3 py-1 border border-gray-300 rounded text-sm"},[...t[15]||(t[15]=[e("option",{value:""},"Bulk Actions",-1),e("option",{value:"approve"},"Approve",-1),e("option",{value:"reject"},"Reject",-1),e("option",{value:"pin"},"Pin",-1),e("option",{value:"unpin"},"Unpin",-1),e("option",{value:"delete"},"Delete",-1)])],512),[[A,m.value]]),e("button",{onClick:E,disabled:!m.value,class:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 disabled:opacity-50"}," Apply ",8,Ie),e("button",{onClick:z,class:"px-3 py-1 text-gray-600 hover:text-gray-800 text-sm"}," Clear ")])])])):x("",!0),e("div",Le,[e("div",Qe,[e("table",Ge,[e("thead",He,[e("tr",null,[e("th",Je,[e("input",{type:"checkbox",checked:S.value,onChange:q,class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,40,Ke)]),t[16]||(t[16]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Post ",-1)),t[17]||(t[17]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User ",-1)),t[18]||(t[18]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type ",-1)),t[19]||(t[19]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),t[20]||(t[20]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Stats ",-1)),t[21]||(t[21]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created ",-1)),t[22]||(t[22]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",We,[(a(!0),d(U,null,R(p.posts.data,s=>(a(),d("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Xe,[e("input",{type:"checkbox",checked:r.value.includes(s.id),onChange:k=>N(s.id),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,40,Ye)]),e("td",Ze,[e("div",et,[s.is_pinned?(a(),d("div",tt,[l(i(le),{class:"h-5 w-5 text-yellow-500"})])):x("",!0),e("div",st,[e("div",ot,[l(i(C),{href:o.route("admin.community.posts.show",s.id),class:"hover:text-blue-600"},{default:y(()=>[g(n(s.title),1)]),_:2},1032,["href"])]),e("div",lt,n(s.excerpt),1)])])]),e("td",nt,[e("div",it,[e("div",rt,[e("img",{src:s.user.profile_photo_url,alt:s.user.name,class:"h-8 w-8 rounded-full"},null,8,at)]),e("div",dt,[e("div",ct,n(s.user.name),1),e("div",ut,n(s.user.email),1)])])]),e("td",pt,[e("span",{class:T(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",M[s.type]])},n(s.type),3)]),e("td",mt,[e("span",{class:T(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",B[s.is_approved?"approved":"pending"]])},n(s.is_approved?"Approved":"Pending"),3)]),e("td",xt,[e("div",gt,[e("span",vt,[l(i(re),{class:"h-4 w-4 text-red-400 mr-1"}),g(" "+n(s.like_count),1)]),e("span",ht,[l(i(V),{class:"h-4 w-4 text-blue-400 mr-1"}),g(" "+n(s.comment_count),1)]),e("span",ft,[l(i(ae),{class:"h-4 w-4 text-gray-400 mr-1"}),g(" "+n(s.views),1)])])]),e("td",yt,n(J(s.created_at)),1),e("td",_t,[e("div",bt,[l(i(C),{href:o.route("admin.community.posts.show",s.id),class:"text-blue-600 hover:text-blue-900"},{default:y(()=>[...t[23]||(t[23]=[g(" View ",-1)])]),_:1},8,["href"]),s.is_approved?x("",!0):(a(),d("button",{key:0,onClick:k=>I(s.id),class:"text-green-600 hover:text-green-900"}," Approve ",8,wt)),s.is_approved?x("",!0):(a(),d("button",{key:1,onClick:k=>L(s.id),class:"text-red-600 hover:text-red-900"}," Reject ",8,kt)),s.is_pinned?x("",!0):(a(),d("button",{key:2,onClick:k=>G(s.id),class:"text-yellow-600 hover:text-yellow-900"}," Pin ",8,Ct)),s.is_pinned?(a(),d("button",{key:3,onClick:k=>H(s.id),class:"text-gray-600 hover:text-gray-900"}," Unpin ",8,jt)):x("",!0)])])]))),128))])])]),e("div",At,[l(ee,{links:p.posts.links},null,8,["links"])])]),e("div",St,[t[24]||(t[24]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Recent Active Users",-1)),e("div",$t,[e("div",Pt,[(a(!0),d(U,null,R(p.recentUsers,s=>(a(),d("div",{key:s.id,class:"flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg"},[e("img",{src:s.profile_photo_url,alt:s.name,class:"h-10 w-10 rounded-full"},null,8,Ut),e("div",null,[e("div",Rt,n(s.name),1),e("div",Tt,n(s.community_posts_count)+" posts ",1)])]))),128))])])]),b.value?(a(),d("div",Vt,[e("div",Dt,[t[25]||(t[25]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Reject Post ",-1)),_(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>h.value=s),rows:"4",placeholder:"Enter rejection reason...",class:"w-full px-3 py-2 border border-gray-300 rounded-md mb-4"},null,512),[[P,h.value]]),e("div",Mt,[e("button",{onClick:t[5]||(t[5]=s=>b.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancel "),e("button",{onClick:Q,disabled:!h.value,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50"}," Reject ",8,Bt)])])])):x("",!0)])])]),_:1}))}},ts=te(Ft,[["__scopeId","data-v-87e321aa"]]);export{ts as default};
