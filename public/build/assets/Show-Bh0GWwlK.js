import{c as C,w as b,b as d,a as t,h as a,p as V,x as $,t as n,i as u,f as i,g as c,n as y,A as D,o as l,F as h,j as v,k as L,y as j}from"./app-9iTwA3vC.js";import{A as B}from"./AdminLayout-BNATRJWW.js";import{r as I}from"./ArrowLeftIcon-BfYZPnun.js";import{r as O}from"./PencilIcon-CUPf8DWf.js";import{r as Q}from"./PlayIcon-C8cuJ9yP.js";import{r as F}from"./PauseIcon-D9sx26wQ.js";import{r as _}from"./CheckCircleIcon-gOQAQdUW.js";import{r as H}from"./TrashIcon-A0AMQ3OF.js";import{r as w}from"./DocumentTextIcon-1A8FCd45.js";import{r as M}from"./QuestionMarkCircleIcon-C-3dUj1X.js";import"./DropdownLink-BJxGAADP.js";import"./NavLink-CVNpfdyq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./XMarkIcon-DR50bQrw.js";import"./UsersIcon-Dq-ijHz8.js";import"./ChatBubbleLeftRightIcon-B5E4Bl1m.js";import"./ChartBarIcon-DGOEscCD.js";import"./CurrencyDollarIcon-BD-2biuk.js";import"./EyeIcon-DsHcOT47.js";const R={class:"py-6"},W={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},G={class:"mb-8"},J={class:"flex justify-between items-start"},K={class:"flex items-center space-x-3"},X={class:"mt-1 text-sm text-gray-600"},Y={class:"flex space-x-3"},Z={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},tt={class:"lg:col-span-2 space-y-6"},et={class:"bg-white shadow rounded-lg"},st={class:"p-6"},rt={class:"mb-6"},ot={class:"flex justify-between items-center mb-4"},nt={class:"text-3xl font-bold text-gray-900 mt-1"},lt={class:"text-right"},it={class:"w-full bg-gray-200 rounded-full h-3"},dt={class:"mt-2 text-sm text-gray-500"},at={class:"space-y-4"},ct={class:"flex justify-between items-center mb-2"},mt={class:"font-medium text-gray-900"},ut={class:"text-sm text-gray-500"},gt={class:"w-full bg-gray-200 rounded-full h-2"},xt={class:"mt-2 grid grid-cols-2 gap-2"},ft={class:"text-xs text-gray-600 truncate"},yt={key:0,class:"bg-white shadow rounded-lg"},pt={class:"p-6"},bt={class:"space-y-4"},ht={class:"flex items-center space-x-3"},vt={class:"text-sm font-medium text-gray-900"},_t={class:"text-xs text-gray-500"},wt={key:0},kt={class:"text-right"},At={class:"text-xs text-gray-500"},Ct={key:0,class:"text-xs text-gray-700"},$t={class:"space-y-6"},Dt={class:"bg-white shadow rounded-lg"},jt={class:"p-6"},Mt={class:"flex items-center space-x-3 mb-4"},Nt={class:"flex-shrink-0"},St={class:"h-12 w-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-lg"},Tt={class:"text-sm font-medium text-gray-900"},zt={class:"text-sm text-gray-500"},Et={class:"space-y-3"},Pt={class:"text-sm text-gray-900"},qt={class:"text-sm text-gray-900"},Ut={class:"bg-white shadow rounded-lg"},Vt={class:"p-6"},Lt={class:"space-y-3"},Bt={class:"text-sm text-gray-900"},It={class:"text-sm text-gray-900"},Ot={class:"text-sm text-gray-900"},Qt={class:"text-sm text-gray-900"},Ft={class:"text-sm text-gray-900"},Ht={class:"text-sm text-gray-900"},Rt={class:"bg-white shadow rounded-lg"},Wt={class:"p-6 space-y-3"},ge={__name:"Show",props:{course:Object,enrollment:Object,progress:Object,recentActivity:Array},setup(r){const p=r,N=s=>({enrolled:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",paused:"bg-amber-100 text-amber-800",completed:"bg-teal-100 text-teal-800",dropped:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",S=s=>s>=80?"bg-green-500":s>=50?"bg-teal-500":s>=25?"bg-amber-500":"bg-red-500",g=s=>{if(!s)return"N/A";const e=new Date(s);return isNaN(e.getTime())?"Invalid date":e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},T=s=>{if(!s)return"";const e=new Date(s);if(isNaN(e.getTime()))return"";const m=new Date-e,x=Math.floor(m/(1e3*60*60));return x<1?`${Math.floor(m/6e4)} min ago`:x<24?`${x} hours ago`:x<168?`${Math.floor(x/24)} days ago`:g(s)},k=s=>!s.topics||!Array.isArray(s.topics)?0:s.topics.filter(e=>A(e)).length,z=s=>{const e=s.topics_count||s.topics?.length||0;return e===0?0:k(s)/e*100},A=s=>s.is_completed_for_user!==void 0?s.is_completed_for_user:s.is_completed!==void 0?s.is_completed:!!p.progress?.completed_topic_ids?.includes(s.id),E=s=>({content_view:w,quiz_attempt:M,topic_completion:_,lesson_completed:_,quiz_completed:M,assignment_submitted:w})[s]||w,P=s=>({content_view:"bg-blue-500",quiz_attempt:"bg-purple-500",topic_completion:"bg-green-500",lesson_completed:"bg-green-500",quiz_completed:"bg-purple-500",assignment_submitted:"bg-orange-500"})[s]||"bg-gray-500",q=s=>({content_view:"Content Viewed",quiz_attempt:"Quiz Attempted",topic_completion:"Topic Completed",lesson_completed:"Lesson Completed",quiz_completed:"Quiz Completed",assignment_submitted:"Assignment Submitted"})[s]||s.replace("_"," ").replace(/\b\w/g,o=>o.toUpperCase()),f=s=>{confirm({active:"Are you sure you want to mark this enrollment as active?",paused:"Are you sure you want to pause this enrollment?",completed:"Are you sure you want to mark this enrollment as completed?",dropped:"Are you sure you want to drop this enrollment? This action cannot be undone."}[s])&&j.patch(route("admin.courses.enrollments.update",{course:p.course.id,enrollment:p.enrollment.id}),{status:s},{preserveScroll:!0,onSuccess:()=>{j.reload({only:["enrollment"]})}})};return(s,e)=>(l(),C(B,null,{default:b(()=>[d(a(V),{title:`Enrollment - ${r.enrollment.user.name}`},null,8,["title"]),t("div",R,[t("div",W,[t("div",G,[t("div",J,[t("div",null,[t("div",K,[d(a($),{href:s.route("admin.courses.enrollments.index",r.course.id),class:"text-gray-400 hover:text-gray-600"},{default:b(()=>[d(a(I),{class:"h-5 w-5"})]),_:1},8,["href"]),t("div",null,[e[4]||(e[4]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Enrollment Details",-1)),t("p",X,n(r.course.title)+" • "+n(r.enrollment.user.name),1)])])]),t("div",Y,[d(a($),{href:s.route("admin.courses.enrollments.edit",{course:r.course.id,enrollment:r.enrollment.id}),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"},{default:b(()=>[d(a(O),{class:"h-4 w-4 mr-2"}),e[5]||(e[5]=u(" Edit Enrollment ",-1))]),_:1},8,["href"])])])]),t("div",Z,[t("div",tt,[t("div",et,[e[8]||(e[8]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Student Progress")],-1)),t("div",st,[t("div",rt,[t("div",ot,[t("div",null,[e[6]||(e[6]=t("h4",{class:"text-sm font-medium text-gray-900"},"Overall Progress",-1)),t("p",nt,n(Math.round(r.enrollment.progress_percentage))+"% ",1)]),t("div",lt,[t("span",{class:y(["inline-flex items-center px-3 py-1 rounded-full text-sm font-medium",N(r.enrollment.status)])},n(r.enrollment.status),3)])]),t("div",it,[t("div",{class:y(["h-3 rounded-full transition-all duration-300",S(r.enrollment.progress_percentage)]),style:D({width:`${r.enrollment.progress_percentage}%`})},null,6)]),t("div",dt,n(r.progress.completed_topics)+" of "+n(r.progress.total_topics)+" topics completed ",1)]),t("div",at,[e[7]||(e[7]=t("h4",{class:"text-sm font-medium text-gray-900"},"Module Progress",-1)),(l(!0),i(h,null,v(r.course.modules,o=>(l(),i("div",{key:o.id,class:"border border-gray-200 rounded-lg p-4"},[t("div",ct,[t("h5",mt,n(o.title),1),t("span",ut,n(k(o))+"/"+n(o.topics_count||o.topics?.length||0)+" topics ",1)]),t("div",gt,[t("div",{class:"h-2 rounded-full bg-blue-500 transition-all duration-300",style:D({width:`${z(o)}%`})},null,4)]),t("div",xt,[(l(!0),i(h,null,v(o.topics,m=>(l(),i("div",{key:m.id,class:"flex items-center"},[t("div",{class:y(["w-3 h-3 rounded-full mr-2",A(m)?"bg-green-500":"bg-gray-300"])},null,2),t("span",ft,n(m.title),1)]))),128))])]))),128))])])]),r.recentActivity&&r.recentActivity.length>0?(l(),i("div",yt,[e[9]||(e[9]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Recent Activity")],-1)),t("div",pt,[t("div",bt,[(l(!0),i(h,null,v(r.recentActivity,o=>(l(),i("div",{key:o.id,class:"flex items-center justify-between p-3 border border-gray-200 rounded-lg"},[t("div",ht,[t("div",{class:y(["flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center",P(o.activity_type)])},[(l(),C(L(E(o.activity_type)),{class:"h-4 w-4 text-white"}))],2),t("div",null,[t("div",vt,n(q(o.activity_type)),1),t("div",_t,[u(n(o.topic_title||"Activity")+" ",1),o.module_title?(l(),i("span",wt,"• "+n(o.module_title),1)):c("",!0)])])]),t("div",kt,[t("div",At,n(T(o.created_at)),1),o.time_spent_minutes?(l(),i("div",Ct,n(o.time_spent_minutes)+" min ",1)):c("",!0)])]))),128))])])])):c("",!0)]),t("div",$t,[t("div",Dt,[e[12]||(e[12]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Student Information")],-1)),t("div",jt,[t("div",Mt,[t("div",Nt,[t("div",St,n(r.enrollment.user?.name?.charAt(0).toUpperCase()||"U"),1)]),t("div",null,[t("h4",Tt,n(r.enrollment.user?.name||"Unknown User"),1),t("p",zt,n(r.enrollment.user?.email||"No email"),1)])]),t("dl",Et,[t("div",null,[e[10]||(e[10]=t("dt",{class:"text-xs text-gray-500"},"Student Profile",-1)),t("dd",Pt,n(r.enrollment.student_profile?.current_level||"Not set"),1)]),t("div",null,[e[11]||(e[11]=t("dt",{class:"text-xs text-gray-500"},"Weekly Study Hours",-1)),t("dd",qt,n(r.enrollment.student_profile?.weekly_study_hours||0)+" hours ",1)])])])]),t("div",Ut,[e[19]||(e[19]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Enrollment Details")],-1)),t("div",Vt,[t("dl",Lt,[t("div",null,[e[13]||(e[13]=t("dt",{class:"text-xs text-gray-500"},"Enrollment Date",-1)),t("dd",Bt,n(g(r.enrollment.enrolled_at)),1)]),t("div",null,[e[14]||(e[14]=t("dt",{class:"text-xs text-gray-500"},"Start Date",-1)),t("dd",It,n(g(r.enrollment.started_at)||"Not started"),1)]),t("div",null,[e[15]||(e[15]=t("dt",{class:"text-xs text-gray-500"},"Completion Date",-1)),t("dd",Ot,n(g(r.enrollment.completed_at)||"Not completed"),1)]),t("div",null,[e[16]||(e[16]=t("dt",{class:"text-xs text-gray-500"},"Last Accessed",-1)),t("dd",Qt,n(g(r.enrollment.last_accessed_at)||"Never"),1)]),t("div",null,[e[17]||(e[17]=t("dt",{class:"text-xs text-gray-500"},"Progress",-1)),t("dd",Ft,n(r.enrollment.progress_percentage||0)+"% ",1)]),t("div",null,[e[18]||(e[18]=t("dt",{class:"text-xs text-gray-500"},"Time Spent",-1)),t("dd",Ht,n(r.enrollment.actual_duration_hours||r.enrollment.time_spent_hours||0)+" hours ",1)])])])]),t("div",Rt,[e[24]||(e[24]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-semibold text-gray-900"},"Quick Actions")],-1)),t("div",Wt,[r.enrollment.status!=="active"?(l(),i("button",{key:0,onClick:e[0]||(e[0]=o=>f("active")),class:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-green-600 hover:bg-green-700"},[d(a(Q),{class:"h-4 w-4 mr-2"}),e[20]||(e[20]=u(" Mark as Active ",-1))])):c("",!0),r.enrollment.status!=="paused"?(l(),i("button",{key:1,onClick:e[1]||(e[1]=o=>f("paused")),class:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-amber-600 hover:bg-amber-700"},[d(a(F),{class:"h-4 w-4 mr-2"}),e[21]||(e[21]=u(" Pause Enrollment ",-1))])):c("",!0),r.enrollment.status!=="completed"?(l(),i("button",{key:2,onClick:e[2]||(e[2]=o=>f("completed")),class:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"},[d(a(_),{class:"h-4 w-4 mr-2"}),e[22]||(e[22]=u(" Mark as Completed ",-1))])):c("",!0),r.enrollment.status!=="dropped"?(l(),i("button",{key:3,onClick:e[3]||(e[3]=o=>f("dropped")),class:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700"},[d(a(H),{class:"h-4 w-4 mr-2"}),e[23]||(e[23]=u(" View Enrollments ",-1))])):c("",!0)])])])])])])]),_:1}))}};export{ge as default};
