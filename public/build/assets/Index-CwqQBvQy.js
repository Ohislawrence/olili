import{r as P,d as $,P as F,c as h,w as x,b as r,a as e,h as l,p as B,x as v,i as n,e as y,s as N,q as D,f as m,g as _,o as i,F as w,j as C,t as o,n as k,y as S}from"./app-9iTwA3vC.js";import{A as L}from"./AdminLayout-BNATRJWW.js";import{r as M}from"./PlusIcon-B5yWEhlc.js";import{a as E,r as O}from"./XMarkIcon-DR50bQrw.js";import{r as U}from"./ClockIcon-DtrScC2X.js";import"./DropdownLink-BJxGAADP.js";import"./NavLink-CVNpfdyq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UsersIcon-Dq-ijHz8.js";import"./ChatBubbleLeftRightIcon-B5E4Bl1m.js";import"./ChartBarIcon-DGOEscCD.js";import"./CurrencyDollarIcon-BD-2biuk.js";import"./EyeIcon-DsHcOT47.js";const z={class:"py-6"},H={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},I={class:"md:flex md:items-center md:justify-between mb-6"},R={class:"mt-4 md:mt-0 md:ml-4"},q={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},G={class:"bg-white shadow rounded-lg p-4 mb-6"},J={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},K={class:"bg-white shadow overflow-hidden sm:rounded-md"},Q={class:"divide-y divide-gray-200"},W={class:"px-4 py-4 sm:px-6"},X={class:"flex items-center justify-between"},Y={class:"flex-1 min-w-0"},Z={class:"flex items-center"},ee={class:"flex-shrink-0 h-16 w-16 mr-4"},te=["src","alt"],se={key:1,class:"h-16 w-16 rounded-lg bg-gradient-to-br from-emerald-100 to-teal-100 flex items-center justify-center"},re={class:"flex items-center"},oe={class:"text-lg font-medium text-gray-900 truncate"},le={class:"mt-1"},ie={class:"text-sm text-gray-600"},ae={class:"flex items-center mt-1"},ne={class:"text-sm text-gray-500"},de={key:0},me={class:"text-sm text-gray-500"},ue={class:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2"},ce=["onClick"],fe={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},ge={class:"flex justify-between"},xe={class:"text-sm text-gray-700"},ve={class:"font-medium"},pe={class:"font-medium"},be={class:"font-medium"},he={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Ne={__name:"Index",props:{courses:Object,filters:Object,stats:Object},setup(d){const u=d,c=P({search:u.filters.search||"",visibility:u.filters.visibility||""});let b=null;const j=()=>{clearTimeout(b),b=setTimeout(()=>{p()},300)},p=()=>{S.get(route("admin.courses.index"),c.value,{preserveState:!0,replace:!0})},V=()=>{c.value={search:"",visibility:""},p()},T=a=>({public:"bg-green-100 text-green-800",private:"bg-gray-100 text-gray-800",unlisted:"bg-yellow-100 text-yellow-800"})[a]||"bg-gray-100 text-gray-800",f=$(()=>({total_courses:u.stats?.total_courses||0,active_courses:u.stats?.active_courses||0,completion_rate:u.stats?.completion_rate||0,avg_progress:u.stats?.avg_progress||0})),A=a=>{confirm(`Are you sure you want to delete "${a.title}"?`)&&S.delete(route("admin.courses.destroy",a.id),{preserveScroll:!0,onSuccess:()=>{console.log("Course deleted successfully")},onError:t=>{console.error("Delete failed:",t),alert("Failed to delete course")}})};return(a,t)=>{const g=F("StatsCard");return i(),h(L,null,{default:x(()=>[r(l(B),{title:"Admin Courses"}),e("div",z,[e("div",H,[e("div",I,[t[3]||(t[3]=e("div",{class:"flex-1 min-w-0"},[e("h2",{class:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate"}," Public Courses "),e("p",{class:"mt-1 text-sm text-gray-500"}," Create and manage courses for students to enroll in ")],-1)),e("div",R,[r(l(v),{href:a.route("admin.courses.create"),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500"},{default:x(()=>[r(l(M),{class:"h-4 w-4 mr-2"}),t[2]||(t[2]=n(" Create Course ",-1))]),_:1},8,["href"])])]),e("div",q,[r(g,{title:"Total Courses",value:f.value.total_courses,icon:"academic-cap",color:"blue"},null,8,["value"]),r(g,{title:"Active Courses",value:f.value.active_courses,icon:"chart-bar",color:"green"},null,8,["value"]),r(g,{title:"Completion Rate",value:`${f.value.completion_rate}%`,icon:"trophy",color:"purple"},null,8,["value"]),r(g,{title:"Avg Progress",value:`${f.value.avg_progress}%`,icon:"check-circle",color:"orange"},null,8,["value"])]),e("div",G,[e("div",J,[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Search",-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>c.value.search=s),type:"text",placeholder:"Search courses...",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 sm:text-sm",onInput:j},null,544),[[N,c.value.search]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Visibility",-1)),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>c.value.visibility=s),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 sm:text-sm",onChange:p},[...t[5]||(t[5]=[e("option",{value:""},"All",-1),e("option",{value:"public"},"Public",-1),e("option",{value:"private"},"Private",-1),e("option",{value:"unlisted"},"Unlisted",-1)])],544),[[D,c.value.visibility]])]),e("div",{class:"flex items-end"},[e("button",{onClick:V,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500"}," Reset Filters ")])])]),e("div",K,[e("ul",Q,[(i(!0),m(w,null,C(d.courses.data,s=>(i(),m("li",{key:s.id},[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[s.thumbnail_url?(i(),m("img",{key:0,src:s.thumbnail_url,alt:s.title,class:"h-16 w-16 rounded-lg object-cover"},null,8,te)):(i(),m("div",se,[r(l(E),{class:"h-8 w-8 text-emerald-600"})]))]),e("div",null,[e("div",re,[e("h3",oe,o(s.title),1),e("span",{class:k([T(s.visibility),"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(s.visibility),3)]),e("div",le,[e("p",ie,o(s.subject)+" • "+o(s.level),1),e("div",ae,[r(l(O),{class:"h-4 w-4 text-gray-400 mr-1"}),e("span",ne,[n(o(s.current_enrollment)+" enrolled ",1),s.enrollment_limit?(i(),m("span",de," / "+o(s.enrollment_limit)+" max ",1)):_("",!0)]),t[7]||(t[7]=e("span",{class:"mx-2"},"•",-1)),r(l(U),{class:"h-4 w-4 text-gray-400 mr-1"}),e("span",me,o(s.estimated_duration_hours)+" hours ",1)])])])])]),e("div",ue,[r(l(v),{href:a.route("admin.courses.show",s.id),class:"inline-flex items-center px-3 py-1 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500"},{default:x(()=>[...t[8]||(t[8]=[n(" View ",-1)])]),_:1},8,["href"]),r(l(v),{href:a.route("admin.courses.edit",s.id),class:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-emerald-700 bg-emerald-100 hover:bg-emerald-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500"},{default:x(()=>[...t[9]||(t[9]=[n(" Edit ",-1)])]),_:1},8,["href"]),e("button",{onClick:ye=>A(s),class:"text-red-600 hover:text-red-900 transition-colors duration-150"}," Delete ",8,ce)])])])]))),128))]),d.courses.links.length>3?(i(),m("div",fe,[e("div",ge,[e("div",null,[e("p",xe,[t[10]||(t[10]=n(" Showing ",-1)),e("span",ve,o(d.courses.from),1),t[11]||(t[11]=n(" to ",-1)),e("span",pe,o(d.courses.to),1),t[12]||(t[12]=n(" of ",-1)),e("span",be,o(d.courses.total),1),t[13]||(t[13]=n(" results ",-1))])]),e("div",null,[e("nav",he,[(i(!0),m(w,null,C(d.courses.links,s=>(i(),h(l(v),{key:s.label,href:s.url,"preserve-scroll":"",class:k(["relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",{"bg-emerald-50 border-emerald-500 text-emerald-600":s.active,"rounded-l-md":s.label==="« Previous","rounded-r-md":s.label==="Next »"}]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])])])):_("",!0)])])])]),_:1})}}};export{Ne as default};
