import{f as i,a as t,o as n,r as C,d as m,c as N,w as D,b as o,h as a,p as Y,g,i as u,t as d,F as A,j as $,n as x,k as H,x as Z}from"./app-C9VuOAcA.js";import{S as z}from"./StudentLayout-DYAz51qp.js";import{r as v}from"./CheckCircleIcon-Dfr4B660.js";import{r as S}from"./TrashIcon-CG8YGcQZ.js";import{r as w}from"./BellIcon-DZy7rD59.js";import{r as P}from"./EnvelopeIcon-DOPfEwWU.js";import{r as M}from"./ClockIcon-DzqDjEBv.js";import{r as q}from"./CalendarIcon-DCKUSBLu.js";import{r as G}from"./ArrowPathIcon-Bqr0d8KZ.js";import{r as J}from"./ExclamationCircleIcon-_hzRBpb8.js";import{r as K}from"./ExclamationTriangleIcon-CFQgV9g2.js";import{r as Q}from"./InformationCircleIcon-C9sL66Ri.js";import"./XMarkIcon-DVZDmqJm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SparklesIcon-B5mCvqwv.js";import"./QuestionMarkCircleIcon-RMiTBw9r.js";import"./UserIcon-DmdITMGs.js";import"./PlusIcon-8EoHlSa6.js";import"./CreditCardIcon-Ct1e-61n.js";function X(f,c){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})])}function ee(f,c){return n(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"})])}const te={class:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 py-8"},re={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},se={class:"mb-8"},oe={class:"flex items-center justify-between"},ae={class:"flex space-x-3"},ne=["disabled"],le={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},ie={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},de={class:"flex items-center"},ce={class:"p-3 bg-emerald-100 rounded-lg mr-4"},ue={class:"text-2xl font-bold text-gray-900"},me={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},ge={class:"flex items-center"},xe={class:"p-3 bg-blue-100 rounded-lg mr-4"},fe={class:"text-2xl font-bold text-gray-900"},pe={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},ye={class:"flex items-center"},he={class:"p-3 bg-amber-100 rounded-lg mr-4"},be={class:"text-2xl font-bold text-gray-900"},_e={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6"},ve={class:"flex space-x-1"},we=["onClick"],ke={class:"space-y-4"},Ce={key:0,class:"text-center py-12 bg-white rounded-xl shadow-sm border border-gray-200"},Ne={class:"mx-auto h-16 w-16 bg-gradient-to-r from-gray-400 to-gray-600 rounded-full flex items-center justify-center mb-4"},De={class:"p-6"},Ae={class:"flex items-start justify-between"},$e={class:"flex items-start space-x-4 flex-1"},Se={class:"flex-1 min-w-0"},Me={class:"flex items-center space-x-2 mb-1"},je={class:"text-lg font-semibold text-gray-900 truncate"},Te={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Fe={class:"text-gray-600 mb-2"},Be={class:"flex items-center space-x-4 text-sm text-gray-500"},Le={class:"flex items-center"},Ve={class:"flex items-center"},Ee={key:0,class:"mt-3 flex space-x-2"},Ie={class:"flex items-center space-x-2"},Oe=["onClick"],Re=["onClick"],Ue={key:0,class:"mt-8 text-center"},lt={__name:"Index",props:{notifications:{type:Object,default:()=>({data:[]})},filters:{type:Object,default:()=>({})}},setup(f){const c=f,p=C("all"),l=C([...c.notifications.data]),j=m(()=>[{key:"all",name:"All Notifications",count:c.notifications.total},{key:"unread",name:"Unread",count:_.value},{key:"success",name:"Success",count:y.value.success},{key:"info",name:"Info",count:y.value.info},{key:"warning",name:"Warning",count:y.value.warning},{key:"error",name:"Error",count:y.value.error}]),_=m(()=>l.value.filter(e=>!e.read_at).length),T=m(()=>{const e=new Date;return e.setDate(e.getDate()-7),l.value.filter(r=>new Date(r.created_at)>e).length}),y=m(()=>({success:l.value.filter(e=>e.type==="success").length,info:l.value.filter(e=>e.type==="info").length,warning:l.value.filter(e=>e.type==="warning").length,error:l.value.filter(e=>e.type==="error").length})),k=m(()=>{let e=l.value;switch(p.value){case"unread":e=e.filter(r=>!r.read_at);break;case"success":e=e.filter(r=>r.type==="success");break;case"info":e=e.filter(r=>r.type==="info");break;case"warning":e=e.filter(r=>r.type==="warning");break;case"error":e=e.filter(r=>r.type==="error");break}return e}),F=m(()=>c.notifications.next_page_url!==null),B=e=>({success:v,info:Q,warning:K,error:J,security:ee})[e]||w,L=e=>({success:"Success",info:"Information",warning:"Warning",error:"Error",security:"Security Alert"})[e]||"Notification",V=e=>{const r=new Date(e),h=Math.abs(new Date-r),b=Math.floor(h/(1e3*60*60*24));return b===0?"Today":b===1?"Yesterday":b<7?`${b} days ago`:r.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},E=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),I=async e=>{try{await axios.post(route("student.notifications.mark-as-read",e));const r=l.value.find(s=>s.id===e);r&&(r.read_at=new Date().toISOString())}catch(r){console.error("Failed to mark notification as read:",r)}},O=async()=>{try{await axios.post(route("student.notifications.mark-all-read")),l.value.forEach(e=>{e.read_at=new Date().toISOString()})}catch(e){console.error("Failed to mark all notifications as read:",e)}},R=async e=>{if(confirm("Are you sure you want to delete this notification?"))try{await axios.delete(route("student.notifications.destroy",e)),l.value=l.value.filter(r=>r.id!==e)}catch(r){console.error("Failed to delete notification:",r)}},U=async()=>{if(confirm("Are you sure you want to clear all notifications? This action cannot be undone."))try{await axios.delete(route("student.notifications.clear-all")),l.value=[]}catch(e){console.error("Failed to clear all notifications:",e)}},W=async()=>{if(c.notifications.next_page_url)try{const e=await axios.get(c.notifications.next_page_url);l.value.push(...e.data.notifications.data),c.notifications.next_page_url=e.data.notifications.next_page_url}catch(e){console.error("Failed to load more notifications:",e)}};return(e,r)=>(n(),N(z,null,{default:D(()=>[o(a(Y),{title:"Notifications"}),t("div",te,[t("div",re,[t("div",se,[t("div",oe,[r[2]||(r[2]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Notifications"),t("p",{class:"text-gray-600 mt-2"},"Your recent alerts and messages")],-1)),t("div",ae,[t("button",{onClick:O,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",disabled:_.value===0},[o(a(v),{class:"h-4 w-4 mr-2"}),r[0]||(r[0]=u(" Mark All Read ",-1))],8,ne),t("button",{onClick:U,class:"inline-flex items-center px-4 py-2 border border-red-300 text-red-700 font-medium rounded-lg hover:bg-red-50 transition-colors"},[o(a(S),{class:"h-4 w-4 mr-2"}),r[1]||(r[1]=u(" Clear All ",-1))])])])]),t("div",le,[t("div",ie,[t("div",de,[t("div",ce,[o(a(w),{class:"h-6 w-6 text-emerald-600"})]),t("div",null,[r[3]||(r[3]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Notifications",-1)),t("p",ue,d(f.notifications.length),1)])])]),t("div",me,[t("div",ge,[t("div",xe,[o(a(P),{class:"h-6 w-6 text-blue-600"})]),t("div",null,[r[4]||(r[4]=t("p",{class:"text-sm font-medium text-gray-600"},"Unread",-1)),t("p",fe,d(_.value),1)])])]),t("div",pe,[t("div",ye,[t("div",he,[o(a(M),{class:"h-6 w-6 text-amber-600"})]),t("div",null,[r[5]||(r[5]=t("p",{class:"text-sm font-medium text-gray-600"},"Recent",-1)),t("p",be,d(T.value),1)])])])]),t("div",_e,[t("div",ve,[(n(!0),i(A,null,$(j.value,s=>(n(),i("button",{key:s.key,onClick:h=>p.value=s.key,class:x(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",p.value===s.key?"bg-emerald-100 text-emerald-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"])},[u(d(s.name)+" ",1),s.count!==null?(n(),i("span",{key:0,class:x(["ml-2 px-2 py-0.5 text-xs rounded-full",p.value===s.key?"bg-emerald-200 text-emerald-900":"bg-gray-200 text-gray-700"])},d(s.count),3)):g("",!0)],10,we))),128))])]),t("div",ke,[k.value.length===0?(n(),i("div",Ce,[t("div",Ne,[o(a(w),{class:"h-8 w-8 text-white"})]),r[6]||(r[6]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"No notifications",-1)),r[7]||(r[7]=t("p",{class:"text-gray-600 mb-6"},"You're all caught up! No notifications to display.",-1))])):g("",!0),(n(!0),i(A,null,$(k.value,s=>(n(),i("div",{key:s.id,class:x(["bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200",{"border-l-4 border-l-emerald-500":s.type==="success","border-l-4 border-l-blue-500":s.type==="info","border-l-4 border-l-amber-500":s.type==="warning","border-l-4 border-l-red-500":s.type==="error","bg-blue-50 border-blue-200":!s.read_at}])},[t("div",De,[t("div",Ae,[t("div",$e,[t("div",{class:x(["flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",{"bg-emerald-100":s.type==="success","bg-blue-100":s.type==="info","bg-amber-100":s.type==="warning","bg-red-100":s.type==="error","bg-gray-100":!s.type}])},[(n(),N(H(B(s.type)),{class:x(["h-5 w-5",{"text-emerald-600":s.type==="success","text-blue-600":s.type==="info","text-amber-600":s.type==="warning","text-red-600":s.type==="error","text-gray-600":!s.type}])},null,8,["class"]))],2),t("div",Se,[t("div",Me,[t("h3",je,d(s.data.title||L(s.type)),1),s.read_at?g("",!0):(n(),i("span",Te," New "))]),t("p",Fe,d(s.data.message||s.data.content||"No message content"),1),t("div",Be,[t("span",Le,[o(a(q),{class:"h-4 w-4 mr-1"}),u(" "+d(V(s.created_at)),1)]),t("span",Ve,[o(a(M),{class:"h-4 w-4 mr-1"}),u(" "+d(E(s.created_at)),1)])]),s.data.action_url?(n(),i("div",Ee,[o(a(Z),{href:s.data.action_url,class:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-emerald-700 bg-emerald-50 rounded-lg hover:bg-emerald-100 transition-colors"},{default:D(()=>[o(a(X),{class:"h-4 w-4 mr-1"}),r[8]||(r[8]=u(" View ",-1))]),_:1},8,["href"])])):g("",!0)])]),t("div",Ie,[s.read_at?g("",!0):(n(),i("button",{key:0,onClick:h=>I(s.id),class:"p-2 text-gray-400 hover:text-emerald-600 transition-colors",title:"Mark as read"},[o(a(v),{class:"h-5 w-5"})],8,Oe)),t("button",{onClick:h=>R(s.id),class:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete notification"},[o(a(S),{class:"h-5 w-5"})],8,Re)])])])],2))),128))]),F.value?(n(),i("div",Ue,[t("button",{onClick:W,class:"inline-flex items-center px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors"},[o(a(G),{class:"h-4 w-4 mr-2"}),r[9]||(r[9]=u(" Load More Notifications ",-1))])])):g("",!0)])])]),_:1}))}};export{lt as default};
