import{f as i,a as t,o,g as C,d as g,c as N,w as D,b as a,i as n,q as z,h as u,j as m,t as d,F as A,k as S,n as x,l as q,y as H}from"./app-CWbkaSej.js";import{S as P}from"./StudentLayout-Bz1yixGJ.js";import{r as v}from"./CheckCircleIcon-6Ugpu2Zo.js";import{r as $}from"./TrashIcon-8v0Z9Mwn.js";import{r as w}from"./BellIcon-Mnuvn4R_.js";import{r as M}from"./ClockIcon-C6lBIgmD.js";import{r as G}from"./CalendarIcon-B8qYC1oa.js";import{r as J}from"./ArrowPathIcon-OrodXPZw.js";import{r as K}from"./ExclamationCircleIcon-DVcvKxcv.js";import{r as Q}from"./ExclamationTriangleIcon-BsqxN2vJ.js";import{r as X}from"./InformationCircleIcon-H8iX2t5W.js";import"./XMarkIcon-CPBwBHdL.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./UserIcon-BVedJKyV.js";import"./PlusIcon-dLXzzi6w.js";import"./CreditCardIcon-Dugfw6Ww.js";function Z(y,c){return o(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})])}function ee(y,c){return o(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})])}const te={class:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 py-8"},re={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},se={class:"mb-8"},oe={class:"flex items-center justify-between"},ae={class:"flex space-x-3"},ne=["disabled"],le={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},ie={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},de={class:"flex items-center"},ce={class:"p-3 bg-emerald-100 rounded-lg mr-4"},ue={class:"text-2xl font-bold text-gray-900"},me={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},ge={class:"flex items-center"},xe={class:"p-3 bg-blue-100 rounded-lg mr-4"},ye={class:"text-2xl font-bold text-gray-900"},pe={class:"bg-white rounded-xl p-6 shadow-sm border border-gray-200"},fe={class:"flex items-center"},be={class:"p-3 bg-amber-100 rounded-lg mr-4"},he={class:"text-2xl font-bold text-gray-900"},_e={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-6"},ve={class:"flex space-x-1"},we=["onClick"],ke={class:"space-y-4"},Ce={key:0,class:"text-center py-12 bg-white rounded-xl shadow-sm border border-gray-200"},Ne={class:"mx-auto h-16 w-16 bg-gradient-to-r from-gray-400 to-gray-600 rounded-full flex items-center justify-center mb-4"},De={class:"p-6"},Ae={class:"flex items-start justify-between"},Se={class:"flex items-start space-x-4 flex-1"},$e={class:"flex-1 min-w-0"},Me={class:"flex items-center space-x-2 mb-1"},Te={class:"text-lg font-semibold text-gray-900 truncate"},je={key:0,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Ve={class:"text-gray-600 mb-2"},Be={class:"flex items-center space-x-4 text-sm text-gray-500"},Fe={class:"flex items-center"},Le={class:"flex items-center"},Ee={key:0,class:"mt-3 flex space-x-2"},Ie={class:"flex items-center space-x-2"},Oe=["onClick"],Re=["onClick"],Ue={key:0,class:"mt-8 text-center"},ot={__name:"Index",props:{notifications:{type:Object,default:()=>({data:[]})},filters:{type:Object,default:()=>({})}},setup(y){const c=y,p=C("all"),l=C([...c.notifications.data]),T=g(()=>[{key:"all",name:"All Notifications",count:c.notifications.total},{key:"unread",name:"Unread",count:_.value},{key:"success",name:"Success",count:f.value.success},{key:"info",name:"Info",count:f.value.info},{key:"warning",name:"Warning",count:f.value.warning},{key:"error",name:"Error",count:f.value.error}]),_=g(()=>l.value.filter(e=>!e.read_at).length),j=g(()=>{const e=new Date;return e.setDate(e.getDate()-7),l.value.filter(r=>new Date(r.created_at)>e).length}),f=g(()=>({success:l.value.filter(e=>e.type==="success").length,info:l.value.filter(e=>e.type==="info").length,warning:l.value.filter(e=>e.type==="warning").length,error:l.value.filter(e=>e.type==="error").length})),k=g(()=>{let e=l.value;switch(p.value){case"unread":e=e.filter(r=>!r.read_at);break;case"success":e=e.filter(r=>r.type==="success");break;case"info":e=e.filter(r=>r.type==="info");break;case"warning":e=e.filter(r=>r.type==="warning");break;case"error":e=e.filter(r=>r.type==="error");break}return e}),V=g(()=>c.notifications.next_page_url!==null),B=e=>({success:v,info:X,warning:Q,error:K,security:ShieldExclamationIcon})[e]||w,F=e=>({success:"Success",info:"Information",warning:"Warning",error:"Error",security:"Security Alert"})[e]||"Notification",L=e=>({success:"bg-emerald-100 text-emerald-800",info:"bg-blue-100 text-blue-800",warning:"bg-amber-100 text-amber-800",error:"bg-red-100 text-red-800",security:"bg-purple-100 text-purple-800"})[e]||"bg-gray-100 text-gray-800",E=e=>{const r=new Date(e),b=Math.abs(new Date-r),h=Math.floor(b/(1e3*60*60*24));return h===0?"Today":h===1?"Yesterday":h<7?`${h} days ago`:r.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},I=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),O=async e=>{try{await axios.post(route("student.notifications.mark-as-read",e));const r=l.value.find(s=>s.id===e);r&&(r.read_at=new Date().toISOString())}catch(r){console.error("Failed to mark notification as read:",r)}},R=async()=>{try{await axios.post(route("student.notifications.mark-all-read")),l.value.forEach(e=>{e.read_at=new Date().toISOString()})}catch(e){console.error("Failed to mark all notifications as read:",e)}},U=async e=>{if(confirm("Are you sure you want to delete this notification?"))try{await axios.delete(route("student.notifications.destroy",e)),l.value=l.value.filter(r=>r.id!==e)}catch(r){console.error("Failed to delete notification:",r)}},W=async()=>{if(confirm("Are you sure you want to clear all notifications? This action cannot be undone."))try{await axios.delete(route("student.notifications.clear-all")),l.value=[]}catch(e){console.error("Failed to clear all notifications:",e)}},Y=async()=>{if(c.notifications.next_page_url)try{const e=await axios.get(c.notifications.next_page_url);l.value.push(...e.data.notifications.data),c.notifications.next_page_url=e.data.notifications.next_page_url}catch(e){console.error("Failed to load more notifications:",e)}};return(e,r)=>(o(),N(P,null,{default:D(()=>[a(n(z),{title:"Notifications"}),t("div",te,[t("div",re,[t("div",se,[t("div",oe,[r[2]||(r[2]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Notifications"),t("p",{class:"text-gray-600 mt-2"},"Your recent alerts and messages")],-1)),t("div",ae,[t("button",{onClick:R,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",disabled:_.value===0},[a(n(v),{class:"h-4 w-4 mr-2"}),r[0]||(r[0]=m(" Mark All Read ",-1))],8,ne),t("button",{onClick:W,class:"inline-flex items-center px-4 py-2 border border-red-300 text-red-700 font-medium rounded-lg hover:bg-red-50 transition-colors"},[a(n($),{class:"h-4 w-4 mr-2"}),r[1]||(r[1]=m(" Clear All ",-1))])])])]),t("div",le,[t("div",ie,[t("div",de,[t("div",ce,[a(n(w),{class:"h-6 w-6 text-emerald-600"})]),t("div",null,[r[3]||(r[3]=t("p",{class:"text-sm font-medium text-gray-600"},"Total Notifications",-1)),t("p",ue,d(y.notifications.length),1)])])]),t("div",me,[t("div",ge,[t("div",xe,[a(n(ee),{class:"h-6 w-6 text-blue-600"})]),t("div",null,[r[4]||(r[4]=t("p",{class:"text-sm font-medium text-gray-600"},"Unread",-1)),t("p",ye,d(_.value),1)])])]),t("div",pe,[t("div",fe,[t("div",be,[a(n(M),{class:"h-6 w-6 text-amber-600"})]),t("div",null,[r[5]||(r[5]=t("p",{class:"text-sm font-medium text-gray-600"},"Recent",-1)),t("p",he,d(j.value),1)])])])]),t("div",_e,[t("div",ve,[(o(!0),i(A,null,S(T.value,s=>(o(),i("button",{key:s.key,onClick:b=>p.value=s.key,class:x(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",p.value===s.key?"bg-emerald-100 text-emerald-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"])},[m(d(s.name)+" ",1),s.count!==null?(o(),i("span",{key:0,class:x(["ml-2 px-2 py-0.5 text-xs rounded-full",p.value===s.key?"bg-emerald-200 text-emerald-900":"bg-gray-200 text-gray-700"])},d(s.count),3)):u("",!0)],10,we))),128))])]),t("div",ke,[k.value.length===0?(o(),i("div",Ce,[t("div",Ne,[a(n(w),{class:"h-8 w-8 text-white"})]),r[6]||(r[6]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"No notifications",-1)),r[7]||(r[7]=t("p",{class:"text-gray-600 mb-6"},"You're all caught up! No notifications to display.",-1))])):u("",!0),(o(!0),i(A,null,S(k.value,s=>(o(),i("div",{key:s.id,class:x(["bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200",{"border-l-4 border-l-emerald-500":s.type==="success","border-l-4 border-l-blue-500":s.type==="info","border-l-4 border-l-amber-500":s.type==="warning","border-l-4 border-l-red-500":s.type==="error","bg-blue-50 border-blue-200":!s.read_at}])},[t("div",De,[t("div",Ae,[t("div",Se,[t("div",{class:x(["flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center",{"bg-emerald-100":s.type==="success","bg-blue-100":s.type==="info","bg-amber-100":s.type==="warning","bg-red-100":s.type==="error","bg-gray-100":!s.type}])},[(o(),N(q(B(s.type)),{class:x(["h-5 w-5",{"text-emerald-600":s.type==="success","text-blue-600":s.type==="info","text-amber-600":s.type==="warning","text-red-600":s.type==="error","text-gray-600":!s.type}])},null,8,["class"]))],2),t("div",$e,[t("div",Me,[t("h3",Te,d(s.data.title||F(s.type)),1),s.read_at?u("",!0):(o(),i("span",je," New "))]),t("p",Ve,d(s.data.message||s.data.content||"No message content"),1),t("div",Be,[t("span",Fe,[a(n(G),{class:"h-4 w-4 mr-1"}),m(" "+d(E(s.created_at)),1)]),t("span",Le,[a(n(M),{class:"h-4 w-4 mr-1"}),m(" "+d(I(s.created_at)),1)]),s.type?(o(),i("span",{key:0,class:x(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium capitalize",L(s.type)])},d(s.type),3)):u("",!0)]),s.data.action_url?(o(),i("div",Ee,[a(n(H),{href:s.data.action_url,class:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-emerald-700 bg-emerald-50 rounded-lg hover:bg-emerald-100 transition-colors"},{default:D(()=>[a(n(Z),{class:"h-4 w-4 mr-1"}),r[8]||(r[8]=m(" View ",-1))]),_:1},8,["href"])])):u("",!0)])]),t("div",Ie,[s.read_at?u("",!0):(o(),i("button",{key:0,onClick:b=>O(s.id),class:"p-2 text-gray-400 hover:text-emerald-600 transition-colors",title:"Mark as read"},[a(n(v),{class:"h-5 w-5"})],8,Oe)),t("button",{onClick:b=>U(s.id),class:"p-2 text-gray-400 hover:text-red-600 transition-colors",title:"Delete notification"},[a(n($),{class:"h-5 w-5"})],8,Re)])])])],2))),128))]),V.value?(o(),i("div",Ue,[t("button",{onClick:Y,class:"inline-flex items-center px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors"},[a(n(J),{class:"h-4 w-4 mr-2"}),r[9]||(r[9]=m(" Load More Notifications ",-1))])])):u("",!0)])])]),_:1}))}};export{ot as default};
